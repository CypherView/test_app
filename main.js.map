{"version":3,"sources":["src/app/core/guards/auth.guard.ts","src/app/core/guards/feature.guard.ts","src/app/core/services/navigation.service.ts","node_modules/primeng/fesm2022/primeng-avatar.mjs","src/app/features/clients/components/client-switcher/client-switcher.component.ts","src/app/features/clients/components/client-switcher/client-switcher.component.html","src/app/layouts/services/layout.service.ts","src/app/layouts/components/sidebar/menu-item/small-caps.pipe.ts","src/app/layouts/components/sidebar/menu-item/menu-item.component.ts","src/app/layouts/components/sidebar/menu-item/menu-item.component.html","src/app/layouts/components/sidebar/toggle-button/toggle-button.component.ts","src/app/layouts/components/sidebar/toggle-button/toggle-button.component.html","src/app/layouts/components/sidebar/user-profile/user-profile.component.ts","src/app/layouts/components/sidebar/user-profile/user-profile.component.html","src/app/features/accounts/components/account-switcher/account-switcher.component.ts","src/app/features/accounts/components/account-switcher/account-switcher.component.html","src/app/core/models/http-context.constants.ts","src/app/core/services/api-verification.service.ts","src/app/shared/components/qa-permission-tester/qa-permission-tester.component.ts","src/app/shared/components/qa-permission-tester/qa-permission-tester.component.html","src/app/layouts/components/sidebar/sidebar.component.ts","src/app/layouts/components/sidebar/sidebar.component.html","src/app/layouts/components/main-layout/main-layout.component.ts","src/app/layouts/components/main-layout/main-layout.component.html","src/app/features/external-tab/external-tab.component.ts","src/app/features/external-tab/external-tab.component.html","src/app/core/guards/client-selected.guard.ts","src/app/core/guards/admin-permissions.guard.ts","src/app/app.routes.ts","src/app/core/interceptors/api-url.interceptor.ts","src/app/core/services/token-refresh-coordinator.service.ts","src/app/core/interceptors/auth.interceptor.ts","src/app/core/startup/startup.initializer.ts","src/app/core/services/global-error-handler.service.ts","node_modules/@angular/service-worker/fesm2022/service-worker.mjs","src/app/features/administration/services/entity/entity-adapters.provider.ts","src/app/app.config.ts","src/app/shared/components/toast/toast.component.ts","src/app/shared/components/toast/toast.component.html","src/app/app.component.ts","src/app/app.component.html","src/main.ts"],"sourcesContent":["import { CanActivateFn, Router } from '@angular/router';\nimport { inject } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\n\nexport const authGuard: CanActivateFn = async (_route, _state) => {\n  const authService = inject(AuthService);\n  const router = inject(Router);\n\n  if (authService.isAuthenticated()) {\n    return true;\n  } else {\n    // Not authenticated - redirect to login with return URL\n    // Don't clear data here - let login component handle user mismatch\n    await router.navigate(['auth/login']);\n    return false;\n  }\n};\n","import { inject } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivateFn,\n  Router,\n  RouterStateSnapshot,\n} from '@angular/router';\nimport { get } from 'lodash';\nimport { ClientDataService } from '../../features/clients/services/client-data.service';\nimport { NavigationService } from '../services/navigation.service';\nimport { isNullOrUndefined } from '../../shared/utils';\n\ntype FeatureFlagPath = string | string[];\n\n/**\n * Guard that checks a feature flag path on the client features object.\n * Uses the same merged feature logic as the sidebar and feature-section components.\n * Usage in route data:\n *   data: { featureFlag: 'page.alerts.enabled' }\n * or multiple:\n *   data: { featureFlag: ['page.alerts.enabled', 'page.videos.enabled'], requireAll: false }\n */\nfunction isAllowedByFlags(\n  features: unknown,\n  flag: FeatureFlagPath | undefined,\n  requireAll: boolean,\n): boolean {\n  const noFlagSpecified =\n    isNullOrUndefined(flag) || (Array.isArray(flag) && flag.length === 0);\n  if (noFlagSpecified) return true;\n\n  const evaluate = (path: string): boolean =>\n    Boolean(get(features as Record<string, unknown>, path));\n\n  return Array.isArray(flag)\n    ? requireAll\n      ? flag.every(evaluate)\n      : flag.some(evaluate)\n    : evaluate(flag);\n}\n\nexport const featureGuard: CanActivateFn = (\n  route: ActivatedRouteSnapshot,\n  _state: RouterStateSnapshot,\n) => {\n  const router = inject(Router);\n  const clientDataService = inject(ClientDataService);\n  const navigationService = inject(NavigationService);\n  const flag = route.data?.['featureFlag'] as FeatureFlagPath | undefined;\n  const requireAll =\n    (route.data?.['requireAll'] as boolean | undefined) ?? true;\n\n  // If no flag provided allow immediately\n  if (isNullOrUndefined(flag) || (Array.isArray(flag) && flag.length === 0)) {\n    return true;\n  }\n\n  const evaluate = () => {\n    const features = navigationService.getClientFeatures();\n    const allowed = isAllowedByFlags(features, flag, requireAll);\n    return allowed ? true : router.createUrlTree(['']);\n  };\n\n  if (clientDataService.isFeatureEvaluationReady()) {\n    return evaluate();\n  }\n\n  return clientDataService\n    .waitForFeatureReadiness()\n    .then(() => evaluate())\n    .catch((err) => {\n      console.warn(\n        '[featureGuard] waitForFeatureReadiness failed; proceeding with current features.',\n        err,\n      );\n      return evaluate();\n    });\n};\n","import { Injectable, computed, signal, inject, effect } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { filter, firstValueFrom } from 'rxjs';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { ClientDataService } from '../../features/clients/services/client-data.service';\nimport { AuthDataService } from './auth-data.service';\nimport { ApiSchemaService } from './api-schema.service';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport {\n  AppFeatureDefaultsStructure,\n  APP_FEATURE_FLAGS,\n} from '../models/feature-flags.model';\nimport { isDefined, isEmpty, isNullOrUndefined } from '../../shared/utils';\nimport { AccountsService, ClientResponse } from '../../api';\nimport { RequestCacheService } from '../../shared/services/request-cache.service';\nimport { cloneDeep } from 'lodash';\nimport { DEFAULT_SYSTEM_ID } from '../models/constants';\n\nexport interface NavigationGroup {\n  id: string;\n  name: string;\n  items: NavigationItem[];\n}\n\nexport interface PageDefinition {\n  name: string | ((features: AppFeatureDefaultsStructure) => string);\n  route?: string;\n  featureFlag?: string | string[];\n  permissions?: string | string[];\n  id?: string;\n  externalUrl?: string;\n  icon?:\n    | IconDefinition\n    | string\n    | ((features: AppFeatureDefaultsStructure) => IconDefinition | string);\n  visible?: (\n    features: AppFeatureDefaultsStructure,\n    isMobile?: boolean,\n  ) => boolean;\n  group?: string | ((features: AppFeatureDefaultsStructure) => string);\n  order?: number | ((features: AppFeatureDefaultsStructure) => number);\n  children?: Record<string, PageDefinition>;\n  getChildren?: (\n    features: AppFeatureDefaultsStructure,\n  ) => Record<string, PageDefinition>;\n  external?: boolean;\n  iframe?: boolean;\n}\n\nexport interface NavigationItem {\n  id: string;\n  external: boolean;\n  iframe?: boolean;\n  icon?: string | IconDefinition;\n  name: string;\n  group: string;\n  order: number;\n  route?: string;\n  externalUrl?: string;\n  permissions?: string | string[];\n  children?: NavigationItem[];\n  featureFlag?: string | string[];\n}\n\n// Icon mapping using FontAwesome icons\nexport const PAGE_ICONS: Record<string, IconDefinition | string> = {\n  overview: 'pi pi-car',\n  dashboards: 'pi pi-chart-line',\n  alerts: 'pi pi-volume-up',\n  videos: 'pi pi-video',\n  replay: 'pi pi-history',\n  mapsearch: 'pi pi-map',\n  reporting: 'pi pi-chart-pie',\n  admin: 'pi pi-cog',\n  demo: 'pi pi-palette',\n  system: 'pi pi-heart-pulse',\n  external: 'pi pi-globe',\n  geofence: 'pi pi-draw-polygon',\n  assetperformance: 'pi pi-medal',\n  devicehealth: 'pi pi-heart-pulse',\n  settings: 'pi pi-sliders',\n  maps: 'pi pi-map-marker',\n  notifications: 'pi pi-bell',\n  development: 'pi pi-code',\n  telemetry: 'pi pi-chart-scatter',\n  api: 'pi pi-book',\n  appstore: 'pi pi-th-large',\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NavigationService {\n  private readonly clientDataService = inject(ClientDataService);\n  private readonly authDataService = inject(AuthDataService);\n  private readonly apiSchemaService = inject(ApiSchemaService);\n  private readonly router = inject(Router);\n  private readonly accountsService = inject(AccountsService);\n  private readonly cacheService = inject(RequestCacheService);\n\n  readonly activeRoot = signal<string>('overview');\n  readonly pageHistory = signal<Record<string, string>>({});\n  readonly urlHistory = signal<string[]>([]);\n  readonly isMobile = signal<boolean>(false);\n\n  // Cache for merged flags per groupId\n  private readonly mergedFlagsCache = new Map<\n    string,\n    Record<string, unknown>\n  >();\n\n  // Signal to track when inheritance has been loaded\n  private readonly inheritanceLoaded = signal(false);\n\n  // Tracks which client ID the inheritance cache was last loaded for\n  private lastInheritanceClientId: string | null = null;\n\n  // Computed signals for reactive navigation\n  readonly navigationItems = computed(() => this.computeNavigationItems());\n  readonly navigationGroups = computed(() => this.computeNavigationGroups());\n\n  readonly previousUrl = computed(() => {\n    const history = this.urlHistory();\n    return history.at(-2) ?? '';\n  });\n\n  constructor() {\n    // Subscribe to router events\n    this.router.events\n      .pipe(\n        filter((event) => event instanceof NavigationEnd),\n        takeUntilDestroyed(),\n      )\n      .subscribe((event: NavigationEnd) => {\n        if (!event.urlAfterRedirects.includes('redirecting=')) {\n          this.urlHistory.update((history) => [\n            ...history.slice(-19), // Keep last 20 URLs\n            event.urlAfterRedirects,\n          ]);\n        }\n        this.setPath(event.urlAfterRedirects || event.url);\n      });\n\n    // Set initial path\n    this.setPath(this.router.url);\n\n    // Listen to window resize for mobile detection\n    this.checkMobileState();\n    window.addEventListener('resize', () => this.checkMobileState());\n\n    // Load inherited flags on service initialization\n    this.loadInheritedFlagsOnInit();\n\n    // Reload inherited flags whenever the selected client changes\n    effect(\n      () => {\n        const client = this.clientDataService.getSelectedClientSignal()();\n        const clientId = client?.id ?? null;\n        const groupId = client?.['group'] ?? client?.['parent']?.id ?? null;\n        const inheritanceKey = `${clientId}:${groupId}`;\n\n        // Skip if already processed this inheritance configuration\n        if (inheritanceKey === this.lastInheritanceClientId) {\n          if (isNullOrUndefined(clientId)) {\n            this.inheritanceLoaded.set(true);\n          }\n          return;\n        }\n\n        this.lastInheritanceClientId = inheritanceKey;\n\n        if (isNullOrUndefined(clientId) || clientId.length === 0) {\n          this.inheritanceLoaded.set(true);\n          return;\n        }\n\n        this.inheritanceLoaded.set(false);\n\n        // Pass client object to avoid redundant API call\n        void this.mergeParentGroupFlags(clientId, client).then(() => {\n          this.inheritanceLoaded.set(true);\n        });\n      },\n      { allowSignalWrites: true },\n    );\n  }\n\n  /**\n   * Loads inherited flags for the current client on service initialization\n   * This ensures flags are available for navigation computation\n   */\n  private loadInheritedFlagsOnInit(): void {\n    const selectedClient = this.clientDataService.getSelectedClient();\n    if (\n      !selectedClient ||\n      !isDefined(selectedClient.id) ||\n      selectedClient.id?.length === 0\n    ) {\n      this.inheritanceLoaded.set(true);\n      return;\n    }\n\n    const clientId = selectedClient.id;\n    this.lastInheritanceClientId = clientId ?? null;\n\n    // Fire async load for inherited flags, passing the client object to avoid re-fetch\n    void this.mergeParentGroupFlags(clientId, selectedClient).then(() => {\n      // Trigger recomputation of navigation items\n      this.inheritanceLoaded.set(true);\n    });\n  }\n\n  private checkMobileState(): void {\n    this.isMobile.set(window.innerWidth < 768); // Adjust breakpoint as needed\n  }\n  private setPath(url: string): void {\n    const pages = this.getPages();\n\n    let matchedKey: string | undefined;\n    let matchedPage: PageDefinition | undefined;\n\n    for (const [key, page] of Object.entries(pages)) {\n      if (isDefined(page.route) && this.routeMatches(url, page.route)) {\n        matchedKey = key;\n        matchedPage = page;\n        break;\n      }\n    }\n\n    if (isNullOrUndefined(matchedKey)) {\n      matchedKey = Object.keys(pages).find((x) => url.indexOf(x) === 1);\n      matchedPage = isDefined(matchedKey) ? pages[matchedKey] : undefined;\n    }\n\n    if (isNullOrUndefined(matchedKey) || !matchedPage) return;\n\n    this.pageHistory.update((history) => ({\n      ...history,\n      [matchedKey]: url,\n    }));\n\n    const children =\n      matchedPage.children ??\n      (matchedPage.getChildren\n        ? matchedPage.getChildren(this.getFeatures())\n        : {});\n\n    const childKey = Object.keys(children).find((childKey) => {\n      const child = children[childKey];\n      return isDefined(child.route) && this.routeMatches(url, child.route);\n    });\n\n    this.activeRoot.set(\n      isDefined(childKey) ? `${matchedKey}/${childKey}` : matchedKey,\n    );\n  }\n\n  /**\n   * Checks if a URL matches a route pattern\n   * Handles query params, fragments, and exact path matching\n   */\n  private routeMatches(url: string, routePattern: string): boolean {\n    const cleanUrl = url.startsWith('/') ? url.substring(1) : url;\n    const [routePath, routeQuery] = routePattern.split('?');\n    const [urlPath, urlQuery] = cleanUrl.split('?');\n\n    if (routePath !== urlPath) return false;\n\n    if (routeQuery) {\n      if (!urlQuery) return false;\n\n      const routeParams = new URLSearchParams(routeQuery);\n      const urlParams = new URLSearchParams(urlQuery);\n\n      for (const [key, value] of routeParams.entries()) {\n        if (urlParams.get(key) !== value) return false;\n      }\n    }\n\n    return true;\n  }\n  private getFeatures(): AppFeatureDefaultsStructure {\n    // Trigger dependence on inheritance load signal\n    this.inheritanceLoaded();\n\n    const clientDataFeatures = this.clientDataService.getFeaturesSignal()();\n    const selectedClient = this.clientDataService.getSelectedClient();\n\n    // If no client, return just the client features (which already include defaults)\n    if (\n      !selectedClient ||\n      !isDefined(selectedClient.id) ||\n      selectedClient.id?.length === 0\n    ) {\n      return clientDataFeatures;\n    }\n\n    // Start with client features (includes defaults + client-specific overrides)\n    // This ensures all properties have at least their default values\n    const result = cloneDeep(clientDataFeatures);\n\n    // Overlay inherited flags from parent groups, but only for null/undefined values\n    // This allows parent group settings to fill gaps where client doesn't explicitly set values\n    const inheritedFlags = this.getCachedInheritedFlags(selectedClient.id);\n    if (isDefined(inheritedFlags) && Object.keys(inheritedFlags).length > 0) {\n      // Merge inherited flags into the feature structure\n      this.mergeInheritedFlags(result, inheritedFlags);\n    }\n\n    return result;\n  }\n\n  /**\n   * Gets cached inherited flags if available\n   * Returns null if client doesn't have a group or parent, or if no flags are cached\n   * Checks group first, then falls back to parent.id (matching FeatureSectionComponent)\n   */\n  private getCachedInheritedFlags(\n    _clientId: string,\n  ): Record<string, unknown> | null {\n    try {\n      const client = this.clientDataService.getSelectedClient();\n      // Only attempt inheritance if client explicitly has a group or parent\n      if (!client || typeof client !== 'object') {\n        return null;\n      }\n\n      let groupId: string | undefined;\n\n      // First check for group property\n      if (\n        'group' in client &&\n        typeof client['group'] === 'string' &&\n        client['group']\n      ) {\n        groupId = client['group'];\n      }\n      // Fallback to parent.id if no group\n      else if (isDefined(client?.['parent'])) {\n        const parent = client['parent'] as { id: string } | undefined;\n        if (isDefined(parent?.id) && parent.id !== 'root') {\n          groupId = parent.id;\n        }\n      }\n\n      if (!isDefined(groupId)) {\n        // No group or parent means no inheritance\n        return null;\n      }\n\n      // Return cached flags if available\n      const cached = this.mergedFlagsCache.get(groupId);\n      return cached ?? null;\n    } catch {\n      // Silently fail - inheritance is optional\n      return null;\n    }\n  }\n\n  /**\n   * Merges inherited flags into the feature result object\n   * Only sets values that aren't already explicitly defined by the client\n   */\n  private mergeInheritedFlags(\n    result: AppFeatureDefaultsStructure,\n    inheritedFlags: Record<string, unknown>,\n  ): void {\n    Object.entries(inheritedFlags).forEach(([key, value]) => {\n      const parts = key.split('.');\n      let current = result as unknown as Record<string, unknown>;\n\n      // Navigate to the parent object\n      for (let i = 0; i < parts.length - 1; i++) {\n        const part = parts[i];\n        if (!isDefined(current[part]) || current[part] === null) {\n          current[part] = {};\n        }\n        current = current[part] as Record<string, unknown>;\n      }\n\n      // Only set the value if client didn't explicitly set it (null or undefined)\n      const lastKey = parts.at(-1);\n      if (isDefined(lastKey) && lastKey.length > 0) {\n        const existingValue = current[lastKey];\n        // If the value is null, undefined, or missing, use the inherited value\n        if (!isDefined(existingValue) || existingValue === null) {\n          current[lastKey] = value;\n        }\n      }\n    });\n  }\n\n  /**\n   * Merges flags from all parent company groups up the hierarchy\n   * Uses the provided client object to extract group/parent info without re-fetching.\n   * Only calls the API if the client object is incomplete or missing.\n   * Checks for group property first, then falls back to parent.id\n   * Returns empty object if no group/parent found (no inheritance applies)\n   * Matches the pattern used in FeatureSectionComponent\n   */\n  private async mergeParentGroupFlags(\n    clientId: string,\n    clientObject?: Partial<ClientResponse> | null,\n  ): Promise<Record<string, unknown>> {\n    try {\n      // Use provided client object first; only re-fetch if needed\n      let client = clientObject;\n      if (!client || !isDefined(client.id)) {\n        // Re-fetch only if client object is missing or incomplete\n        client = await firstValueFrom(this.accountsService.getClient(clientId));\n      }\n\n      let groupId: string | undefined;\n\n      // First check for group property\n      if (\n        isDefined(client) &&\n        'group' in client &&\n        typeof client['group'] === 'string' &&\n        client['group']\n      ) {\n        groupId = client['group'];\n      }\n      // Fallback to parent.id if no group\n      else if (isDefined(client?.['parent'])) {\n        const parent = client['parent'] as { id: string } | undefined;\n        if (isDefined(parent?.id) && parent.id !== 'root') {\n          groupId = parent.id;\n        }\n      }\n\n      // If client has no group or parent, inheritance doesn't apply\n      if (!isDefined(groupId)) {\n        return {};\n      }\n\n      return this.getCompanyGroupMergedFlags(groupId);\n    } catch {\n      // Silently fail - inheritance is optional and not critical to navigation\n      return {};\n    }\n  }\n\n  /**\n   * Recursively traverses the company group hierarchy and merges feature flags\n   */\n  private async getCompanyGroupMergedFlags(\n    groupId: string,\n  ): Promise<Record<string, unknown>> {\n    // Check cache first\n    if (this.mergedFlagsCache.has(groupId)) {\n      const cached = this.mergedFlagsCache.get(groupId);\n      return cached ?? {};\n    }\n\n    const result: Record<string, unknown> = {};\n    const groups: unknown[] = [];\n    let currentGroupId: string | undefined = groupId;\n    const visited = new Set<string>();\n\n    while (\n      isDefined(currentGroupId) &&\n      currentGroupId.length > 0 &&\n      currentGroupId !== DEFAULT_SYSTEM_ID &&\n      !visited.has(currentGroupId)\n    ) {\n      visited.add(currentGroupId);\n      try {\n        const group: unknown = await this.cacheService.getOrFetchAsync(\n          `company-group-${currentGroupId}`,\n          () =>\n            firstValueFrom(\n              this.accountsService.getCompanyGroup(currentGroupId as string),\n            ),\n          15000,\n        );\n\n        groups.push(group);\n        const parentId = (group as { parent?: { id: string } }).parent?.id;\n        currentGroupId =\n          isDefined(parentId) && parentId.length > 0 && parentId !== 'root'\n            ? parentId\n            : undefined;\n      } catch (error) {\n        console.error(`Failed to fetch company group ${currentGroupId}`, error);\n        currentGroupId = undefined;\n      }\n    }\n\n    // Merge flags from all groups in hierarchy (bottom-up, so parents override children)\n    // Groups are collected as [child, parent, grandparent], so iterate in that order:\n    // child sets flags first, parents override as we progress up the hierarchy\n    groups.forEach((g: unknown) => {\n      Object.entries(\n        (g as { flags: Record<string, Record<string, unknown>> })?.flags?.[\n          APP_FEATURE_FLAGS\n        ] ?? {},\n      ).forEach(([key, value]) => {\n        // Convert hyphenated keys to dot notation\n        const dottedKey = key.replaceAll('-', '.');\n        result[dottedKey] = value;\n      });\n    });\n\n    // Store in cache\n    this.mergedFlagsCache.set(groupId, result);\n    return result;\n  }\n\n  private getPages(): Record<string, PageDefinition> {\n    const user = this.authDataService.getUserProfile();\n\n    return {\n      overview: {\n        route: 'position',\n        name: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['overview']?.name)\n            ? 'Position'\n            : (features.page?.['overview']?.name ?? 'Position');\n        },\n        icon: (features: AppFeatureDefaultsStructure): IconDefinition => {\n          const iconName = features.page?.['overview']?.icon;\n          if (\n            iconName != null &&\n            iconName.trim().length > 0 &&\n            iconName in PAGE_ICONS\n          ) {\n            return PAGE_ICONS[iconName] as IconDefinition;\n          }\n          return PAGE_ICONS['overview'] as IconDefinition;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['overview']?.group)\n            ? 'status'\n            : (features.page?.['overview']?.group ?? 'status');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['overview']?.order ?? 0;\n        },\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['overview']?.enabled ?? true;\n        },\n      },\n      geofences: {\n        route: 'overview?geofence=true',\n        name: 'Geofences',\n        icon: PAGE_ICONS['geofence'],\n        visible: (\n          features: AppFeatureDefaultsStructure,\n          isMobile?: boolean,\n        ): boolean => {\n          return (\n            (features.page?.['geofences']?.enabled ?? false) &&\n            !(isMobile ?? false)\n          );\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['geofences']?.group)\n            ? 'status'\n            : (features.page?.['geofences']?.group ?? 'status');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['geofences']?.order ?? 0;\n        },\n      },\n      alerts: {\n        name: 'Alerts',\n        icon: PAGE_ICONS['alerts'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['alerts']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['alerts']?.group)\n            ? 'status'\n            : (features.page?.['alerts']?.group ?? 'status');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['alerts']?.order ?? 0;\n        },\n      },\n      videos: {\n        route: 'media',\n        name: 'Media',\n        icon: PAGE_ICONS['videos'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['videos']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['videos']?.group)\n            ? 'status'\n            : (features.page?.['videos']?.group ?? 'status');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['videos']?.order ?? 0;\n        },\n      },\n      /* dashboards: {\n        name: 'Dashboards',\n        icon: PAGE_ICONS['dashboards'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['dashboards']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['dashboards']?.group)\n            ? 'status'\n            : (features.page?.['dashboards']?.group ?? 'status');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['dashboards']?.order ?? 0;\n        },\n      }, */\n      external: {\n        name: 'External Apps',\n        icon: PAGE_ICONS['external'],\n        group: 'status',\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          const externalChildren =\n            this.getExternalApplicationChildren(features);\n          return (\n            (features.page?.['external']?.enabled ?? false) &&\n            Object.keys(externalChildren).length > 0\n          );\n        },\n        getChildren: (features: AppFeatureDefaultsStructure) => {\n          return this.getExternalApplicationChildren(features);\n        },\n      },\n      history: {\n        name: 'History',\n        icon: PAGE_ICONS['replay'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['replay']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['replay']?.group)\n            ? 'history'\n            : (features.page?.['replay']?.group ?? 'history');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['replay']?.order ?? 0;\n        },\n      },\n      /*  mapsearch: {\n        name: 'Map Search',\n        icon: PAGE_ICONS['mapsearch'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['mapsearch']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['mapsearch']?.group)\n            ? 'history'\n            : (features.page?.['mapsearch']?.group ?? 'history');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['mapsearch']?.order ?? 0;\n        },\n      }, */\n      assetperformance: {\n        name: (features: AppFeatureDefaultsStructure): string => {\n          return (\n            features.page?.['assetperformance']?.name ?? 'Asset Performance'\n          );\n        },\n        icon: (features: AppFeatureDefaultsStructure): IconDefinition => {\n          const iconName = features.page?.['assetperformance']?.icon;\n          if (\n            iconName != null &&\n            iconName.trim().length > 0 &&\n            iconName in PAGE_ICONS\n          ) {\n            return PAGE_ICONS[iconName] as IconDefinition;\n          }\n          return PAGE_ICONS['assetperformance'] as IconDefinition;\n        },\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['assetperformance']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['assetperformance']?.group)\n            ? 'history'\n            : (features.page?.['assetperformance']?.group ?? 'history');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['assetperformance']?.order ?? 0;\n        },\n      },\n      /*  reporting: {\n        name: 'Reporting',\n        icon: PAGE_ICONS['reporting'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['reporting']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['reporting']?.group)\n            ? 'history'\n            : (features.page?.['reporting']?.group ?? 'history');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['reporting']?.order ?? 0;\n        },\n      }, */\n      admin: {\n        name: 'Administration',\n        icon: PAGE_ICONS['admin'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          // Hide admin if user has zero permissions\n          if (!this.authDataService.hasAssignedPermissions()) {\n            return false;\n          }\n          return (\n            user?.owner.type !== 'client' ||\n            (features.page?.['admin']?.enabled ?? false)\n          );\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['admin']?.group)\n            ? 'admin'\n            : (features.page?.['admin']?.group ?? 'admin');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['admin']?.order ?? 0;\n        },\n      },\n      devicehealth: {\n        name: 'Device Health',\n        icon: PAGE_ICONS['devicehealth'],\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['devicehealth']?.enabled ?? false;\n        },\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['devicehealth']?.group)\n            ? 'admin'\n            : (features.page?.['devicehealth']?.group ?? 'admin');\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['devicehealth']?.order ?? 0;\n        },\n      },\n      appstore: {\n        name: 'More Apps',\n        icon: PAGE_ICONS['appstore'],\n        route: 'app-store',\n        group: (features: AppFeatureDefaultsStructure): string => {\n          return isEmpty(features.page?.['moreapps']?.group)\n            ? 'admin'\n            : (features.page?.['moreapps']?.group ?? 'admin');\n        },\n        visible: (features: AppFeatureDefaultsStructure): boolean => {\n          return features.page?.['moreapps']?.enabled ?? true;\n        },\n        order: (features: AppFeatureDefaultsStructure): number => {\n          return features.page?.['moreapps']?.order ?? 85;\n        },\n      },\n      system: {\n        name: 'System',\n        icon: PAGE_ICONS['system'],\n        group: 'system',\n        visible: (): boolean => {\n          return Boolean(user?.owner.type === 'system');\n        },\n      },\n      'telemetry-comparison': {\n        name: 'Telemetry Compare',\n        icon: PAGE_ICONS['telemetry'],\n        route: 'development/telemetry-comparison',\n        group: 'development',\n        visible: (): boolean => {\n          return this.apiSchemaService.usesModernSchema(); // Only visible when using test API\n        },\n        order: 1000, // Low priority (appears at bottom)\n      },\n      'analytical-report': {\n        name: 'Reporting',\n        icon: PAGE_ICONS['api'],\n        route: 'analytical-report',\n        group: (_features: AppFeatureDefaultsStructure): string => {\n          return 'history'; // Place under Historical Activity\n        },\n        visible: (): boolean => {\n          return true; // Always visible\n        },\n        order: 500, // Medium priority\n      },\n      // User-related pages\n      user: {\n        name: 'User',\n        children: {\n          profile: {\n            name: 'Profile',\n            route: 'user/profile',\n          },\n          notifications: {\n            name: 'Notifications',\n            route: 'user/notifications',\n          },\n        },\n      },\n      // External pages\n      login: {\n        external: true,\n        name: 'Login',\n      },\n      'client-select': {\n        external: true,\n        name: 'Client Select',\n      },\n      welcome: {\n        external: true,\n        name: 'Welcome',\n      },\n    };\n  }\n  private getExternalApplicationChildren(\n    features: AppFeatureDefaultsStructure,\n  ): Record<string, PageDefinition> {\n    const externalTabs = features.page?.['external']?.tabs ?? '';\n    if (!externalTabs) return {};\n\n    const children: Record<string, PageDefinition> = {};\n\n    for (const tab of externalTabs.split('\\n')) {\n      if (!tab.trim()) continue;\n\n      const [info, url] = tab.split(':');\n      const [name, icon, section] = info.split('|');\n\n      if (!section) {\n        // Items without a section are children of external\n        const tabName = name.trim().toLowerCase().replaceAll(/\\s+/g, '-');\n        const id = `app-${tabName}`;\n\n        const iconIdentifier = icon?.trim();\n        let finalIcon: string | IconDefinition = PAGE_ICONS['external'];\n        if (iconIdentifier) {\n          if (iconIdentifier.includes(' ')) {\n            finalIcon = iconIdentifier;\n          } else if (iconIdentifier in PAGE_ICONS) {\n            finalIcon = PAGE_ICONS[iconIdentifier];\n          }\n        }\n\n        children[tabName] = {\n          id,\n          name: name.trim(),\n          icon: finalIcon,\n          group: '',\n          iframe: true, // Mark as iframe\n          route: `/external/${id}`,\n          externalUrl: url?.trim() ?? '#',\n          external: true,\n        };\n      }\n    }\n\n    return children;\n  }\n\n  // Computed methods for reactive navigation\n  private computeNavigationItems(group?: string): NavigationItem[] {\n    const pages = this.getPages();\n    const features = this.getFeatures();\n    const isMobile = this.isMobile();\n    const items: NavigationItem[] = [];\n\n    // Add external tabs that have sections as main navigation items\n    const externalTabs = features.page?.['external']?.tabs ?? '';\n    if (\n      isDefined(externalTabs) &&\n      isDefined(features.page?.['external']?.enabled) &&\n      (features.page?.['external']?.enabled ?? false)\n    ) {\n      for (const tab of externalTabs.split('\\n')) {\n        if (!isDefined(tab) || !tab.trim()) continue;\n\n        const separatorIndex = tab.indexOf(':');\n        if (separatorIndex === -1) {\n          console.warn(`Invalid external tab format (missing ':'): ${tab}`);\n          continue;\n        }\n\n        const url = tab.substring(separatorIndex + 1).trim();\n        const info = tab.substring(0, separatorIndex).trim();\n        const [name, icon, section, order] = info.split('|');\n\n        const sectionNormalized = section?.trim().toLowerCase();\n        if (isDefined(sectionNormalized)) {\n          if (group != null && sectionNormalized !== group) continue;\n\n          const tabName = name?.toLowerCase()?.replaceAll(' ', '-') ?? 'tab';\n          const id = `app-${tabName}`;\n\n          const iconIdentifier = icon?.trim();\n          let finalIcon: string | IconDefinition = PAGE_ICONS['external'];\n          if (isDefined(iconIdentifier)) {\n            if (isDefined(iconIdentifier) && iconIdentifier.includes(' ')) {\n              finalIcon = iconIdentifier;\n            } else if (iconIdentifier in PAGE_ICONS) {\n              finalIcon = PAGE_ICONS[iconIdentifier];\n            }\n          }\n\n          const parsed = Number(order?.trim());\n          const finalOrder = Number.isFinite(parsed) ? parsed : 999;\n\n          items.push({\n            id,\n            external: true,\n            iframe: true,\n            icon: finalIcon,\n            name: (isDefined(name) ? name.trim() : '') || 'External Tab',\n            group: sectionNormalized,\n            order: finalOrder,\n            route: `/external/${id}`,\n            externalUrl: url?.trim(),\n          });\n        }\n      }\n    }\n\n    // Process regular pages\n    for (const key of Object.keys(pages)) {\n      const page = pages[key];\n\n      if (!page.visible || page.visible(features, isMobile)) {\n        const pageGroup = this.getPageGroup(page, features);\n        if (group == null || pageGroup === group) {\n          const children =\n            page.children ??\n            (page.getChildren ? page.getChildren(features) : {});\n\n          const navItem: NavigationItem = {\n            id: page.route ?? key,\n            external: page.external ?? false,\n            iframe: page.iframe ?? false,\n            icon:\n              typeof page.icon === 'function'\n                ? page.icon(features)\n                : (page.icon ?? PAGE_ICONS[key] ?? PAGE_ICONS['overview']),\n            name:\n              typeof page.name === 'function' ? page.name(features) : page.name,\n            group: pageGroup,\n            order:\n              typeof page.order === 'function'\n                ? page.order(features)\n                : (page.order ?? 999),\n            route: page.route ?? key,\n            children:\n              Object.keys(children).length > 0\n                ? Object.keys(children).map((childKey) => ({\n                    id: children[childKey].id ?? `${key}/${childKey}`,\n                    external: children[childKey].external ?? false,\n                    iframe: children[childKey].iframe ?? false,\n                    icon:\n                      typeof children[childKey].icon === 'function'\n                        ? children[childKey].icon(features)\n                        : (children[childKey].icon ?? PAGE_ICONS['external']),\n                    name:\n                      typeof children[childKey].name === 'function'\n                        ? children[childKey].name(features)\n                        : children[childKey].name,\n                    group:\n                      typeof children[childKey].group === 'function'\n                        ? children[childKey].group(features)\n                        : (children[childKey].group ?? pageGroup),\n                    order:\n                      typeof children[childKey].order === 'function'\n                        ? children[childKey].order(features)\n                        : (children[childKey].order ?? 999),\n                    route: children[childKey].route,\n                    externalUrl: children[childKey].externalUrl,\n                  }))\n                : undefined,\n          };\n\n          if (isDefined(navItem.route) && navItem.route.startsWith('http')) {\n            navItem.externalUrl = navItem.route;\n            navItem.id = `app-${navItem.name.toLowerCase().replaceAll(' ', '-')}`;\n            navItem.route = `/external/${navItem.id}`;\n            navItem.external = true;\n            navItem.iframe = true;\n          }\n\n          items.push(navItem);\n        }\n      }\n    }\n\n    return items.sort((a, b) => {\n      const ao = Number.isFinite(a.order) ? a.order : 999;\n      const bo = Number.isFinite(b.order) ? b.order : 999;\n      return ao - bo;\n    });\n  }\n\n  private computeNavigationGroups(): NavigationGroup[] {\n    const items = this.computeNavigationItems();\n    const groupIds = Array.from(\n      new Set(items.map((item) => item.group).filter(Boolean)),\n    );\n\n    const allGroups: NavigationGroup[] = groupIds.map((groupId) => ({\n      id: groupId,\n      name: this.getGroupDisplayName(groupId),\n      items: items\n        .filter((item) => item.group === groupId)\n        .sort((a, b) => a.order - b.order),\n    }));\n\n    const regularGroups: NavigationGroup[] = [];\n    const externalGroups: NavigationGroup[] = [];\n\n    for (const group of allGroups) {\n      if (group.items.every((item) => item.external)) {\n        externalGroups.push(group);\n      } else {\n        regularGroups.push(group);\n      }\n    }\n\n    // Define explicit group ordering: Recent Activity -> Historical Activity -> Configuration\n    const groupOrder = ['status', 'history', 'admin', 'system', 'development'];\n\n    // Sort regular groups based on the defined order\n    regularGroups.sort((a, b) => {\n      const aIndex = groupOrder.indexOf(a.id);\n      const bIndex = groupOrder.indexOf(b.id);\n      // Groups not in the order array go to the end (999)\n      return (aIndex === -1 ? 999 : aIndex) - (bIndex === -1 ? 999 : bIndex);\n    });\n\n    return [...regularGroups, ...externalGroups];\n  }\n\n  // Public methods that use computed signals\n  getNavigationGroups(): NavigationGroup[] {\n    return this.navigationGroups();\n  }\n\n  private getGroupDisplayName(groupId: string): string {\n    const groupNames: Record<string, string> = {\n      status: 'Recent Activity',\n      history: 'Historical Activity',\n      admin: 'Configuration',\n      system: 'System',\n      development: 'Development',\n    };\n    return groupNames[groupId] || groupId;\n  }\n  getNavigationItems(group?: string): NavigationItem[] {\n    return this.computeNavigationItems(group);\n  }\n  private getPageGroup(\n    page: PageDefinition,\n    features: AppFeatureDefaultsStructure,\n  ): string {\n    if (typeof page.group === 'function') {\n      return page.group(features).toLowerCase();\n    }\n    return (page.group ?? '').toLowerCase();\n  }\n  async navigateToPage(page: string, child?: string): Promise<boolean> {\n    const pages = this.getPages();\n    const validPages = [\n      ...Object.keys(pages),\n      ...Object.values(pages)\n        .filter((p) => Boolean(p.route))\n        .map((p) => p.route as string),\n    ];\n\n    if (!validPages.includes(page)) {\n      console.error(\n        `\"${page}\" is not a valid page identifier. Have you added it to the NavigationService?`,\n      );\n      return false;\n    }\n\n    const childPath = child?.trim() ?? '';\n    const path = childPath ? `${page}/${childPath}` : page;\n    const history = this.pageHistory();\n    const url = history[path] ?? `/${path}`;\n    const errorSuffix = childPath ? `, ${childPath}` : '';\n\n    try {\n      return await this.router.navigateByUrl(url);\n    } catch (err) {\n      console.error(`navigateToPage('${page}${errorSuffix}')[1]`, err);\n      return this.handleNavigationFallback(page, url, errorSuffix);\n    }\n  }\n\n  private async handleNavigationFallback(\n    page: string,\n    url: string,\n    errorSuffix: string,\n  ): Promise<boolean> {\n    try {\n      return await this.router.navigateByUrl(url);\n    } catch (error) {\n      console.error(`navigateToPage('${page}${errorSuffix}')[2]`, error);\n\n      if (url === `/${page}`) {\n        throw error;\n      } else {\n        return this.router.navigateByUrl(`/${page}`);\n      }\n    }\n  }\n\n  getDefaultRoute(): string {\n    const items = this.getNavigationItems();\n    return items.length > 0\n      ? (items[0].route ?? '/user/profile')\n      : '/user/profile';\n  }\n\n  getNavigationItemById(id: string): NavigationItem | undefined {\n    const allItems = this.flattenNavigationItems(this.navigationItems());\n    return allItems.find((item) => item.id === id);\n  }\n\n  /**\n   * Used by feature guard to get the fully merged client features including inherited flags.\n   * Ensures parity with sidebar/feature-section visibility logic.\n   * Accounts for inheritance from parent company groups and respects client-specific overrides.\n   */\n  getClientFeatures(): AppFeatureDefaultsStructure {\n    return this.getFeatures();\n  }\n\n  private flattenNavigationItems(items: NavigationItem[]): NavigationItem[] {\n    return items.flatMap((item) => [\n      item,\n      ...(item.children ? this.flattenNavigationItems(item.children) : []),\n    ]);\n  }\n}\n","const _c0 = [\"*\"];\nfunction Avatar_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r0.cx(\"label\"));\n    i0.ɵɵproperty(\"pBind\", ctx_r0.ptm(\"label\"));\n    i0.ɵɵattribute(\"data-p\", ctx_r0.dataP);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.label);\n  }\n}\nfunction Avatar_ng_template_2_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r0.icon);\n    i0.ɵɵproperty(\"pBind\", ctx_r0.ptm(\"icon\"))(\"ngClass\", ctx_r0.cx(\"icon\"));\n    i0.ɵɵattribute(\"data-p\", ctx_r0.dataP);\n  }\n}\nfunction Avatar_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, Avatar_ng_template_2_span_0_Template, 1, 5, \"span\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    const imageTemplate_r2 = i0.ɵɵreference(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.icon)(\"ngIfElse\", imageTemplate_r2);\n  }\n}\nfunction Avatar_ng_template_4_img_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 7);\n    i0.ɵɵlistener(\"error\", function Avatar_ng_template_4_img_0_Template_img_error_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.imageError($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"pBind\", ctx_r0.ptm(\"image\"))(\"src\", ctx_r0.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵattribute(\"aria-label\", ctx_r0.ariaLabel)(\"data-p\", ctx_r0.dataP);\n  }\n}\nfunction Avatar_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, Avatar_ng_template_4_img_0_Template, 1, 4, \"img\", 6);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.image);\n  }\n}\nexport * from 'primeng/types/avatar';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, InjectionToken, inject, EventEmitter, Output, Input, ViewEncapsulation, ChangeDetectionStrategy, Component, NgModule } from '@angular/core';\nimport { SharedModule } from 'primeng/api';\nimport { BaseComponent, PARENT_INSTANCE } from 'primeng/basecomponent';\nimport * as i1 from 'primeng/bind';\nimport { Bind } from 'primeng/bind';\nimport { style } from '@primeuix/styles/avatar';\nimport { BaseStyle } from 'primeng/base';\nconst classes = {\n  root: ({\n    instance\n  }) => ['p-avatar p-component', {\n    'p-avatar-image': instance.image != null,\n    'p-avatar-circle': instance.shape === 'circle',\n    'p-avatar-lg': instance.size === 'large',\n    'p-avatar-xl': instance.size === 'xlarge'\n  }],\n  label: 'p-avatar-label',\n  icon: 'p-avatar-icon'\n};\nclass AvatarStyle extends BaseStyle {\n  name = 'avatar';\n  style = style;\n  classes = classes;\n  static ɵfac = /* @__PURE__ */(() => {\n    let ɵAvatarStyle_BaseFactory;\n    return function AvatarStyle_Factory(__ngFactoryType__) {\n      return (ɵAvatarStyle_BaseFactory || (ɵAvatarStyle_BaseFactory = i0.ɵɵgetInheritedFactory(AvatarStyle)))(__ngFactoryType__ || AvatarStyle);\n    };\n  })();\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: AvatarStyle,\n    factory: AvatarStyle.ɵfac\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AvatarStyle, [{\n    type: Injectable\n  }], null, null);\n})();\n/**\n *\n * Avatar represents people using icons, labels and images.\n *\n * - [Live Demo](https://primeng.org/avatar)\n *\n * @module avatarstyle\n *\n */\nvar AvatarClasses;\n(function (AvatarClasses) {\n  /**\n   * Class name of the root element\n   */\n  AvatarClasses[\"root\"] = \"p-avatar\";\n  /**\n   * Class name of the label element\n   */\n  AvatarClasses[\"label\"] = \"p-avatar-label\";\n  /**\n   * Class name of the icon element\n   */\n  AvatarClasses[\"icon\"] = \"p-avatar-icon\";\n  /**\n   * Container element in image mode\n   */\n  AvatarClasses[\"image\"] = \"p-avatar-image\";\n  /**\n   * Container element with a circle shape\n   */\n  AvatarClasses[\"circle\"] = \"p-avatar-circle\";\n  /**\n   *  Container element with a large size\n   */\n  AvatarClasses[\"large\"] = \"p-avatar-lg\";\n  /**\n   *  Container element with an xlarge size\n   */\n  AvatarClasses[\"xlarge\"] = \"p-avatar-xl\";\n})(AvatarClasses || (AvatarClasses = {}));\nconst AVATAR_INSTANCE = new InjectionToken('AVATAR_INSTANCE');\n/**\n * Avatar represents people using icons, labels and images.\n * @group Components\n */\nclass Avatar extends BaseComponent {\n  $pcAvatar = inject(AVATAR_INSTANCE, {\n    optional: true,\n    skipSelf: true\n  }) ?? undefined;\n  bindDirectiveInstance = inject(Bind, {\n    self: true\n  });\n  onAfterViewChecked() {\n    this.bindDirectiveInstance.setAttrs(this.ptms(['host', 'root']));\n  }\n  /**\n   * Defines the text to display.\n   * @group Props\n   */\n  label;\n  /**\n   * Defines the icon to display.\n   * @group Props\n   */\n  icon;\n  /**\n   * Defines the image to display.\n   * @group Props\n   */\n  image;\n  /**\n   * Size of the element.\n   * @group Props\n   */\n  size = 'normal';\n  /**\n   * Shape of the element.\n   * @group Props\n   */\n  shape = 'square';\n  /**\n   * Class of the element.\n   * @deprecated since v20.0.0, use `class` instead.\n   * @group Props\n   */\n  styleClass;\n  /**\n   * Establishes a string value that labels the component.\n   * @group Props\n   */\n  ariaLabel;\n  /**\n   * Establishes relationships between the component and label(s) where its value should be one or more element IDs.\n   * @group Props\n   */\n  ariaLabelledBy;\n  /**\n   * This event is triggered if an error occurs while loading an image file.\n   * @param {Event} event - Browser event.\n   * @group Emits\n   */\n  onImageError = new EventEmitter();\n  _componentStyle = inject(AvatarStyle);\n  imageError(event) {\n    this.onImageError.emit(event);\n  }\n  get dataP() {\n    return this.cn({\n      [this.shape]: this.shape,\n      [this.size]: this.size\n    });\n  }\n  static ɵfac = /* @__PURE__ */(() => {\n    let ɵAvatar_BaseFactory;\n    return function Avatar_Factory(__ngFactoryType__) {\n      return (ɵAvatar_BaseFactory || (ɵAvatar_BaseFactory = i0.ɵɵgetInheritedFactory(Avatar)))(__ngFactoryType__ || Avatar);\n    };\n  })();\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: Avatar,\n    selectors: [[\"p-avatar\"]],\n    hostVars: 5,\n    hostBindings: function Avatar_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵattribute(\"aria-label\", ctx.ariaLabel)(\"aria-labelledby\", ctx.ariaLabelledBy)(\"data-p\", ctx.dataP);\n        i0.ɵɵclassMap(ctx.cn(ctx.cx(\"root\"), ctx.styleClass));\n      }\n    },\n    inputs: {\n      label: \"label\",\n      icon: \"icon\",\n      image: \"image\",\n      size: \"size\",\n      shape: \"shape\",\n      styleClass: \"styleClass\",\n      ariaLabel: \"ariaLabel\",\n      ariaLabelledBy: \"ariaLabelledBy\"\n    },\n    outputs: {\n      onImageError: \"onImageError\"\n    },\n    features: [i0.ɵɵProvidersFeature([AvatarStyle, {\n      provide: AVATAR_INSTANCE,\n      useExisting: Avatar\n    }, {\n      provide: PARENT_INSTANCE,\n      useExisting: Avatar\n    }]), i0.ɵɵHostDirectivesFeature([i1.Bind]), i0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c0,\n    decls: 6,\n    vars: 2,\n    consts: [[\"iconTemplate\", \"\"], [\"imageTemplate\", \"\"], [3, \"pBind\", \"class\", 4, \"ngIf\", \"ngIfElse\"], [3, \"pBind\"], [3, \"pBind\", \"class\", \"ngClass\", 4, \"ngIf\", \"ngIfElse\"], [3, \"pBind\", \"ngClass\"], [3, \"pBind\", \"src\", \"error\", 4, \"ngIf\"], [3, \"error\", \"pBind\", \"src\"]],\n    template: function Avatar_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵprojection(0);\n        i0.ɵɵtemplate(1, Avatar_span_1_Template, 2, 5, \"span\", 2)(2, Avatar_ng_template_2_Template, 1, 2, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor)(4, Avatar_ng_template_4_Template, 1, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const iconTemplate_r4 = i0.ɵɵreference(3);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.label)(\"ngIfElse\", iconTemplate_r4);\n      }\n    },\n    dependencies: [CommonModule, i2.NgClass, i2.NgIf, SharedModule, Bind],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(Avatar, [{\n    type: Component,\n    args: [{\n      selector: 'p-avatar',\n      standalone: true,\n      imports: [CommonModule, SharedModule, Bind],\n      template: `\n        <ng-content></ng-content>\n        <span [pBind]=\"ptm('label')\" [class]=\"cx('label')\" *ngIf=\"label; else iconTemplate\" [attr.data-p]=\"dataP\">{{ label }}</span>\n        <ng-template #iconTemplate><span [pBind]=\"ptm('icon')\" [class]=\"icon\" [ngClass]=\"cx('icon')\" *ngIf=\"icon; else imageTemplate\" [attr.data-p]=\"dataP\"></span></ng-template>\n        <ng-template #imageTemplate><img [pBind]=\"ptm('image')\" [src]=\"image\" *ngIf=\"image\" (error)=\"imageError($event)\" [attr.aria-label]=\"ariaLabel\" [attr.data-p]=\"dataP\" /></ng-template>\n    `,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None,\n      host: {\n        '[class]': \"cn(cx('root'), styleClass)\",\n        '[attr.aria-label]': 'ariaLabel',\n        '[attr.aria-labelledby]': 'ariaLabelledBy',\n        '[attr.data-p]': 'dataP'\n      },\n      providers: [AvatarStyle, {\n        provide: AVATAR_INSTANCE,\n        useExisting: Avatar\n      }, {\n        provide: PARENT_INSTANCE,\n        useExisting: Avatar\n      }],\n      hostDirectives: [Bind]\n    }]\n  }], null, {\n    label: [{\n      type: Input\n    }],\n    icon: [{\n      type: Input\n    }],\n    image: [{\n      type: Input\n    }],\n    size: [{\n      type: Input\n    }],\n    shape: [{\n      type: Input\n    }],\n    styleClass: [{\n      type: Input\n    }],\n    ariaLabel: [{\n      type: Input\n    }],\n    ariaLabelledBy: [{\n      type: Input\n    }],\n    onImageError: [{\n      type: Output\n    }]\n  });\n})();\nclass AvatarModule {\n  static ɵfac = function AvatarModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || AvatarModule)();\n  };\n  static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: AvatarModule,\n    imports: [Avatar, SharedModule],\n    exports: [Avatar, SharedModule]\n  });\n  static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [Avatar, SharedModule, SharedModule]\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AvatarModule, [{\n    type: NgModule,\n    args: [{\n      imports: [Avatar, SharedModule],\n      exports: [Avatar, SharedModule]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Avatar, AvatarClasses, AvatarModule, AvatarStyle };\n","import {\n  ChangeDetectorRef,\n  Component,\n  computed,\n  inject,\n  signal,\n  output,\n  DestroyRef,\n} from '@angular/core';\nimport { takeUntilDestroyed, toObservable } from '@angular/core/rxjs-interop';\nimport { DialogModule } from 'primeng/dialog';\nimport { TableLazyLoadEvent } from 'primeng/table';\n\nimport { combineLatest, of } from 'rxjs';\nimport {\n  catchError,\n  distinctUntilChanged,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\n\nimport {\n  ClientListItem,\n  ClientResponse,\n  ClientsService,\n} from '../../../../api';\nimport { AuthDataService } from '../../../../core/services/auth-data.service';\nimport { UtilityService } from '../../../../core/services/utility.service';\nimport { ClientDataService } from '../../services/client-data.service';\nimport { DEFAULT_PAGE_SIZE } from '../../../../core/models';\nimport { ClientSelectionFormComponent } from '../../../../shared/components/client-selection-form/client-selection-form.component';\n\nimport { BroadcastMessageService } from '../../../../core/services/message.service';\nimport { ActionType } from '../../../../core/models/message.model';\nimport { RecentClientsService } from '../../../../shared/services/recent-clients.service';\nimport { isString, isDefined, hasProperty } from '../../../../shared/utils';\n\n@Component({\n  selector: 'app-client-switcher',\n  imports: [DialogModule, ClientSelectionFormComponent],\n  templateUrl: './client-switcher.component.html',\n  styleUrls: ['./client-switcher.component.scss'],\n})\nexport class ClientSwitcherComponent {\n  private readonly messageService = inject(BroadcastMessageService);\n  private readonly destroyRef = inject(DestroyRef);\n  private readonly recentClientsService = inject(RecentClientsService);\n  private readonly authDataService = inject(AuthDataService);\n  private readonly utilityService = inject(UtilityService);\n  private readonly clientDataService = inject(ClientDataService);\n  private readonly clientsService = inject(ClientsService);\n  private readonly cdr = inject(ChangeDetectorRef);\n\n  readonly onClosed = output<void>();\n\n  display = signal<boolean>(true);\n  clients = signal<ClientListItem[]>([]);\n  totalRecords = signal<number>(0);\n  loading = signal<boolean>(false);\n\n  // Track the unfiltered total count to determine search mode\n  private readonly unfilteredTotalCount = signal<number>(0);\n  searchTerm = signal<string>('');\n  paginationOffset = signal<number>(0);\n\n  // Determine if we should use server-side search based on unfiltered total count\n  useServerSearch = computed(\n    () => this.unfilteredTotalCount() >= DEFAULT_PAGE_SIZE,\n  );\n\n  // Expose recent clients from the service for the template\n  recentClients = this.recentClientsService.recentClients;\n\n  constructor() {\n    this.setupClientsStream();\n  }\n\n  private setupClientsStream(): void {\n    const search$ = toObservable(this.searchTerm).pipe(distinctUntilChanged());\n    const offset$ = toObservable(this.paginationOffset).pipe(\n      distinctUntilChanged(),\n    );\n\n    combineLatest([search$, offset$])\n      .pipe(\n        takeUntilDestroyed(this.destroyRef),\n        tap(() => this.loading.set(true)),\n        switchMap(([searchTerm, offset]) => {\n          const userProfile = this.authDataService.getUserProfile();\n          if (!isDefined(userProfile?.owner?.id)) {\n            return of(null);\n          }\n\n          const ownerId =\n            userProfile.owner.type === 'client'\n              ? this.clientDataService.getSelectedClient()?.id\n              : userProfile.owner.id;\n\n          if (!isDefined(ownerId)) {\n            return of(null);\n          }\n\n          const filters: Record<\n            string,\n            string | { value: string; operator: string }\n          > = {\n            state: {\n              value: 'active',\n              operator: '=',\n            },\n          };\n\n          if (isString(searchTerm) && searchTerm.trim().length > 0) {\n            filters['name'] = {\n              value: `*${searchTerm}*`,\n              operator: '=',\n            };\n          }\n\n          const rqlFilter = this.utilityService.constructRqlFilter(filters);\n\n          return this.clientsService\n            .listClients(\n              ownerId,\n              offset,\n              DEFAULT_PAGE_SIZE,\n              'name:asc',\n              rqlFilter,\n            )\n            .pipe(\n              catchError((error) => {\n                console.error('Failed to load clients:', error);\n                return of(null);\n              }),\n            );\n        }),\n      )\n      .subscribe((data) => {\n        if (\n          isDefined(data) &&\n          hasProperty(data, 'items') &&\n          hasProperty(data, 'count')\n        ) {\n          const items = data.items ?? [];\n          this.clients.set(items);\n          this.totalRecords.set(data.count);\n\n          // Only update unfiltered count when not searching and on first page\n          if (\n            this.searchTerm().trim() === '' &&\n            this.paginationOffset() === 0\n          ) {\n            this.unfilteredTotalCount.set(data.count ?? items.length);\n          }\n        }\n        this.loading.set(false);\n        this.cdr.detectChanges();\n      });\n  }\n\n  onClientSearch(searchTerm: string): void {\n    this.paginationOffset.set(0);\n    this.searchTerm.set(searchTerm);\n  }\n\n  onLazyLoadClients(event: TableLazyLoadEvent): void {\n    this.paginationOffset.set(event.first ?? 0);\n  }\n\n  selectClient(clientId: string): void {\n    if (!clientId) return;\n\n    // Broadcast profile_changed event to flutter\n    this.messageService.sendAction(ActionType.profile_changed, {\n      clientId: clientId,\n    });\n\n    this.clientsService\n      .getClient(clientId)\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe({\n        next: (response: ClientResponse) => {\n          this.clientDataService.setSelectedClient(response);\n          // Add selected client to recently used list\n          if (isDefined(response.name)) {\n            this.recentClientsService.addRecentClient(\n              response.id,\n              response.name,\n            );\n          }\n          // Close dialog after successfully setting the client\n          // This must happen after setSelectedClient to prevent component destruction\n          // from cancelling the subscription via takeUntilDestroyed\n          this.closeDialog();\n        },\n        error: (error) => {\n          console.error('Failed to select client:', error);\n          // Still close the dialog on error to provide user feedback\n          this.closeDialog();\n        },\n      });\n  }\n\n  closeDialog(): void {\n    this.display.set(false);\n    this.onClosed.emit();\n  }\n\n  openDialog(): void {\n    this.display.set(true);\n    this.paginationOffset.set(0);\n    this.searchTerm.set('');\n  }\n}\n","<p-dialog\n  header=\"Select Client\"\n  [visible]=\"display()\"\n  (visibleChange)=\"display.set($event)\"\n  (onHide)=\"closeDialog()\"\n  [modal]=\"true\"\n  [maximizable]=\"false\"\n  styleClass=\"w-[90vw] max-w-[800px]\"\n  [contentStyleClass]=\"'max-h-[70vh] overflow-visible p-6'\"\n>\n  <app-client-selection-form\n    [clients]=\"clients()\"\n    [loading]=\"loading()\"\n    [useServerSearch]=\"useServerSearch()\"\n    [totalRecords]=\"totalRecords()\"\n    [enablePagination]=\"useServerSearch()\"\n    [enableLazyLoad]=\"useServerSearch()\"\n    [recentClients]=\"recentClients()\"\n    (clientSelected)=\"selectClient($event)\"\n    (searchQuery)=\"onClientSearch($event)\"\n    (lazyLoad)=\"onLazyLoadClients($event)\"\n  ></app-client-selection-form>\n</p-dialog>\n","import { Injectable, signal } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LayoutService {\n  readonly sidebarVisible = signal<boolean>(true);\n  readonly fontFamily = signal<string>('Ubuntu, sans-serif');\n\n  toggleSidebar(visible?: boolean): void {\n    visible = visible ?? !this.sidebarVisible();\n    this.sidebarVisible.set(visible);\n  }\n\n  setFontFamily(fontFamily: string): void {\n    this.fontFamily.set(fontFamily);\n    this.updateFontFamily(fontFamily);\n  }\n\n  private updateFontFamily(fontFamily: string): void {\n    const fontUrl = `https://fonts.googleapis.com/css2?family=${fontFamily.replace(' ', '+')}:wght@400;500;700&display=swap`;\n\n    // Preload the font\n    const preloadLink = document.createElement('link');\n    preloadLink.href = fontUrl;\n    preloadLink.rel = 'preload';\n    preloadLink.as = 'style';\n    document.head.appendChild(preloadLink);\n\n    // Check if the font is already loaded\n    if (!document.querySelector(`link[href=\"${fontUrl}\"]`)) {\n      // Append the actual stylesheet link after preloading\n      const stylesheetLink = document.createElement('link');\n      stylesheetLink.href = fontUrl;\n      stylesheetLink.rel = 'stylesheet';\n      document.head.appendChild(stylesheetLink);\n    }\n\n    // Apply the font family to the document\n    document.documentElement.style.setProperty('--font-family', fontFamily);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { isNullOrUndefined } from '../../../../shared/utils';\n\ninterface SmallCapsSegment {\n  letter: string;\n  isCapital: boolean;\n  isSpace: boolean;\n}\n\n/**\n * Transforms text into small caps format with each word's first letter enlarged.\n * @example\n * {{ 'Customer Configuration' | smallCaps }}\n * Returns array with segments marking capital letters, rest, and spaces\n */\n@Pipe({\n  name: 'smallCaps',\n})\nexport class SmallCapsPipe implements PipeTransform {\n  transform(value: string | null | undefined): SmallCapsSegment[] {\n    if (isNullOrUndefined(value) || value === '') {\n      return [];\n    }\n\n    const text = String(value).toUpperCase();\n    const segments: SmallCapsSegment[] = [];\n\n    const parts = text.split(/(\\s+|[^A-Z0-9\\s]+)/);\n\n    for (const part of parts) {\n      if (!part) continue;\n\n      if (part.trim() === '') {\n        // It's a space or multiple spaces\n        for (const char of part) {\n          segments.push({ letter: char, isCapital: false, isSpace: true });\n        }\n        continue;\n      }\n\n      // Check if it's alphanumeric\n      if (/^[A-Z0-9]+$/.test(part)) {\n        // Enlarge the first character\n        segments.push({ letter: part[0], isCapital: true, isSpace: false });\n        if (part.length > 1) {\n          segments.push({\n            letter: part.slice(1),\n            isCapital: false,\n            isSpace: false,\n          });\n        }\n      } else {\n        // It's non-alphanumeric (punctuations etc.)\n        segments.push({ letter: part, isCapital: false, isSpace: false });\n      }\n    }\n\n    return segments;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { Component, input } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { MenuItem } from 'primeng/api';\nimport { TooltipModule } from 'primeng/tooltip';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { SmallCapsPipe } from './small-caps.pipe';\n\n@Component({\n  selector: 'app-menu-item',\n  imports: [\n    RouterModule,\n    CommonModule,\n    TooltipModule,\n    FontAwesomeModule,\n    SmallCapsPipe,\n  ],\n  templateUrl: './menu-item.component.html',\n  styleUrl: './menu-item.component.scss',\n})\nexport class MenuItemComponent {\n  readonly item = input<MenuItem>();\n  readonly isCollapsed = input<boolean>(false);\n\n  onItemClick(event: MouseEvent): void {\n    const menuItem = this.item();\n    const command = menuItem?.command;\n    if (!command) {\n      return;\n    }\n\n    const hasRoute = Boolean(menuItem?.['routerLink'] ?? menuItem?.['route']);\n    if (!hasRoute) {\n      event.preventDefault();\n    }\n\n    command({ originalEvent: event, item: menuItem });\n  }\n}\n","<a\n  [routerLink]=\"item()?.['routerLink'] ?? item()?.['route']\"\n  routerLinkActive=\"p-menuitem-link-active\"\n  pRipple\n  class=\"menu-item-link flex items-center p-menu-item-link\"\n  [class.justify-center]=\"isCollapsed()\"\n  (click)=\"onItemClick($event)\"\n>\n  @if (item()?.['data']?.['svgIcon']) {\n    <svg class=\"custom-icon-svg\" [pTooltip]=\"item()?.['label']\">\n      <use\n        [attr.href]=\"\n          'assets/sprites/sprite.svg#' + item()?.['data']?.['svgIcon']\n        \"\n      ></use>\n    </svg>\n  } @else if (item()?.['data']?.['faIcon']) {\n    <!-- FontAwesome icon -->\n    <fa-icon\n      [icon]=\"item()?.['data']?.['faIcon']\"\n      class=\"!text-2xl flex items-center justify-center\"\n      [pTooltip]=\"item()?.['label']\"\n    ></fa-icon>\n  } @else if (item()?.['icon']) {\n    <!-- PrimeNG icon or string-based icon -->\n    <span\n      [ngClass]=\"[\n        item()?.['icon'],\n        '!text-2xl flex items-center justify-center',\n      ]\"\n      [pTooltip]=\"item()?.['label']\"\n    ></span>\n  }\n\n  @if (!isCollapsed()) {\n    <span\n      class=\"small-caps-text ml-2 truncate flex-1 min-w-0\"\n      [pTooltip]=\"item()?.['label']\"\n      tooltipPosition=\"right\"\n      [showDelay]=\"1000\"\n    >\n      @for (segment of item()?.['label'] | smallCaps; track $index) {\n        @if (segment.isSpace) {\n          <span class=\"ml-0.5\"></span>\n        } @else if (segment.isCapital) {\n          <span class=\"text-xl leading-none\">{{ segment.letter }}</span>\n        } @else {\n          <span class=\"text-sm leading-none\">{{ segment.letter }}</span>\n        }\n      }\n    </span>\n  }\n</a>\n","import { CommonModule } from '@angular/common';\nimport { Component, input, output } from '@angular/core';\nimport { TooltipModule } from 'primeng/tooltip';\n\n@Component({\n  selector: 'app-toggle-button',\n  imports: [CommonModule, TooltipModule],\n  templateUrl: './toggle-button.component.html',\n  styleUrl: './toggle-button.component.scss',\n})\nexport class ToggleButtonComponent {\n  readonly isCollapsed = input<boolean>(false);\n  readonly toggleChange = output<void>();\n\n  onToggle(): void {\n    this.toggleChange.emit();\n  }\n}\n","<span\n  (click)=\"onToggle()\"\n  (keydown.enter)=\"onToggle()\"\n  [pTooltip]=\"isCollapsed() ? 'Expand Sidebar' : 'Collapse Sidebar'\"\n  class=\"block p-2 w-full text-nav-client-font-color cursor-pointer\"\n  [ngClass]=\"{\n    'text-right': !isCollapsed(),\n    'text-center': isCollapsed(),\n  }\"\n>\n  <i\n    class=\"pi\"\n    [ngClass]=\"{\n      'pi-chevron-left': !isCollapsed(),\n      'pi-chevron-right': isCollapsed(),\n    }\"\n  ></i>\n</span>\n","import { Component, input, inject } from '@angular/core';\nimport { UserProfileResponse } from '../../../../api';\nimport { ApiUrlService } from '../../../../core/services/api-url.service';\nimport { environment } from '../../../../../environments/environment';\n\n@Component({\n  selector: 'app-user-profile',\n  imports: [],\n  templateUrl: './user-profile.component.html',\n  styleUrl: './user-profile.component.scss',\n})\nexport class UserProfileComponent {\n  private readonly apiUrlService = inject(ApiUrlService);\n  readonly showApiUrl = environment.showApiDropdown;\n\n  readonly isCollapsed = input<boolean>(false);\n  readonly userProfile = input<UserProfileResponse | null>();\n  readonly clientLogo = input<string | null | undefined>('');\n  readonly clientName = input<string | null | undefined>('');\n\n  currentApiUrl() {\n    return this.apiUrlService.getCurrentApiUrl()?.replace(/^https?:\\/\\//, '');\n  }\n\n  getApiUrlClass() {\n    const currentUrl = this.apiUrlService.getCurrentApiUrl();\n    if (currentUrl === 'https://api.us1.kt1.io/fleet/v2') {\n      return 'text-md text-red-300 font-bold';\n    }\n    return 'text-md text-green-400 font-bold';\n  }\n}\n","@if (isCollapsed()) {\n  <div class=\"flex items-center justify-center gap-1 px-2 py-2 user-profile\">\n    @if (userProfile()) {\n      <div\n        class=\"w-10 h-10 rounded-full bg-gray-500 text-white flex items-center justify-center\"\n      >\n        {{ userProfile()?.name?.charAt(0) }}\n      </div>\n    }\n  </div>\n} @else {\n  <span class=\"flex items-center justify-center gap-1 sidebar-brand\">\n    <img [src]=\"clientLogo()\" alt=\"\" />\n  </span>\n  <div class=\"user-profile text-center text-ellipsis overflow-hidden p-2\">\n    {{ clientName() }}\n    @if (showApiUrl) {\n      <div [class]=\"getApiUrlClass()\">{{ currentApiUrl() }}</div>\n    }\n  </div>\n}\n","import { Component, inject, output, signal } from '@angular/core';\nimport { ButtonModule } from 'primeng/button';\nimport { DialogModule } from 'primeng/dialog';\nimport { ClientSelectorComponent } from '../../../../shared/components/client-selector/client-selector.component';\nimport { AuthTokenManagerService } from '../../../../core/services/auth-token-manager.service';\nimport { UserSessionService } from '../../../../core/services/user-session.service';\nimport { AuthService } from '../../../../api';\nimport { firstValueFrom } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { ClientDataService } from '../../../clients/services/client-data.service';\nimport { AuthDataService } from '../../../../core/services/auth-data.service';\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\nimport { isDefined } from '../../../../shared/utils';\nimport { SessionCleanupService } from '../../../../core/services/session-cleanup.service';\n\n@Component({\n  selector: 'app-account-switcher',\n  imports: [\n    DialogModule,\n    ClientSelectorComponent,\n    ButtonModule,\n    ProgressSpinnerModule,\n  ],\n  templateUrl: './account-switcher.component.html',\n  styleUrl: './account-switcher.component.scss',\n})\nexport class AccountSwitcherComponent {\n  readonly closeModal = output<void>();\n  private readonly userSessionService = inject(UserSessionService);\n  private readonly apiAuthService = inject(AuthService);\n  private readonly authTokenManager = inject(AuthTokenManagerService);\n  private readonly router = inject(Router);\n  private readonly clientDataService = inject(ClientDataService);\n  private readonly authDataService = inject(AuthDataService);\n  private readonly sessionCleanup = inject(SessionCleanupService);\n\n  accounts = this.userSessionService.userSessions();\n  loading = signal(false);\n  display = signal<boolean>(true);\n\n  closeDialog(): void {\n    this.display.set(false);\n    this.closeModal.emit();\n  }\n\n  async onAccountSelected(accountId: string): Promise<void> {\n    this.loading.set(true);\n\n    try {\n      const response = await firstValueFrom(\n        this.apiAuthService.selectUser(accountId),\n      );\n\n      // Store new tokens\n      this.authTokenManager.storeTokens({\n        accessToken: response.accessToken,\n        refreshToken: response.refreshToken,\n        idToken: response.idToken ?? '',\n        users: this.accounts,\n      });\n\n      // Update current session (this stores in localStorage)\n      this.userSessionService.setCurrentUserSession(accountId);\n\n      // CRITICAL: Update last authenticated user BEFORE reload\n      // This prevents user mismatch detection from triggering on reload\n      const selectedSession = this.accounts.find((s) => s.id === accountId);\n      if (isDefined(selectedSession?.id)) {\n        this.sessionCleanup.setLastAuthenticatedUser(selectedSession.id);\n      }\n\n      // Clear the old profile so startupInitializer fetches the new one\n      this.authDataService.clearUserProfile();\n\n      // Optional: Clear client data to avoid stale data flash\n      this.clientDataService.clearSelectedClient();\n\n      this.loading.set(false);\n      this.closeDialog();\n\n      // Navigate to safe route then reload\n      await this.router.navigate(['/position']);\n\n      // Small delay to ensure navigation completes\n      setTimeout(() => {\n        globalThis.location.reload();\n      }, 100);\n    } catch (error) {\n      console.error('Error selecting user:', error);\n      this.loading.set(false);\n    }\n  }\n}\n","<p-dialog\n  header=\"Select Account\"\n  [visible]=\"display()\"\n  (visibleChange)=\"display.set($event)\"\n  (onHide)=\"closeDialog()\"\n  [modal]=\"true\"\n  styleClass=\"w-[90vw] md:w-[50vw] sm:w-[75vw]\"\n  [closable]=\"!loading()\"\n  [closeOnEscape]=\"!loading()\"\n>\n  <ng-template #header>\n    <span class=\"font-bold whitespace-nowrap\">Select Account</span>\n  </ng-template>\n\n  <div class=\"my-3\">\n    @if (loading()) {\n      <div class=\"flex flex-col items-center justify-center gap-3\">\n        <p-progress-spinner ariaLabel=\"loading\" />\n        <p>Switching account...</p>\n      </div>\n    } @else {\n      <app-client-selector\n        [clientAccounts]=\"accounts\"\n        [maxHeightClass]=\"'max-h-[18rem]'\"\n        (accountSelected)=\"onAccountSelected($event.id)\"\n      ></app-client-selector>\n    }\n  </div>\n\n  <ng-template #footer>\n    <p-button\n      label=\"Cancel\"\n      [text]=\"true\"\n      severity=\"secondary\"\n      (onClick)=\"closeDialog()\"\n    />\n  </ng-template>\n</p-dialog>\n","import { HttpContextToken } from '@angular/common/http';\n\n/**\n * HttpContextToken to indicate that an error should not trigger a global UI toast.\n * Use this for background verification tasks where failures are expected or handled silently.\n */\nexport const SILENT_ERROR = new HttpContextToken<boolean>(() => false);\n","import { inject, Injectable } from '@angular/core';\nimport { HttpContext } from '@angular/common/http';\nimport { firstValueFrom } from 'rxjs';\n\nimport { AccountsService, EntitiesService, SimCardsService } from '../../api';\nimport { AuthDataService } from './auth-data.service';\nimport { SILENT_ERROR } from '../models/http-context.constants';\nimport { isNullOrUndefined } from '../../shared/utils';\nimport { OwnerType } from '../models/permission.model';\n\nexport interface ApiVerificationResult {\n  endpoint: string;\n  permission: string;\n  frontendExpected: boolean;\n  backendAccess: 'Allowed' | 'Forbidden' | 'Error';\n  errorDetails?: string;\n}\n\ninterface TestCase {\n  permission: string;\n  endpoint: string;\n  action: (ownerId: string) => Promise<unknown>;\n  validLevels: OwnerType[];\n  uiPermissionMap: Partial<Record<OwnerType, string>>;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ApiVerificationService {\n  private readonly accountsService = inject(AccountsService);\n  private readonly entitiesService = inject(EntitiesService);\n  private readonly simCardsService = inject(SimCardsService);\n  private readonly authData = inject(AuthDataService);\n\n  /**\n   * Runs a suite of backend enforcement checks scoped to a hierarchical level.\n   * @param targetOwnerId Optional ID of the owner to test against.\n   * @param targetOwnerType The hierarchical level being tested (client, vendor, distributor).\n   */\n  async verifyBackEndEnforcement(\n    targetOwnerId?: string,\n    targetOwnerType?: OwnerType,\n  ): Promise<ApiVerificationResult[]> {\n    const ownerId = targetOwnerId ?? this.authData.getUserOwnerId();\n    const ownerType = (targetOwnerType ??\n      this.authData.getUserOwnerType()) as OwnerType;\n\n    if (isNullOrUndefined(ownerId) || isNullOrUndefined(ownerType)) {\n      return [];\n    }\n\n    const testCases: TestCase[] = [\n      {\n        permission: 'asset:list',\n        endpoint: 'GET /entities/assets',\n        validLevels: ['client'],\n        uiPermissionMap: { client: 'client:list-assets' },\n        action: (id) =>\n          firstValueFrom(\n            this.entitiesService.listAssets(\n              id,\n              undefined,\n              1,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n      {\n        permission: 'device:list',\n        endpoint: 'GET /entities/devices',\n        validLevels: ['client'],\n        uiPermissionMap: { client: 'client:list-devices' },\n        action: (id) =>\n          firstValueFrom(\n            this.entitiesService.listDevices(\n              id,\n              undefined,\n              1,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n      {\n        permission: 'zone:list',\n        endpoint: 'GET /entities/zones',\n        validLevels: ['client'],\n        uiPermissionMap: { client: 'client:list-zones' },\n        action: (id) =>\n          firstValueFrom(\n            this.entitiesService.listZones(\n              id,\n              undefined,\n              1,\n              undefined,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n      {\n        permission: 'alert:list',\n        endpoint: 'GET /entities/alerts',\n        validLevels: ['client'],\n        uiPermissionMap: { client: 'client:list-alerts' },\n        action: (id) =>\n          firstValueFrom(\n            this.entitiesService.listAlerts(\n              id,\n              undefined,\n              1,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n      {\n        permission: 'simcard:list',\n        endpoint: 'GET /simcards',\n        validLevels: ['client'],\n        uiPermissionMap: { client: 'client:list-simcards' },\n        action: (id) =>\n          firstValueFrom(\n            this.simCardsService.listSimCards(\n              id,\n              0,\n              1,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n      {\n        permission: 'user:list',\n        endpoint: 'GET /accounts/users',\n        validLevels: ['client', 'vendor', 'distributor'],\n        uiPermissionMap: {\n          client: 'client:list-users',\n          vendor: 'vendor:list-users',\n          distributor: 'distributor:list-users',\n        },\n        action: (id) =>\n          firstValueFrom(\n            this.accountsService.listUsers(\n              id,\n              undefined,\n              1,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n      {\n        permission: 'userrole:list',\n        endpoint: 'GET /accounts/userroles',\n        validLevels: ['client', 'vendor', 'distributor'],\n        uiPermissionMap: {\n          client: 'client:list-userroles',\n          vendor: 'vendor:list-userroles',\n          distributor: 'distributor:list-userroles',\n        },\n        action: (id) =>\n          firstValueFrom(\n            this.accountsService.listUserRoles(\n              id,\n              undefined,\n              1,\n              undefined,\n              undefined,\n              'response',\n              false,\n              { context: new HttpContext().set(SILENT_ERROR, true) },\n            ),\n          ),\n      },\n    ];\n\n    const results: ApiVerificationResult[] = [];\n\n    // Filter test cases valid for the current level\n    const relevantTests = testCases.filter((t) =>\n      t.validLevels.includes(ownerType),\n    );\n\n    for (const test of relevantTests) {\n      // Determine which permission the UI uses at this level for the \"Expected\" check\n      const uiPermission = test.uiPermissionMap[ownerType] ?? test.permission;\n\n      try {\n        await test.action(ownerId);\n        results.push({\n          endpoint: test.endpoint,\n          permission: uiPermission,\n          frontendExpected: this.authData.hasRealPermission(uiPermission),\n          backendAccess: 'Allowed',\n        });\n      } catch (error) {\n        let backendAccess: 'Forbidden' | 'Error' = 'Error';\n        const errorDetails =\n          error instanceof Error ? error.message : String(error);\n\n        if (\n          error instanceof Object &&\n          'status' in error &&\n          (error as { status: number }).status === 403\n        ) {\n          backendAccess = 'Forbidden';\n        }\n\n        results.push({\n          endpoint: test.endpoint,\n          permission: uiPermission,\n          frontendExpected: this.authData.hasRealPermission(uiPermission),\n          backendAccess,\n          errorDetails,\n        });\n      }\n    }\n\n    return results;\n  }\n}\n","import { Component, inject, computed, signal, effect } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DynamicDialogConfig, DynamicDialogRef } from 'primeng/dynamicdialog';\nimport { SelectModule } from 'primeng/select';\nimport { ButtonModule } from 'primeng/button';\nimport { TabsModule } from 'primeng/tabs';\nimport { TableModule } from 'primeng/table';\nimport { TagModule } from 'primeng/tag';\nimport { CardModule } from 'primeng/card';\nimport { FormsModule } from '@angular/forms';\n\nimport { QAToolsService } from '../../../core/services/qa-tools.service';\nimport { ClientPermissionsService } from '../../../features/administration/services/client-permissions.service';\nimport { PermissionService } from '../../../core/services/permission.service';\nimport { CLIENT_ADMIN_FEATURES } from '../../../features/administration/components/clients/client-administration.config';\nimport { VENDOR_ADMIN_FEATURES } from '../../../features/administration/components/vendors/vendor-administration.config';\nimport { DISTRIBUTOR_ADMIN_FEATURES } from '../../../features/administration/components/distributors/distributor-administration.config';\nimport {\n  FeatureConfig,\n  OwnerType,\n  PermissionExpression,\n} from '../../../core/models/permission.model';\nimport { AuthDataService } from '../../../core/services/auth-data.service';\nimport { isDefined } from '../../utils';\nimport {\n  ApiVerificationResult,\n  ApiVerificationService,\n} from '../../../core/services/api-verification.service';\n\ninterface FeatureAccessRow {\n  featureId: string;\n  label: string;\n  hasAccess: boolean;\n  permissions?: string;\n}\n\n/** Valid hierarchical levels for API verification */\ntype VerificationLevel = 'distributor' | 'vendor' | 'client';\n\n@Component({\n  selector: 'app-qa-permission-tester',\n  imports: [\n    CommonModule,\n    SelectModule,\n    ButtonModule,\n    TabsModule,\n    TableModule,\n    TagModule,\n    CardModule,\n    FormsModule,\n  ],\n  templateUrl: './qa-permission-tester.component.html',\n  styleUrls: ['./qa-permission-tester.component.scss'],\n})\nexport class QaPermissionTesterComponent {\n  readonly qaTools = inject(QAToolsService);\n  readonly clientPermissionsService = inject(ClientPermissionsService);\n  readonly permissionService = inject(PermissionService);\n  readonly authDataService = inject(AuthDataService);\n  readonly dialogRef = inject(DynamicDialogRef);\n  readonly config = inject(DynamicDialogConfig);\n  readonly apiVerificationService = inject(ApiVerificationService);\n\n  // Selected profile for dropdown\n  selectedProfileId = signal<string | null>(null);\n\n  // Tab index for the UI\n  activeTabIndex = signal<number>(0);\n\n  // Verification state\n  verificationResults = signal<ApiVerificationResult[]>([]);\n  isVerifying = signal<boolean>(false);\n  isSaving = signal<boolean>(false);\n\n  // Actual owner type (ignoring QA overrides)\n  readonly realOwnerType = computed(\n    () => this.authDataService.getRealUserOwnerType() as OwnerType | null,\n  );\n\n  // Current owner type (respecting QA overrides)\n  readonly ownerType = computed(\n    () => this.authDataService.getUserOwnerType() as OwnerType | null,\n  );\n\n  // Available roles for dropdown\n  readonly roles = this.qaTools.availableRoles;\n  readonly isLoading = this.qaTools.isLoadingRoles;\n\n  // Computed access matrices for each admin module\n  // These explicitly depend on userPermissions() to update when roles/toggles change\n  readonly clientFeatureAccess = computed(() => {\n    this.authDataService.userPermissions(); // Track permission changes\n    return this.computeFeatureAccess(CLIENT_ADMIN_FEATURES, 'client');\n  });\n\n  readonly vendorFeatureAccess = computed(() => {\n    this.authDataService.userPermissions(); // Track permission changes\n    return this.computeFeatureAccess(VENDOR_ADMIN_FEATURES, 'vendor');\n  });\n\n  readonly distributorFeatureAccess = computed(() => {\n    this.authDataService.userPermissions(); // Track permission changes\n    return this.computeFeatureAccess(DISTRIBUTOR_ADMIN_FEATURES, 'distributor');\n  });\n\n  // Permission toggles (scoped to real owner tier)\n  readonly togglePermissions = computed(() =>\n    this.collectPermissionsByOwner(this.realOwnerType()),\n  );\n\n  // Statistics\n  readonly clientStats = computed(() =>\n    this.computeStats(this.clientFeatureAccess()),\n  );\n  readonly vendorStats = computed(() =>\n    this.computeStats(this.vendorFeatureAccess()),\n  );\n  readonly distributorStats = computed(() =>\n    this.computeStats(this.distributorFeatureAccess()),\n  );\n\n  // Hierarchical Testing Signals (Exposed from QAToolsService)\n  readonly selectedDistributorId = this.qaTools.selectedDistributorId;\n  readonly selectedVendorId = this.qaTools.selectedVendorId;\n  readonly selectedClientId = this.qaTools.selectedClientId;\n\n  readonly availableDistributors = this.qaTools.availableDistributors;\n  readonly availableVendors = this.qaTools.availableVendors;\n  readonly availableClients = this.qaTools.availableClients;\n\n  constructor() {\n    // Initialize selected persona ID if exists\n    const activePersona = this.qaTools.activePersona();\n    if (activePersona) {\n      this.selectedProfileId.set(activePersona.id);\n    }\n\n    // Load available roles on component initialization\n    effect(async () => {\n      try {\n        await this.qaTools.loadAvailableRoles();\n        // Also load initial distributors if system user\n        if (this.realOwnerType() === 'system') {\n          await this.qaTools.loadDistributors();\n        } else if (this.realOwnerType() === 'distributor') {\n          const ownerId = this.authDataService.getRealUserOwnerId();\n          if (ownerId != null && ownerId !== '')\n            await this.qaTools.loadVendors(ownerId);\n        } else if (this.realOwnerType() === 'vendor') {\n          const ownerId = this.authDataService.getRealUserOwnerId();\n          if (ownerId != null && ownerId !== '')\n            await this.qaTools.loadClients(ownerId);\n        }\n      } catch (err) {\n        console.error('QA Tools: Error loading roles:', err);\n      }\n    });\n  }\n\n  /**\n   * Determine whether the current owner can view a given context\n   */\n  canViewContext(context: OwnerType): boolean {\n    const currentOwner = this.realOwnerType();\n    const rank: Record<OwnerType, number> = {\n      client: 0,\n      vendor: 1,\n      distributor: 2,\n      system: 3,\n    };\n\n    if (\n      currentOwner === null ||\n      !(context in rank) ||\n      !(currentOwner in rank)\n    ) {\n      return false;\n    }\n\n    return rank[context] <= rank[currentOwner];\n  }\n\n  /**\n   * Toggle a permission override\n   */\n  togglePermission(permission: string, enabled: boolean): void {\n    this.qaTools.setPermissionOverride(permission, enabled);\n  }\n\n  /**\n   * Apply the selected role\n   */\n  async applyProfile(): Promise<void> {\n    const roleId = this.selectedProfileId();\n    if (isDefined(roleId)) {\n      await this.qaTools.applyRole(roleId);\n    }\n  }\n\n  /**\n   * Reset to real permissions\n   */\n  resetPermissions(): void {\n    this.qaTools.resetQAState();\n    this.selectedProfileId.set(null);\n  }\n\n  /**\n   * Persists current overrides back to the active role\n   */\n  async saveToRole(): Promise<void> {\n    this.isSaving.set(true);\n    try {\n      await this.qaTools.saveCurrentOverridesToRole();\n    } finally {\n      this.isSaving.set(false);\n    }\n  }\n\n  /** Signal for tracking the last level verified */\n  readonly lastVerifiedLevel = signal<string | null>(null);\n\n  /**\n   * Runs the backend enforcement test suite for a specific level or the default owner.\n   */\n  async runApiVerification(level?: VerificationLevel): Promise<void> {\n    this.isVerifying.set(true);\n    try {\n      let targetOwnerId: string | undefined;\n\n      if (level === 'distributor')\n        targetOwnerId = this.selectedDistributorId() ?? undefined;\n      else if (level === 'vendor')\n        targetOwnerId = this.selectedVendorId() ?? undefined;\n      else if (level === 'client')\n        targetOwnerId = this.selectedClientId() ?? undefined;\n\n      const results =\n        await this.apiVerificationService.verifyBackEndEnforcement(\n          targetOwnerId,\n          level as OwnerType,\n        );\n      this.verificationResults.set(results);\n      this.lastVerifiedLevel.set(level ?? this.realOwnerType());\n    } finally {\n      this.isVerifying.set(false);\n    }\n  }\n\n  /**\n   * Close the dialog\n   */\n  closeDialog(): void {\n    this.dialogRef.close();\n  }\n\n  /**\n   * Get severity for tag based on access\n   */\n  getAccessSeverity(hasAccess: boolean): 'success' | 'danger' {\n    return hasAccess ? 'success' : 'danger';\n  }\n\n  /**\n   * Get color class for profile badge\n   */\n  getProfileColorClass(color: string): string {\n    const colorMap: Record<string, string> = {\n      green: 'bg-green-500',\n      blue: 'bg-blue-500',\n      orange: 'bg-orange-500',\n      red: 'bg-red-500',\n      purple: 'bg-purple-500',\n      gray: 'bg-gray-500',\n    };\n    return colorMap[color] || 'bg-gray-500';\n  }\n\n  /**\n   * Compute feature access for a given admin features config\n   */\n  private computeFeatureAccess(\n    featuresConfig: Record<string, FeatureConfig>,\n    context: 'client' | 'vendor' | 'distributor',\n  ): FeatureAccessRow[] {\n    return Object.entries(featuresConfig).map(([featureId, config]) => {\n      const hasAccess = this.checkFeatureAccess(config, context);\n      return {\n        featureId,\n        label: config.label,\n        hasAccess,\n        permissions: this.formatPermissions(config),\n      };\n    });\n  }\n\n  /**\n   * Check if current profile has access to a feature\n   *\n   * Handles special cases:\n   * - If persona has no permissions (empty array), nothing is accessible\n   * - system:all grants access to all features\n   * - Features with no permission requirements are always accessible\n   * - Evaluates permission expressions directly against current permissions\n   */\n  private checkFeatureAccess(\n    config: FeatureConfig,\n    _context: 'client' | 'vendor' | 'distributor',\n  ): boolean {\n    if (!('permissions' in config)) {\n      return true; // No permissions required\n    }\n\n    const permissions = config.permissions;\n    if (permissions === null || permissions === undefined) {\n      return true;\n    }\n\n    // Get current permissions from QA override\n    const currentPermissions = this.authDataService.userPermissions();\n\n    // If no permissions assigned and feature requires permissions, deny access\n    if (currentPermissions.length === 0) {\n      return false;\n    }\n\n    // system:all grants access to everything\n    if (currentPermissions.includes('system:all')) {\n      return true;\n    }\n\n    // Directly evaluate permission expression against current permissions\n    return this.evaluatePermissionExpression(permissions, currentPermissions);\n  }\n\n  /**\n   * Evaluate a permission expression against the current permission set\n   */\n  private evaluatePermissionExpression(\n    expression: PermissionExpression,\n    permissions: string[],\n  ): boolean {\n    const permissionSet = new Set(permissions);\n\n    // String permission\n    if (typeof expression === 'string') {\n      return permissionSet.has(expression);\n    }\n\n    // Array of strings (AND logic - all required)\n    if (Array.isArray(expression)) {\n      return expression.every((perm) => permissionSet.has(perm));\n    }\n\n    // Query object (complex logic: and, or, not)\n    if (typeof expression === 'object' && expression !== null) {\n      const query = expression as Record<string, unknown>;\n\n      // AND logic - all conditions must be true\n      if ('and' in query && Array.isArray(query['and'])) {\n        return (query['and'] as PermissionExpression[]).every((cond) =>\n          this.evaluatePermissionExpression(cond, permissions),\n        );\n      }\n\n      // OR logic - at least one condition must be true\n      if ('or' in query && Array.isArray(query['or'])) {\n        return (query['or'] as PermissionExpression[]).some((cond) =>\n          this.evaluatePermissionExpression(cond, permissions),\n        );\n      }\n\n      // NOT logic - condition must be false\n      if ('not' in query && query['not'] !== undefined) {\n        return !this.evaluatePermissionExpression(\n          query['not'] as PermissionExpression,\n          permissions,\n        );\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Format permissions for display\n   */\n  private formatPermissions(config: FeatureConfig): string {\n    if (!('permissions' in config)) {\n      return 'No permissions required';\n    }\n\n    const perms = config.permissions;\n    if (perms === null || perms === undefined) {\n      return 'No permissions required';\n    }\n\n    if (typeof perms === 'string') {\n      return perms;\n    } else if (Array.isArray(perms)) {\n      return perms.join(', ');\n    } else {\n      return JSON.stringify(perms);\n    }\n  }\n\n  /**\n   * Compute statistics for feature access\n   */\n  private computeStats(features: FeatureAccessRow[]): {\n    total: number;\n    accessible: number;\n    restricted: number;\n  } {\n    const total = features.length;\n    const accessible = features.filter((f) => f.hasAccess).length;\n    const restricted = total - accessible;\n    return { total, accessible, restricted };\n  }\n\n  private collectPermissionsByOwner(ownerType: OwnerType | null): string[] {\n    if (!ownerType) {\n      return [];\n    }\n\n    const permissions = new Set<string>();\n    const contexts: {\n      config: Record<string, FeatureConfig>;\n      type: OwnerType;\n    }[] = [\n      { config: CLIENT_ADMIN_FEATURES, type: 'client' },\n      { config: VENDOR_ADMIN_FEATURES, type: 'vendor' },\n      { config: DISTRIBUTOR_ADMIN_FEATURES, type: 'distributor' },\n    ];\n\n    for (const context of contexts) {\n      if (!this.canViewContext(context.type)) {\n        continue;\n      }\n\n      const extracted = this.extractPermissionsFromConfig(context.config);\n      for (const permission of extracted) {\n        permissions.add(permission);\n      }\n    }\n\n    return [...permissions].sort((a, b) => a.localeCompare(b));\n  }\n\n  private extractPermissionsFromConfig(\n    config: Record<string, FeatureConfig>,\n  ): string[] {\n    const permissions: string[] = [];\n    for (const feature of Object.values(config)) {\n      const permissionsValue =\n        'permissions' in feature ? feature.permissions : undefined;\n      if (permissionsValue !== null && permissionsValue !== undefined) {\n        permissions.push(...this.flattenPermissions(permissionsValue));\n      }\n    }\n    return permissions;\n  }\n\n  private flattenPermissions(expression: PermissionExpression): string[] {\n    if (typeof expression === 'string') {\n      return [expression];\n    }\n\n    if (Array.isArray(expression)) {\n      return expression.flatMap((value) => this.flattenPermissions(value));\n    }\n\n    const permissions: string[] = [];\n    if (isDefined(expression.and)) {\n      permissions.push(\n        ...expression.and.flatMap((value: PermissionExpression) =>\n          this.flattenPermissions(value),\n        ),\n      );\n    }\n    if (isDefined(expression.or)) {\n      permissions.push(\n        ...expression.or.flatMap((value: PermissionExpression) =>\n          this.flattenPermissions(value),\n        ),\n      );\n    }\n    if (isDefined(expression.not)) {\n      permissions.push(...this.flattenPermissions(expression.not));\n    }\n\n    return permissions;\n  }\n}\n","<div class=\"qa-permission-tester flex flex-col gap-4 p-4\">\n  <!-- Header -->\n  <div class=\"flex items-center justify-between\">\n    <div>\n      <h2 class=\"text-2xl font-bold text-primary\">QA Permission Tester</h2>\n      <p class=\"text-sm text-gray-600 mt-1\">\n        Simulate different permission profiles to test route and tab\n        accessibility\n      </p>\n    </div>\n    <button\n      pButton\n      icon=\"pi pi-times\"\n      class=\"p-button-text p-button-rounded\"\n      (click)=\"closeDialog()\"\n      label=\"Close\"\n      aria-label=\"Close dialog\"\n    >\n      <span class=\"sr-only\">Close</span>\n    </button>\n  </div>\n\n  <!-- Active Profile Banner -->\n  @if (qaTools.testMode()) {\n    <div\n      class=\"p-4 rounded-lg border-l-4 border-orange-500 bg-orange-100 dark:bg-orange-900/40 border border-orange-200 dark:border-orange-800\"\n    >\n      <div class=\"flex items-center gap-3\">\n        <i\n          class=\"pi pi-exclamation-triangle text-orange-700 dark:text-orange-400 text-xl\"\n        ></i>\n        <div class=\"flex-1\">\n          <p\n            class=\"font-bold text-orange-950 dark:text-orange-100 uppercase text-xs tracking-wider mb-0.5\"\n          >\n            Test Mode Active\n          </p>\n          <p class=\"text-sm text-orange-900 dark:text-orange-300\">\n            Currently simulating:\n            <span class=\"font-bold underline decoration-orange-400\">{{\n              qaTools.activeProfileName()\n            }}</span>\n          </p>\n        </div>\n        <div class=\"flex gap-2\">\n          <p-button\n            label=\"Save to Role\"\n            icon=\"pi pi-save\"\n            severity=\"success\"\n            (onClick)=\"saveToRole()\"\n            [disabled]=\"isSaving()\"\n            [loading]=\"isSaving()\"\n            size=\"small\"\n          >\n            <span class=\"sr-only\">Save Current Overrides to Role</span>\n          </p-button>\n          <p-button\n            label=\"Reset\"\n            icon=\"pi pi-refresh\"\n            severity=\"primary\"\n            (onClick)=\"resetPermissions()\"\n            size=\"small\"\n          >\n            <span class=\"sr-only\">Reset to Real Permissions</span>\n          </p-button>\n        </div>\n      </div>\n    </div>\n  }\n\n  <!-- Profile Selector -->\n  <p-card>\n    <div class=\"flex flex-col gap-4\">\n      <div>\n        <h3 class=\"font-semibold mb-2\">Select Test Profile</h3>\n        <p class=\"text-sm text-gray-600 mb-3\">\n          Choose a persona to simulate different permission levels\n        </p>\n      </div>\n\n      <div class=\"flex gap-3 items-end\">\n        <div class=\"flex-1\">\n          <label for=\"profile-selector\" class=\"block text-sm font-medium mb-2\">\n            Permission Profile\n          </label>\n          <p-select\n            id=\"profile-selector\"\n            class=\"w-full\"\n            [options]=\"roles()\"\n            [ngModel]=\"selectedProfileId()\"\n            (ngModelChange)=\"selectedProfileId.set($event)\"\n            optionLabel=\"name\"\n            optionValue=\"id\"\n            placeholder=\"Select a role...\"\n            appendTo=\"body\"\n          >\n            <ng-template let-profile pTemplate=\"item\">\n              <div class=\"flex items-center gap-2\">\n                <span\n                  class=\"w-3 h-3 rounded-full {{\n                    getProfileColorClass(profile.color)\n                  }}\"\n                ></span>\n                <div>\n                  <div class=\"font-medium\">{{ profile.name }}</div>\n                  <div class=\"text-xs text-gray-500\">\n                    {{ profile.description }}\n                  </div>\n                </div>\n              </div>\n            </ng-template>\n          </p-select>\n        </div>\n\n        <p-button\n          label=\"Apply Profile\"\n          icon=\"pi pi-check\"\n          severity=\"success\"\n          (onClick)=\"applyProfile()\"\n          [disabled]=\"!selectedProfileId()\"\n        >\n          <span class=\"sr-only\">Apply Profile</span>\n        </p-button>\n      </div>\n    </div>\n  </p-card>\n\n  <!-- Permission Toggles -->\n  <p-card>\n    <div class=\"flex flex-col gap-3\">\n      <div>\n        <h3 class=\"font-semibold mb-1\">Permission Toggles (Scoped)</h3>\n        <p class=\"text-sm text-gray-600\">\n          Toggle permissions within your allowed owner context. Higher-tier\n          permissions are hidden.\n        </p>\n      </div>\n\n      <div class=\"qa-permission-toggle-list\">\n        @for (permission of togglePermissions(); track permission) {\n          <label class=\"flex items-center gap-2 py-1\">\n            <input\n              type=\"checkbox\"\n              [checked]=\"permissionService.canAccess(permission)\"\n              (change)=\"\n                togglePermission(permission, $any($event.target).checked)\n              \"\n            />\n            <span class=\"text-sm\">{{ permission }}</span>\n          </label>\n        }\n      </div>\n    </div>\n  </p-card>\n\n  <!-- Access Matrix Tabs -->\n  <p-tabs>\n    <!-- Client Features Tab -->\n    @if (canViewContext('client')) {\n      <p-tabpanel header=\"Client Features\">\n        <div\n          class=\"mb-2 p-4 rounded-lg border border-blue-200 dark:border-blue-800\"\n        >\n          <div class=\"flex items-center justify-between\">\n            <div>\n              <p class=\"font-bold\">Client Administration Features</p>\n              <p class=\"text-sm\">\n                Features available when managing a client context\n              </p>\n            </div>\n            <div class=\"flex gap-4 text-xs font-semibold\">\n              <span\n                class=\"px-2 py-1 bg-green-200 dark:bg-green-900/40 text-green-900 dark:text-green-200 rounded\"\n              >\n                <i class=\"pi pi-check-circle mr-1\"></i>\n                {{ clientStats().accessible }} Accessible\n              </span>\n              <span\n                class=\"px-2 py-1 bg-red-200 dark:bg-red-900/40 text-red-900 dark:text-red-200 rounded\"\n              >\n                <i class=\"pi pi-times-circle mr-1\"></i>\n                {{ clientStats().restricted }} Restricted\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <p-table\n          [value]=\"clientFeatureAccess()\"\n          [tableStyle]=\"{ 'min-width': '50rem' }\"\n          class=\"p-datatable-sm mb-4\"\n        >\n          <ng-template pTemplate=\"header\">\n            <tr>\n              <th scope=\"col\" class=\"col-25\">Feature ID</th>\n              <th scope=\"col\" class=\"col-25\">Label</th>\n              <th scope=\"col\" class=\"col-15\">Access</th>\n              <th scope=\"col\" class=\"col-35\">Required Permissions</th>\n            </tr>\n          </ng-template>\n          <ng-template pTemplate=\"body\" let-feature>\n            <tr>\n              <td>\n                <code class=\"text-xs\">{{ feature.featureId }}</code>\n              </td>\n              <td>{{ feature.label }}</td>\n              <td>\n                <p-tag\n                  [value]=\"feature.hasAccess ? 'Accessible' : 'Restricted'\"\n                  [severity]=\"getAccessSeverity(feature.hasAccess)\"\n                  [icon]=\"feature.hasAccess ? 'pi pi-check' : 'pi pi-times'\"\n                ></p-tag>\n              </td>\n              <td>\n                <span class=\"text-xs text-gray-600\">{{\n                  feature.permissions\n                }}</span>\n              </td>\n            </tr>\n          </ng-template>\n        </p-table>\n      </p-tabpanel>\n    }\n\n    <!-- Vendor Features Tab -->\n    @if (canViewContext('vendor')) {\n      <p-tabpanel header=\"Vendor Features\">\n        <div\n          class=\"mb-2 p-4 rounded-lg border border-purple-200 dark:border-purple-800\"\n        >\n          <div class=\"flex items-center justify-between\">\n            <div>\n              <p class=\"font-bold\">Vendor Administration Features</p>\n              <p class=\"text-sm\">\n                Features available when managing a vendor context\n              </p>\n            </div>\n            <div class=\"flex gap-4 text-xs font-semibold\">\n              <span\n                class=\"px-2 py-1 bg-green-200 dark:bg-green-900/40 text-green-900 dark:text-green-200 rounded\"\n              >\n                <i class=\"pi pi-check-circle mr-1\"></i>\n                {{ vendorStats().accessible }} Accessible\n              </span>\n              <span\n                class=\"px-2 py-1 bg-red-200 dark:bg-red-900/40 text-red-900 dark:text-red-200 rounded\"\n              >\n                <i class=\"pi pi-times-circle mr-1\"></i>\n                {{ vendorStats().restricted }} Restricted\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <p-table\n          [value]=\"vendorFeatureAccess()\"\n          [tableStyle]=\"{ 'min-width': '50rem' }\"\n          class=\"p-datatable-sm mb-4\"\n        >\n          <ng-template pTemplate=\"header\">\n            <tr>\n              <th scope=\"col\" class=\"col-25\">Feature ID</th>\n              <th scope=\"col\" class=\"col-25\">Label</th>\n              <th scope=\"col\" class=\"col-15\">Access</th>\n              <th scope=\"col\" class=\"col-35\">Required Permissions</th>\n            </tr>\n          </ng-template>\n          <ng-template pTemplate=\"body\" let-feature>\n            <tr>\n              <td>\n                <code class=\"text-xs\">{{ feature.featureId }}</code>\n              </td>\n              <td>{{ feature.label }}</td>\n              <td>\n                <p-tag\n                  [value]=\"feature.hasAccess ? 'Accessible' : 'Restricted'\"\n                  [severity]=\"getAccessSeverity(feature.hasAccess)\"\n                  [icon]=\"feature.hasAccess ? 'pi pi-check' : 'pi pi-times'\"\n                ></p-tag>\n              </td>\n              <td>\n                <span class=\"text-xs text-gray-600\">{{\n                  feature.permissions\n                }}</span>\n              </td>\n            </tr>\n          </ng-template>\n        </p-table>\n      </p-tabpanel>\n    }\n\n    <!-- Distributor Features Tab -->\n    @if (canViewContext('distributor')) {\n      <p-tabpanel header=\"Distributor Features\">\n        <div\n          class=\"mb-2 p-4 rounded-lg border border-indigo-200 dark:border-indigo-800\"\n        >\n          <div class=\"flex items-center justify-between\">\n            <div>\n              <p class=\"font-bold\">Distributor Administration Features</p>\n              <p class=\"text-sm\">\n                Features available when managing a distributor context\n              </p>\n            </div>\n            <div class=\"flex gap-4 text-xs font-semibold\">\n              <span\n                class=\"px-2 py-1 bg-green-200 dark:bg-green-900/40 text-green-900 dark:text-green-200 rounded\"\n              >\n                <i class=\"pi pi-check-circle mr-1\"></i>\n                {{ distributorStats().accessible }} Accessible\n              </span>\n              <span\n                class=\"px-2 py-1 bg-red-200 dark:bg-red-900/40 text-red-900 dark:text-red-200 rounded\"\n              >\n                <i class=\"pi pi-times-circle mr-1\"></i>\n                {{ distributorStats().restricted }} Restricted\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <p-table\n          [value]=\"distributorFeatureAccess()\"\n          [tableStyle]=\"{ 'min-width': '50rem' }\"\n          class=\"p-datatable-sm mb-4\"\n        >\n          <ng-template pTemplate=\"header\">\n            <tr>\n              <th scope=\"col\" class=\"col-25\">Feature ID</th>\n              <th scope=\"col\" class=\"col-25\">Label</th>\n              <th scope=\"col\" class=\"col-15\">Access</th>\n              <th scope=\"col\" class=\"col-35\">Required Permissions</th>\n            </tr>\n          </ng-template>\n          <ng-template pTemplate=\"body\" let-feature>\n            <tr>\n              <td>\n                <code class=\"text-xs\">{{ feature.featureId }}</code>\n              </td>\n              <td>{{ feature.label }}</td>\n              <td>\n                <p-tag\n                  [value]=\"feature.hasAccess ? 'Accessible' : 'Restricted'\"\n                  [severity]=\"getAccessSeverity(feature.hasAccess)\"\n                  [icon]=\"feature.hasAccess ? 'pi pi-check' : 'pi pi-times'\"\n                ></p-tag>\n              </td>\n              <td>\n                <span class=\"text-xs text-gray-600\">{{\n                  feature.permissions\n                }}</span>\n              </td>\n            </tr>\n          </ng-template>\n        </p-table>\n      </p-tabpanel>\n    }\n    <!-- API Verification Tab -->\n    <p-tabpanel header=\"API Verification\">\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"flex flex-col gap-2\">\n          <h3 class=\"font-semibold text-lg\">Backend Enforcement Check</h3>\n          <p class=\"text-sm text-gray-600\">\n            Validates that frontend permission checks match backend API\n            enforcement using your <strong>actual user role</strong> (ignores QA\n            simulation).\n          </p>\n        </div>\n\n        <div\n          class=\"p-4 rounded-lg bg-gray-50 dark:bg-gray-800/40 border border-gray-200 dark:border-gray-700 flex flex-col gap-4\"\n        >\n          <p class=\"text-xs font-bold uppercase tracking-wider text-gray-500\">\n            Hierarchical Target Selection\n          </p>\n\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <!-- Distributor Selection (System only) -->\n            @if (realOwnerType() === 'system') {\n              <div class=\"flex flex-col gap-1\">\n                <label for=\"distributor-selector\" class=\"text-xs font-medium\"\n                  >Test as Distributor</label\n                >\n                <p-select\n                  inputId=\"distributor-selector\"\n                  [options]=\"availableDistributors()\"\n                  [ngModel]=\"selectedDistributorId()\"\n                  (ngModelChange)=\"qaTools.selectDistributor($event)\"\n                  optionLabel=\"name\"\n                  optionValue=\"id\"\n                  placeholder=\"Select distributor...\"\n                  [showClear]=\"true\"\n                  class=\"w-full\"\n                  appendTo=\"body\"\n                ></p-select>\n                <p-button\n                  label=\"Verify Distributor\"\n                  size=\"small\"\n                  [disabled]=\"!selectedDistributorId() || isVerifying()\"\n                  (onClick)=\"runApiVerification('distributor')\"\n                  class=\"mt-1\"\n                ></p-button>\n              </div>\n            }\n\n            <!-- Vendor Selection (System & Distributor) -->\n            @if (\n              realOwnerType() === 'system' || realOwnerType() === 'distributor'\n            ) {\n              <div class=\"flex flex-col gap-1\">\n                <label for=\"vendor-selector\" class=\"text-xs font-medium\"\n                  >Test as Vendor</label\n                >\n                <p-select\n                  inputId=\"vendor-selector\"\n                  [options]=\"availableVendors()\"\n                  [ngModel]=\"selectedVendorId()\"\n                  (ngModelChange)=\"qaTools.selectVendor($event)\"\n                  optionLabel=\"name\"\n                  optionValue=\"id\"\n                  placeholder=\"Select vendor...\"\n                  [showClear]=\"true\"\n                  class=\"w-full\"\n                  appendTo=\"body\"\n                  [disabled]=\"\n                    realOwnerType() === 'system' && !selectedDistributorId()\n                  \"\n                ></p-select>\n                <p-button\n                  label=\"Verify Vendor\"\n                  size=\"small\"\n                  [disabled]=\"!selectedVendorId() || isVerifying()\"\n                  (onClick)=\"runApiVerification('vendor')\"\n                  class=\"mt-1\"\n                ></p-button>\n              </div>\n            }\n\n            <!-- Client Selection (System, Distributor, Vendor) -->\n            <div class=\"flex flex-col gap-1\">\n              <label for=\"client-selector\" class=\"text-xs font-medium\"\n                >Test as Client</label\n              >\n              <p-select\n                inputId=\"client-selector\"\n                [options]=\"availableClients()\"\n                [ngModel]=\"selectedClientId()\"\n                (ngModelChange)=\"qaTools.selectClient($event)\"\n                optionLabel=\"name\"\n                optionValue=\"id\"\n                placeholder=\"Select client...\"\n                [showClear]=\"true\"\n                class=\"w-full\"\n                appendTo=\"body\"\n                [disabled]=\"\n                  (realOwnerType() === 'system' ||\n                    realOwnerType() === 'distributor') &&\n                  !selectedVendorId()\n                \"\n              ></p-select>\n              <p-button\n                label=\"Verify Client\"\n                size=\"small\"\n                [disabled]=\"!selectedClientId() || isVerifying()\"\n                (onClick)=\"runApiVerification('client')\"\n                class=\"mt-1\"\n              ></p-button>\n            </div>\n          </div>\n\n          <div\n            class=\"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between items-center\"\n          >\n            <span class=\"text-xs text-gray-500 italic font-medium\">\n              Default: Tests against your current level ({{\n                realOwnerType() | titlecase\n              }})\n            </span>\n            <p-button\n              label=\"Verify Default Owner\"\n              icon=\"pi pi-play\"\n              (onClick)=\"runApiVerification()\"\n              [loading]=\"isVerifying()\"\n              [disabled]=\"isVerifying()\"\n              severity=\"secondary\"\n              size=\"small\"\n            ></p-button>\n          </div>\n        </div>\n\n        @if (verificationResults().length > 0) {\n          <div class=\"flex items-center gap-2 px-1\">\n            <i class=\"pi pi-verified text-blue-500\"></i>\n            <h4 class=\"font-semibold\">\n              Results for {{ lastVerifiedLevel() | titlecase }} Level\n            </h4>\n          </div>\n\n          <p-table [value]=\"verificationResults()\" class=\"p-datatable-sm\">\n            <ng-template pTemplate=\"header\">\n              <tr>\n                <th scope=\"col\">Endpoint</th>\n                <th scope=\"col\">Permission</th>\n                <th scope=\"col\">Frontend (Expected)</th>\n                <th scope=\"col\">Backend (Actual)</th>\n              </tr>\n            </ng-template>\n            <ng-template pTemplate=\"body\" let-result>\n              <tr>\n                <td>\n                  <code class=\"text-xs\">{{ result.endpoint }}</code>\n                </td>\n                <td>\n                  <code class=\"text-xs\">{{ result.permission }}</code>\n                </td>\n                <td>\n                  <p-tag\n                    [value]=\"result.frontendExpected ? 'Allowed' : 'Forbidden'\"\n                    [severity]=\"result.frontendExpected ? 'success' : 'danger'\"\n                    [icon]=\"\n                      result.frontendExpected ? 'pi pi-check' : 'pi pi-times'\n                    \"\n                  ></p-tag>\n                </td>\n                <td>\n                  <div class=\"flex flex-col gap-1\">\n                    <p-tag\n                      [value]=\"result.backendAccess\"\n                      [severity]=\"\n                        result.backendAccess === 'Allowed'\n                          ? 'success'\n                          : result.backendAccess === 'Forbidden'\n                            ? 'danger'\n                            : 'warn'\n                      \"\n                      [icon]=\"\n                        result.backendAccess === 'Allowed'\n                          ? 'pi pi-check'\n                          : result.backendAccess === 'Forbidden'\n                            ? 'pi pi-lock'\n                            : 'pi pi-exclamation-triangle'\n                      \"\n                    ></p-tag>\n                    @if (\n                      result.errorDetails && result.backendAccess === 'Error'\n                    ) {\n                      <span class=\"text-[10px] text-red-500 break-all\">{{\n                        result.errorDetails\n                      }}</span>\n                    }\n                  </div>\n                </td>\n              </tr>\n            </ng-template>\n          </p-table>\n\n          <div\n            class=\"p-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg text-sm text-blue-800 dark:text-blue-200\"\n          >\n            <div class=\"flex gap-2\">\n              <i class=\"pi pi-info-circle mt-0.5\"></i>\n              <div>\n                <p class=\"font-bold mb-1\">How to interpret results:</p>\n                <ul class=\"list-disc ml-4 space-y-1\">\n                  <li>\n                    <strong>Frontend (Expected)</strong>: What your actual user\n                    role permissions allow (ignores QA simulation).\n                  </li>\n                  <li>\n                    <strong>Backend (Actual)</strong>: What the backend API\n                    actually enforces.\n                  </li>\n                  <li>\n                    <strong>Mismatch</strong>: If these differ, there's a bug in\n                    either frontend permission checks or backend enforcement.\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        } @else {\n          <div\n            class=\"flex flex-col items-center justify-center py-12 text-gray-400 border-2 border-dashed border-gray-200 dark:border-gray-800 rounded-xl\"\n          >\n            <i class=\"pi pi-shield text-4xl mb-3\"></i>\n            <p class=\"italic font-medium\">No verification results yet</p>\n            <p class=\"text-sm\">\n              Click \"Run Verification\" to start testing backend enforcement.\n            </p>\n          </div>\n        }\n      </div>\n    </p-tabpanel>\n  </p-tabs>\n</div>\n","import {\n  Component,\n  HostListener,\n  effect,\n  inject,\n  signal,\n  computed,\n} from '@angular/core';\nimport { hasProperty, isDefined, isString } from '../../../shared/utils';\n\nimport { ActionType } from '../../../core/models/message.model';\nimport { AuthDataService } from '../../../core/services/auth-data.service';\nimport { AvatarModule } from 'primeng/avatar';\nimport { BadgeModule } from 'primeng/badge';\nimport { BroadcastMessageService } from '../../../core/services/message.service';\nimport { ButtonModule } from 'primeng/button';\nimport { ClientDataService } from '../../../features/clients/services/client-data.service';\nimport { ClientSwitcherComponent } from '../../../features/clients/components/client-switcher/client-switcher.component';\nimport { ClientsService } from '../../../api';\nimport { CommonModule } from '@angular/common';\nimport { LayoutService } from '../../services/layout.service';\nimport { LocalStorageService } from '../../../shared/services/local-storage.service';\nimport {\n  LOCAL_STORAGE_SIDEBAR_STATE_KEY,\n  MOBILE_BREAKPOINT,\n} from '../../../core/models';\nimport { MenuItem } from 'primeng/api';\nimport { MenuItemComponent } from './menu-item/menu-item.component';\nimport { MenuModule } from 'primeng/menu';\nimport { RippleModule } from 'primeng/ripple';\nimport { RouterModule } from '@angular/router';\nimport { ToggleButtonComponent } from './toggle-button/toggle-button.component';\nimport { TooltipModule } from 'primeng/tooltip';\nimport { UserProfileComponent } from './user-profile/user-profile.component';\nimport { UtilityService } from '../../../core/services/utility.service';\nimport { RecentClientsService } from '../../../shared/services/recent-clients.service';\nimport {\n  NavigationService,\n  NavigationGroup,\n  NavigationItem,\n} from '../../../core/services/navigation.service';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { UserSessionService } from '../../../core/services/user-session.service';\nimport { AccountSwitcherComponent } from '../../../features/accounts/components/account-switcher/account-switcher.component';\nimport { take } from 'rxjs';\nimport { DialogService } from 'primeng/dynamicdialog';\nimport { QAToolsService } from '../../../core/services/qa-tools.service';\nimport { QaPermissionTesterComponent } from '../../../shared/components/qa-permission-tester/qa-permission-tester.component';\nimport { environment } from '../../../../environments/environment';\n\n@Component({\n  selector: 'app-sidebar',\n  imports: [\n    BadgeModule,\n    RippleModule,\n    AvatarModule,\n    MenuModule,\n    CommonModule,\n    ButtonModule,\n    RouterModule,\n    TooltipModule,\n    ClientSwitcherComponent,\n    MenuItemComponent,\n    ToggleButtonComponent,\n    UserProfileComponent,\n    FontAwesomeModule,\n    AccountSwitcherComponent,\n  ],\n  providers: [DialogService],\n  templateUrl: './sidebar.component.html',\n  styleUrls: ['./sidebar.component.scss'],\n})\nexport class SidebarComponent {\n  private readonly messageService = inject(BroadcastMessageService);\n\n  private readonly authDataService = inject(AuthDataService);\n  private readonly clientsService = inject(ClientsService);\n  private readonly utilityService = inject(UtilityService);\n  private readonly clientDataService = inject(ClientDataService);\n  private readonly layoutService = inject(LayoutService);\n  private readonly localStorageService = inject(LocalStorageService);\n  private readonly navigationService = inject(NavigationService);\n  private readonly userSessionService = inject(UserSessionService);\n  private readonly recentClientsService = inject(RecentClientsService);\n  private readonly dialogService = inject(DialogService);\n  private readonly qaTools = inject(QAToolsService);\n\n  topMenuItems = signal<MenuItem[]>([]);\n  bottomMenuItems: MenuItem[] = [];\n  isCollapsed = signal(false);\n  userProfileSignal = this.authDataService.getUserProfileSignal();\n  selectedClientSignal = this.clientDataService.getSelectedClientSignal();\n  clientLogo = signal<string | null>(null);\n  isSwitchClient = signal(false);\n  isSwitchAccount = signal(false);\n  isMobile = signal(false);\n  isSidebarOpen = signal(false);\n\n  // Computed menu items based on navigation service\n  readonly dynamicMenuItems = computed(() => {\n    const groups = this.navigationService.getNavigationGroups();\n    const menuItems = this.convertNavigationGroupsToMenuItems(groups);\n    return this.addQaPermissionMenuItem(menuItems);\n  });\n  readonly dynamicBottomMenuItems = computed(() => {\n    // Access signals to make this computed reactive to their changes\n    const recentClients = this.recentClientsService.recentClients();\n    const selectedClient = this.selectedClientSignal();\n    return this.createBottomMenuItems(recentClients, selectedClient?.id);\n  });\n\n  readonly canListClients = computed(() => {\n    return (\n      this.authDataService.hasPermission('client:list-clients') ||\n      this.authDataService.hasPermission('clients:list')\n    );\n  });\n\n  constructor() {\n    this.reactToSelectedClientChanges();\n    this.checkScreenSize();\n\n    // Update menu items when navigation changes\n    effect(() => {\n      this.topMenuItems.set(this.dynamicMenuItems());\n    });\n    effect(() => {\n      this.bottomMenuItems = this.dynamicBottomMenuItems();\n    });\n  }\n\n  @HostListener('window:resize')\n  onResize(): void {\n    this.checkScreenSize();\n  }\n\n  private getIconForItem(item: NavigationItem): string {\n    const defaultPrimeIcon = 'pi pi-circle';\n    const defaultFontAwesomeIcon = 'fas fa-question-circle';\n\n    // Check if item.icon is defined and not null\n    if (item.icon == null) {\n      // Using == null to catch both undefined and null\n      return defaultPrimeIcon;\n    }\n\n    if (typeof item.icon === 'string') {\n      return item.icon;\n    }\n\n    // At this point, item.icon must be an IconDefinition if it's an object\n    // No need for `item.icon !== null` check again if `item.icon == null` passed above\n    // and typeof item.icon === 'object' is true\n    if (typeof item.icon === 'object') {\n      const faIcon = item.icon; // TypeScript infers this as IconDefinition here\n      if (faIcon.prefix && faIcon.iconName) {\n        return `${faIcon.prefix} fa-${faIcon.iconName}`;\n      }\n      return defaultFontAwesomeIcon;\n    }\n\n    return defaultPrimeIcon; // Fallback for any other unexpected type\n  }\n\n  private convertNavigationGroupsToMenuItems(\n    groups: NavigationGroup[],\n  ): MenuItem[] {\n    const menuItems: MenuItem[] = [];\n    for (const group of groups) {\n      menuItems.push({\n        label: group.name,\n        items: group.items.map((item) =>\n          this.convertNavigationItemToMenuItem(item),\n        ),\n        data: {\n          groupId: group.id,\n        },\n      });\n    }\n    return menuItems;\n  }\n\n  private addQaPermissionMenuItem(menuItems: MenuItem[]): MenuItem[] {\n    if (environment.production || !this.qaTools.isQAToolsAvailable()) {\n      return menuItems;\n    }\n\n    const qaItem: MenuItem = {\n      label: 'QA Permission Tester',\n      icon: 'pi pi-shield',\n      command: () => this.openQAPanel(),\n    };\n\n    const developmentGroup = menuItems.find(\n      (item) => item?.['data']?.['groupId'] === 'development',\n    );\n\n    if (developmentGroup) {\n      developmentGroup.items = [qaItem, ...(developmentGroup.items ?? [])];\n      return menuItems;\n    }\n\n    return [\n      ...menuItems,\n      {\n        label: 'Development',\n        items: [qaItem],\n        data: { groupId: 'development' },\n      },\n    ];\n  }\n\n  private convertNavigationItemToMenuItem(item: NavigationItem): MenuItem {\n    const menuItem: MenuItem = {\n      label: item.name,\n      icon: this.getIconForItem(item),\n      routerLink: item.route,\n\n      data: {\n        faIcon:\n          typeof item.icon === 'object' && item.icon !== null\n            ? item.icon\n            : undefined,\n        svgIcon:\n          typeof item.icon === 'string' && item.icon.startsWith('svg:')\n            ? item.icon.substring(4)\n            : undefined,\n      },\n    };\n\n    if (item.children && item.children.length > 0) {\n      menuItem.items = item.children.map((child) =>\n        this.convertNavigationItemToMenuItem(child),\n      );\n    }\n    return menuItem;\n  }\n\n  setCollapsedFromLocalStorage(): void {\n    const storedValue = this.localStorageService.getItem<boolean>(\n      LOCAL_STORAGE_SIDEBAR_STATE_KEY,\n    );\n    const isSidebarVisible = storedValue ?? true;\n    this.isCollapsed.set(!isSidebarVisible);\n    this.layoutService.toggleSidebar(isSidebarVisible);\n    if (this.isMobile()) {\n      this.isSidebarOpen.set(isSidebarVisible);\n      this.isCollapsed.set(false);\n    }\n  }\n\n  checkScreenSize(): void {\n    this.isMobile.set(window.innerWidth < MOBILE_BREAKPOINT);\n    this.setCollapsedFromLocalStorage();\n  }\n\n  private reactToSelectedClientChanges(): void {\n    // keep track of the last fetched client id to avoid duplicate requests\n    let lastClientId: string | number | null = null;\n    let lastUserId: string | null = null;\n\n    effect(() => {\n      const selectedClient = this.selectedClientSignal();\n      const userProfile = this.userProfileSignal();\n\n      const clientId = selectedClient?.id;\n      const currentUserId = userProfile?.id ?? null;\n\n      // If userId changed (user transition), reset tracking and clear logo\n      if (currentUserId !== lastUserId) {\n        lastUserId = currentUserId;\n        lastClientId = null;\n        this.clientLogo.set(null);\n\n        // Don't proceed if there's no user (logged out state)\n        if (currentUserId === null) {\n          return;\n        }\n      }\n\n      if (!isDefined(clientId)) {\n        lastClientId = null;\n        this.clientLogo.set(null);\n        return;\n      }\n\n      if (clientId === lastClientId) {\n        return;\n      }\n\n      lastClientId = clientId;\n\n      // Make the HTTP request single-shot (take(1)) to avoid lingering subscriptions\n      this.clientsService\n        .getClientLogo(clientId)\n        .pipe(take(1))\n        .subscribe({\n          next: (response: string | Blob | ArrayBuffer) => {\n            // Handle different response types safely\n            const blob =\n              response instanceof Blob\n                ? response\n                : new Blob([response], {\n                    type: 'application/octet-stream',\n                  });\n\n            this.utilityService\n              .convertBlobToBase64(blob)\n              .then((base64) => {\n                this.clientLogo.set(base64);\n              })\n              .catch(() => {\n                // swallow or log conversion errors as appropriate\n              });\n          },\n          error: () => {\n            // Optionally clear the logo or handle errors\n            this.clientLogo.set(null);\n          },\n        });\n    });\n  }\n\n  private createUserMenuItem(): MenuItem {\n    const userProfile = this.userProfileSignal();\n    const items: MenuItem[] = [];\n    if (this.userSessionService.userSessions().length > 1) {\n      items.push({\n        label: 'Switch Account',\n        icon: 'pi pi-arrow-right-arrow-left',\n        command: () => this.toggleSwitchAccount(),\n      });\n    }\n    items.push({\n      label: 'Profile',\n      icon: 'pi pi-user',\n      route: '/user/profile',\n    });\n\n    return {\n      label:\n        isDefined(userProfile) &&\n        hasProperty(userProfile, 'name') &&\n        isString(userProfile.name)\n          ? userProfile.name\n          : 'User',\n      items: items,\n    };\n  }\n\n  private createBottomMenuItems(\n    recentClients: { id: string; name: string }[] = [],\n    selectedClientId?: string | number,\n  ): MenuItem[] {\n    // Build the Account Navigation items\n    const accountNavigationItems: MenuItem[] = [];\n\n    // Only add Clients menu item if user has permission\n    if (this.canListClients()) {\n      accountNavigationItems.push({\n        label: 'Clients',\n        icon: 'pi pi-search',\n        command: () => this.toggleSwitchClient(),\n      });\n    }\n\n    // Add recent clients (limited to 3, excluding currently selected client)\n    const recentClientItems = recentClients\n      .filter((client) => client.id !== selectedClientId?.toString())\n      .slice(0, 3)\n      .map((client) => ({\n        label: client.name,\n        icon: 'pi pi-clock',\n        command: () => this.selectRecentClient(client.id),\n      }));\n\n    if (recentClientItems.length > 0) {\n      accountNavigationItems.push(...recentClientItems);\n    }\n\n    // Add logout at the end\n    accountNavigationItems.push({\n      label: 'Logout',\n      icon: 'pi pi-power-off',\n      command: () => this.logout(),\n    });\n\n    return [\n      this.createUserMenuItem(),\n      {\n        label: 'Account Navigation',\n        items: accountNavigationItems,\n      },\n      { separator: true },\n    ];\n  }\n\n  /**\n   * Selects a client directly from the recent clients list in the sidebar.\n   * @param clientId - The ID of the client to select\n   */\n  private selectRecentClient(clientId: string): void {\n    this.clientDataService.setSelectedClientById(clientId).catch((error) => {\n      console.error('Failed to select recent client:', error);\n    });\n  }\n\n  toggleSidebar(): void {\n    this.layoutService.toggleSidebar();\n    this.isCollapsed.set(!this.isCollapsed());\n    let newSidebarVisibilityState = !this.isCollapsed();\n    if (this.isMobile()) {\n      this.isSidebarOpen.set(!this.isSidebarOpen());\n      newSidebarVisibilityState = this.isSidebarOpen();\n      this.isCollapsed.set(false);\n    }\n    this.localStorageService.setItem(\n      LOCAL_STORAGE_SIDEBAR_STATE_KEY,\n      newSidebarVisibilityState,\n    );\n  }\n\n  logout(): void {\n    //send logout event to flutter\n    this.messageService.sendAction(ActionType.logout, {}, 'Logging out');\n    this.userSessionService.clearAllSessions();\n    this.authDataService.logout();\n  }\n\n  toggleSwitchClient(): void {\n    this.isSwitchClient.set(!this.isSwitchClient());\n  }\n\n  toggleSwitchAccount(): void {\n    this.isSwitchAccount.set(!this.isSwitchAccount());\n  }\n\n  /**\n   * Open the QA Permission Tester dialog\n   */\n  openQAPanel(): void {\n    this.dialogService.open(QaPermissionTesterComponent, {\n      header: 'QA Permission Tester',\n      width: '90vw',\n      height: '85vh',\n      contentStyle: { overflow: 'auto' },\n      baseZIndex: 10000,\n      maximizable: true,\n      modal: true,\n    });\n  }\n}\n","<!-- Hamburger Icon for Mobile -->\n@if (!isSidebarOpen()) {\n  <div class=\"md:hidden p-4\">\n    <i\n      class=\"pi pi-bars text-2xl cursor-pointer\"\n      (click)=\"toggleSidebar()\"\n      (keydown.enter)=\"toggleSidebar()\"\n    ></i>\n  </div>\n}\n\n<div\n  class=\"flex flex-col min-h-full sidebar-container left-0 bottom-0 top-0\"\n  [ngClass]=\"{\n    'w-16': isCollapsed(),\n    'w-aside': !isCollapsed() && !isMobile(),\n    'w-1/2': isMobile(),\n    open: isSidebarOpen(),\n  }\"\n>\n  <app-user-profile\n    [isCollapsed]=\"isCollapsed()\"\n    [userProfile]=\"userProfileSignal()\"\n    [clientLogo]=\"clientLogo()\"\n    [clientName]=\"selectedClientSignal()?.name\"\n    (click)=\"canListClients() && toggleSwitchClient()\"\n    [ngClass]=\"{ 'cursor-not-allowed opacity-50': !canListClients() }\"\n    [class.hover:cursor-pointer]=\"canListClients()\"\n    [pTooltip]=\"\n      canListClients() ? 'Switch Client' : 'No permission to switch clients'\n    \"\n    [showDelay]=\"1250\"\n    (keydown.enter)=\"canListClients() && toggleSwitchClient()\"\n  ></app-user-profile>\n\n  <!-- Top menu -->\n  <p-menu\n    [model]=\"topMenuItems()\"\n    class=\"w-full top-menu overflow-y-auto overflow-x-hidden\"\n  >\n    <ng-template #submenuheader let-item>\n      @if (!isCollapsed()) {\n        <span\n          class=\"flex items-center justify-center text-xs text-nav-client-font-color opacity-50\"\n        >\n          {{ item.label | uppercase }}\n        </span>\n      }\n    </ng-template>\n\n    <ng-template #item let-item>\n      <app-menu-item\n        [item]=\"item\"\n        [isCollapsed]=\"isCollapsed()\"\n      ></app-menu-item>\n    </ng-template>\n  </p-menu>\n\n  <!-- Bottom menu -->\n  <p-menu [model]=\"bottomMenuItems\" class=\"mt-auto w-full\">\n    <ng-template #submenuheader let-item>\n      @if (!isCollapsed()) {\n        <span\n          class=\"flex items-center justify-center text-xs text-nav-client-font-color opacity-50\"\n        >\n          {{ item.label | uppercase }}\n        </span>\n      }\n    </ng-template>\n\n    <ng-template #item let-item>\n      <app-menu-item\n        [item]=\"item\"\n        [isCollapsed]=\"isCollapsed()\"\n      ></app-menu-item>\n    </ng-template>\n  </p-menu>\n\n  <!-- Toggle button -->\n  <app-toggle-button\n    [isCollapsed]=\"isCollapsed()\"\n    (toggleChange)=\"toggleSidebar()\"\n  ></app-toggle-button>\n</div>\n\n@if (isSwitchClient()) {\n  <app-client-switcher (onClosed)=\"toggleSwitchClient()\"></app-client-switcher>\n}\n\n@if (isSwitchAccount()) {\n  <app-account-switcher\n    (closeModal)=\"toggleSwitchAccount()\"\n  ></app-account-switcher>\n}\n","import {\n  Component,\n  DestroyRef,\n  inject,\n  OnInit,\n  OnDestroy,\n  signal,\n  computed,\n  HostListener,\n} from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { filter } from 'rxjs';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  Router,\n  RouterModule,\n} from '@angular/router';\nimport { SplitterModule } from 'primeng/splitter';\nimport { ScrollPanelModule } from 'primeng/scrollpanel';\nimport { MessageService } from 'primeng/api';\nimport { DialogService } from 'primeng/dynamicdialog';\n\nimport { SidebarComponent } from '../sidebar/sidebar.component';\nimport { AuthDataService } from '../../../core/services/auth-data.service';\nimport { ThemeComponent } from '../../../shared/components/theme/theme.component';\nimport { UserProfileResponse } from '../../../api';\nimport { FlutterLayoutComponent } from '../flutter-layout/flutter-layout.component';\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\nimport { CommonModule } from '@angular/common';\nimport { ActionType } from '../../../core/models/message.model';\nimport { BroadcastMessageService } from '../../../core/services/message.service';\nimport { MeasurementDateTimeService } from '../../../shared/services/measurement-units/measurement-date-time.service';\nimport { QAToolsService } from '../../../core/services/qa-tools.service';\nimport { QaPermissionTesterComponent } from '../../../shared/components/qa-permission-tester/qa-permission-tester.component';\n\n@Component({\n  selector: 'app-main-layout',\n  imports: [\n    RouterModule,\n    SplitterModule,\n    SidebarComponent,\n    ScrollPanelModule,\n    ThemeComponent,\n    FlutterLayoutComponent,\n    ProgressSpinnerModule,\n    CommonModule,\n  ],\n  providers: [DialogService],\n  templateUrl: './main-layout.component.html',\n  styleUrls: ['./main-layout.component.scss'],\n})\nexport class MainLayoutComponent implements OnInit, OnDestroy {\n  private readonly authDataService = inject(AuthDataService);\n  private readonly messageService = inject(MessageService);\n  private readonly destroyRef = inject(DestroyRef);\n  private readonly router = inject(Router);\n  private readonly activatedRoute = inject(ActivatedRoute);\n  private readonly broadcastService = inject(BroadcastMessageService);\n  private readonly measurementDateTimeService = inject(\n    MeasurementDateTimeService,\n  );\n  private readonly dialogService = inject(DialogService);\n  readonly qaTools = inject(QAToolsService);\n  readonly isFlutterRoute = signal(false);\n  readonly isIframeRoute = signal(false);\n  readonly iframeUrl = signal<string | null>(null);\n\n  /**\n   * Dynamically determine scroll panel height class\n   * Accounts for QA test mode banner height (48px)\n   */\n  readonly scrollPanelClass = computed(() => {\n    return this.qaTools.testMode() === true\n      ? 'w-full h-[calc(100%-48px)]'\n      : 'w-full h-full';\n  });\n\n  constructor() {}\n\n  ngOnInit(): void {\n    this.initializeUserAndClient();\n    this.setupViewportHeight();\n    this.checkRouteData();\n\n    this.router.events\n      .pipe(\n        filter(\n          (event): event is NavigationEnd => event instanceof NavigationEnd,\n        ),\n        takeUntilDestroyed(this.destroyRef),\n      )\n      .subscribe(() => {\n        const isFlutterRoute = this.checkRouteData();\n\n        if (isFlutterRoute) {\n          this.handleFlutterNavigation();\n        }\n      });\n  }\n\n  private handleFlutterNavigation(): void {\n    const fullRoute = this.router.url;\n    const [path, queryString] = fullRoute.split('?');\n    const cleanPath = path.replaceAll(/(^\\/+)|(\\/+$)/g, '');\n    const flutterRoute = this.broadcastService.getFlutterRoute(cleanPath);\n    const queryParams = queryString\n      ? Object.fromEntries(new URLSearchParams(queryString))\n      : undefined;\n\n    this.broadcastService.sendAction(ActionType.navigate, {\n      route: flutterRoute,\n      queryParams,\n      timestamp: Date.now(),\n    });\n  }\n\n  private checkRouteData(): boolean {\n    let route = this.activatedRoute;\n    while (route.firstChild) {\n      route = route.firstChild;\n    }\n\n    const routeData = route.snapshot.data;\n    const isFlutterRoute = routeData['isFlutterRoute'] ?? false;\n    const isIframeRoute = routeData['isIframeRoute'] ?? false;\n    const iframeUrl = routeData['iframeUrl'] ?? null;\n\n    this.isFlutterRoute.set(isFlutterRoute);\n    this.isIframeRoute.set(isIframeRoute);\n    this.iframeUrl.set(iframeUrl);\n\n    return isFlutterRoute;\n  }\n\n  private initializeUserAndClient() {\n    this.activatedRoute.data\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe({\n        next: (data) => {\n          const userProfile: UserProfileResponse = data['userProfile'];\n          void this.authDataService.setUserProfile(userProfile);\n          this.measurementDateTimeService.setTimezoneId(\n            userProfile.timeZoneId ?? 'UTC',\n          );\n        },\n        error: () => {\n          this.messageService.add({\n            severity: 'error',\n            summary: 'Error',\n            detail: 'Failed to load user profile',\n          });\n        },\n      });\n  }\n\n  private setupViewportHeight(): void {\n    const setViewportHeight = () => {\n      const vh = globalThis.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', `${vh}px`);\n    };\n    const handleOrientationChange = () => {\n      setTimeout(setViewportHeight, 100);\n    };\n    setViewportHeight();\n    globalThis.addEventListener('resize', setViewportHeight);\n    globalThis.addEventListener('orientationchange', handleOrientationChange);\n\n    this.destroyRef.onDestroy(() => {\n      globalThis.removeEventListener('resize', setViewportHeight);\n      globalThis.removeEventListener(\n        'orientationchange',\n        handleOrientationChange,\n      );\n    });\n  }\n\n  /**\n   * Keyboard shortcut to open QA Permission Tester\n   * Ctrl+Shift+P (Cmd+Shift+P on Mac)\n   */\n  @HostListener('window:keydown.control.shift.p', ['$event'])\n  @HostListener('window:keydown.meta.shift.p', ['$event'])\n  handleQAPanelShortcut(event: Event): void {\n    // Check if QA tools are available\n    if (this.qaTools.isQAToolsAvailable() === true) {\n      event.preventDefault();\n      this.openQAPanel();\n    }\n  }\n\n  /**\n   * Open the QA Permission Tester dialog\n   */\n  openQAPanel(): void {\n    this.dialogService.open(QaPermissionTesterComponent, {\n      header: 'QA Permission Tester',\n      width: '90vw',\n      height: '85vh',\n      contentStyle: { overflow: 'auto' },\n      baseZIndex: 10000,\n      maximizable: true,\n      modal: true,\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.authDataService.clearAllUserData();\n  }\n}\n","<app-theme>\n  <div class=\"flex h-full\">\n    <app-sidebar></app-sidebar>\n\n    <div class=\"w-full\">\n      <!-- QA Test Mode Banner -->\n      @if (qaTools.testMode()) {\n        <div\n          class=\"qa-test-banner flex items-center justify-between px-4 py-2 bg-orange-500 text-white border-b-2 border-orange-600\"\n        >\n          <div class=\"flex items-center gap-2\">\n            <i class=\"pi pi-exclamation-triangle\"></i>\n            <span class=\"font-semibold\">QA TEST MODE ACTIVE</span>\n            <span class=\"text-sm opacity-90\">\n              Simulating: {{ qaTools.activeProfileName() }}\n            </span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <button\n              class=\"px-3 py-1 text-sm bg-white text-orange-600 rounded hover:bg-orange-50 transition-colors\"\n              (click)=\"openQAPanel()\"\n            >\n              <i class=\"pi pi-cog mr-1\"></i>\n              Manage\n            </button>\n            <button\n              class=\"px-3 py-1 text-sm bg-orange-700 text-white rounded hover:bg-orange-800 transition-colors\"\n              (click)=\"qaTools.resetQAState()\"\n            >\n              <i class=\"pi pi-refresh mr-1\"></i>\n              Reset\n            </button>\n          </div>\n        </div>\n      }\n\n      <p-scrollpanel [ngClass]=\"scrollPanelClass()\">\n        <!-- Flutter Layer -->\n        <div\n          [ngClass]=\"{ hidden: !isFlutterRoute(), block: isFlutterRoute() }\"\n          class=\"h-full flutter-layout\"\n        >\n          @defer {\n            <app-flutter-layout />\n          } @placeholder (minimum 500ms) {\n            <p-progressSpinner styleClass=\"w-[50px] h-[50px]\" strokeWidth=\"4\">\n            </p-progressSpinner>\n          } @loading (after 100ms; minimum 1s) {\n            <p-progressSpinner styleClass=\"w-[50px] h-[50px]\" strokeWidth=\"4\">\n            </p-progressSpinner>\n          }\n        </div>\n\n        <!-- Iframe Layer for External Links -->\n        <div\n          [ngClass]=\"{ hidden: !isIframeRoute(), block: isIframeRoute() }\"\n          class=\"h-full\"\n        >\n          @if (iframeUrl()) {\n            <iframe\n              [src]=\"iframeUrl()\"\n              title=\"External Application\"\n              class=\"w-full h-full border-0\"\n              sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups\"\n            ></iframe>\n          }\n        </div>\n\n        <!-- Angular Layer -->\n        <div\n          [ngClass]=\"{\n            hidden: isFlutterRoute() || isIframeRoute(),\n            block: !isFlutterRoute() && !isIframeRoute(),\n          }\"\n          class=\"h-full\"\n        >\n          <router-outlet />\n        </div>\n      </p-scrollpanel>\n    </div>\n  </div>\n</app-theme>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  inject,\n} from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\n\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavigationService } from '../../core/services/navigation.service';\nimport { isDefined } from '../../shared/utils';\n\n@Component({\n  selector: 'app-external-tab',\n  templateUrl: './external-tab.component.html',\n  styleUrls: ['./external-tab.component.scss'],\n  imports: [],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ExternalTabComponent {\n  private readonly route = inject(ActivatedRoute);\n  private readonly sanitizer = inject(DomSanitizer);\n  private readonly navigationService = inject(NavigationService);\n\n  private readonly params = toSignal(this.route.paramMap);\n\n  readonly iframeUrl = computed(() => {\n    const id = this.params()?.get('id');\n    if (id === null || id === undefined) {\n      return null;\n    }\n    const navItem = this.navigationService.getNavigationItemById(id);\n    if (isDefined(navItem?.externalUrl) && navItem.externalUrl.trim() !== '') {\n      return this.sanitizer.bypassSecurityTrustResourceUrl(navItem.externalUrl);\n    }\n    return null;\n  });\n}\n","@if (iframeUrl()) {\n  <iframe\n    [src]=\"iframeUrl()\"\n    class=\"external-iframe\"\n    title=\"External Content\"\n  ></iframe>\n}\n","import { inject } from '@angular/core';\nimport { CanActivateFn, Router, UrlTree } from '@angular/router';\nimport { UserSessionService } from '../services/user-session.service';\nimport { isDefined } from '../../shared/utils';\nimport { AuthService } from '../services/auth.service';\n\nexport const clientSelectedGuard: CanActivateFn = (): boolean | UrlTree => {\n  const userSessionService = inject(UserSessionService);\n  const authService = inject(AuthService);\n  const router = inject(Router);\n\n  // First check if user is authenticated\n  if (!authService.isAuthenticated()) {\n    return router.createUrlTree(['/auth', 'login']);\n  }\n\n  const hasSelectedSession = isDefined(userSessionService.currentUserSession());\n  const hasSessions = userSessionService.userSessions().length > 0;\n\n  if (hasSelectedSession) {\n    return true; // User has a selected client, allow access.\n  }\n\n  // User is authenticated but has not selected a client.\n  if (hasSessions) {\n    // Redirect them to the selection page.\n    return router.createUrlTree(['/auth', 'context-selection']);\n  }\n\n  // No sessions available - this shouldn't happen, but redirect to login as fallback\n  console.warn(\n    '[ClientSelectedGuard] User authenticated but has no available sessions, redirecting to login',\n  );\n  return router.createUrlTree(['/auth', 'login']);\n};\n","import { inject } from '@angular/core';\nimport { CanActivateFn, Router } from '@angular/router';\nimport { AuthDataService } from '../services/auth-data.service';\n\n/**\n * Guard that blocks access to admin routes if the user has no permissions assigned.\n * Users with at least one permission (subject to role/tier restrictions) are allowed.\n * Redirects unauthorized users to the /unauthorized page.\n */\nexport const adminPermissionsGuard: CanActivateFn = () => {\n  const authDataService = inject(AuthDataService);\n  const router = inject(Router);\n\n  // Check if user has any permissions at all\n  if (!authDataService.hasAssignedPermissions()) {\n    // User has no permissions, redirect to unauthorized page\n    router\n      .navigate(['/unauthorized'], {\n        queryParams: { reason: 'no_permissions' },\n      })\n      .catch(() => {});\n    return false;\n  }\n\n  // User has at least one permission, allow access\n  return true;\n};\n","import { Routes } from '@angular/router';\nimport { authGuard } from './core/guards/auth.guard';\nimport { featureGuard } from './core/guards/feature.guard';\nimport { MainLayoutComponent } from './layouts/components/main-layout/main-layout.component';\nimport { userProfileResolver } from './core/resolvers/user-profile.resolver';\nimport { ExternalTabComponent } from './features/external-tab/external-tab.component';\nimport { clientSelectedGuard } from './core/guards/client-selected.guard';\nimport { adminPermissionsGuard } from './core/guards';\n\nexport const routes: Routes = [\n  {\n    path: '',\n    component: MainLayoutComponent,\n    canActivate: [authGuard, clientSelectedGuard],\n    resolve: {\n      userProfile: userProfileResolver,\n    },\n    children: [\n      {\n        path: '',\n        redirectTo: 'position',\n        pathMatch: 'full',\n      },\n      {\n        path: 'position',\n        data: { isFlutterRoute: true },\n        loadChildren: () =>\n          import('./features/position/position.routes').then(\n            (m) => m.POSITION_ROUTES,\n          ),\n      },\n      {\n        path: 'alerts',\n        data: { isFlutterRoute: true, featureFlag: 'page.alerts.enabled' },\n        canActivate: [featureGuard],\n        loadChildren: () =>\n          import('./features/alerts/alerts.routes').then(\n            (m) => m.ALERTS_ROUTES,\n          ),\n      },\n      {\n        path: 'media',\n        data: { isFlutterRoute: true, featureFlag: 'page.videos.enabled' },\n        canActivate: [featureGuard],\n        loadChildren: () =>\n          import('./features/media/media.routes').then((m) => m.MEDIA_ROUTES),\n      },\n      {\n        path: 'history',\n        data: { isFlutterRoute: true, featureFlag: 'page.replay.enabled' },\n        canActivate: [featureGuard],\n        loadChildren: () =>\n          import('./features/history/history.routes').then(\n            (m) => m.HISTORY_ROUTES,\n          ),\n      },\n      {\n        path: 'user',\n        loadChildren: () =>\n          import('./features/users/users.routes').then((m) => m.USERS_ROUTES),\n      },\n      {\n        path: 'admin',\n        canActivate: [adminPermissionsGuard],\n        loadChildren: () =>\n          import('./features/administration/administration.routes').then(\n            (m) => m.ADMINISTRATION_ROUTES,\n          ),\n      },\n      {\n        path: 'analytical-report',\n        loadComponent: () =>\n          import(\n            './features/development/components/analytical-report/analytical-report.component'\n          ).then((m) => m.AnalyticalReportComponent),\n      },\n      {\n        path: 'app-store',\n        loadChildren: () =>\n          import('./features/app-store/app-store.routes').then(\n            (m) => m.APP_STORE_ROUTES,\n          ),\n      },\n      {\n        path: 'development',\n        loadChildren: () =>\n          import('./features/development/development.routes').then(\n            (m) => m.DEVELOPMENT_ROUTES,\n          ),\n      },\n      {\n        path: 'external/:id',\n        component: ExternalTabComponent,\n      },\n    ],\n  },\n  {\n    path: 'auth',\n    loadChildren: () =>\n      import('./features/auth/auth.routes').then((m) => m.AUTH_ROUTES),\n  },\n  {\n    path: 'unauthorized',\n    loadComponent: () =>\n      import('./shared/components/unauthorized/unauthorized.component').then(\n        (m) => m.UnauthorizedComponent,\n      ),\n  },\n];\n","import { HttpErrorResponse, HttpInterceptorFn } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { throwError } from 'rxjs';\nimport { ApiUrlService } from '../services/api-url.service';\nimport { ToastService } from '../services/toast.service';\nimport { VersionUpdateService } from '../services/version-update.service';\nimport { ErrorReasons } from '../models/error-reasons.enum';\nimport { isDefined } from '../../shared/utils';\nimport { Configuration } from '../../api';\n\nexport const ApiUrlInterceptor: HttpInterceptorFn = (req, next) => {\n  const apiUrlService = inject(ApiUrlService);\n  const toastService = inject(ToastService);\n  const versionUpdateService = inject(VersionUpdateService);\n  const apiConfiguration = inject(Configuration);\n\n  // --- Get and validate the DYNAMIC base URL ---\n  let dynamicApiUrlObj: URL;\n  try {\n    const currentApiUrl = apiUrlService.getCurrentApiUrl();\n    if (!currentApiUrl) {\n      throw new Error('API URL service returned an empty URL.');\n    }\n    dynamicApiUrlObj = new URL(currentApiUrl);\n  } catch (error) {\n    const errorMsg = `Invalid dynamic API URL configured: ${(error as Error)?.message ?? 'Unknown error'}. Please check settings.`;\n    const errorResponse = new HttpErrorResponse({\n      status: 400,\n      statusText: 'Bad Request',\n      error: {\n        errorReason: ErrorReasons.InvalidEndpoint,\n        errorMessage: errorMsg,\n        token: null,\n        valid: false,\n      },\n    });\n    // Check for version mismatch before showing error\n    if (versionUpdateService.isVersionMismatchError(errorMsg)) {\n      versionUpdateService.handleVersionMismatch('API URL configuration');\n    } else {\n      toastService.showError('Configuration Error', errorMsg);\n    }\n    return throwError(() => errorResponse);\n  }\n\n  // --- Normalize the DYNAMIC base URL (ensure it ends with /) ---\n  let dynamicApiBaseUrl = dynamicApiUrlObj.toString();\n  if (!dynamicApiBaseUrl.endsWith('/')) {\n    dynamicApiBaseUrl += '/';\n  }\n\n  // --- Check if the request URL needs modification ---\n  // Only modify requests that start with 'http' AND likely used the configured basePath\n  if (req.url.startsWith('http')) {\n    // --- Get the ORIGINAL basePath configured in ApiModule ---\n    const originalBasePath = apiConfiguration.basePath; // Get the basePath used at config time\n\n    if (isDefined(originalBasePath) && req.url.startsWith(originalBasePath)) {\n      // --- Extract the endpoint path RELATIVE to the ORIGINAL basePath ---\n      // Example: req.url = \"https://default.com/v1/users\", originalBasePath = \"https://default.com/v1\"\n      // We want \"/users\"\n      let endpointPath = req.url.substring(originalBasePath.length);\n\n      // Remove leading slash if present, as dynamicApiBaseUrl ends with one\n      if (endpointPath.startsWith('/')) {\n        endpointPath = endpointPath.substring(1);\n      }\n\n      // --- Construct the final URL ---\n      const finalUrl = `${dynamicApiBaseUrl}${endpointPath}`;\n      const modifiedRequest = req.clone({ url: finalUrl });\n      return next(modifiedRequest);\n    } else {\n      // The request URL starts with http, but NOT with the configured originalBasePath.\n      // This could be a request to a different domain or an asset.\n      // OR originalBasePath was not set.\n      // We *could* still try and replace the origin, but it's safer to leave it\n      // if it doesn't match the expected pattern.\n\n      return next(req);\n    }\n  }\n\n  // --- Pass through requests that don't start with 'http' (e.g., local assets) ---\n  return next(req);\n};\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport type RefreshTokenState =\n  | { status: 'idle' }\n  | { status: 'refreshing' }\n  | { status: 'success'; token: string }\n  | { status: 'error'; error: Error };\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TokenRefreshCoordinatorService {\n  refreshTokenInProgress = false;\n  refreshTokenSubject = new Subject<RefreshTokenState>();\n\n  resetRefreshState(): void {\n    this.refreshTokenInProgress = false;\n  }\n\n  notifyRefreshSuccess(token: string): void {\n    this.refreshTokenSubject.next({ status: 'success', token });\n  }\n\n  notifyRefreshError(error: Error): void {\n    this.refreshTokenSubject.next({ status: 'error', error });\n  }\n\n  startRefresh(): void {\n    this.refreshTokenInProgress = true;\n    this.refreshTokenSubject.next({ status: 'refreshing' });\n  }\n}\n","import { inject } from '@angular/core';\nimport {\n  Observable,\n  throwError,\n  switchMap,\n  filter,\n  take,\n  retry,\n  timer,\n  catchError,\n  timeout,\n  TimeoutError,\n} from 'rxjs';\nimport { AuthService } from '../services/auth.service';\nimport { AuthTokenManagerService } from '../services/auth-token-manager.service';\nimport { ApiErrorResponse } from '../models/auth.model';\nimport { ErrorReasons } from '../models/error-reasons.enum';\nimport { ToastService } from '../services/toast.service';\nimport { VersionUpdateService } from '../services/version-update.service';\nimport { AuthDataService } from '../services/auth-data.service';\nimport { isDefined } from '../../shared/utils';\nimport { SILENT_ERROR } from '../models/http-context.constants';\nimport {\n  HttpRequest,\n  HttpHandlerFn,\n  HttpEvent,\n  HttpErrorResponse,\n  HttpInterceptorFn,\n} from '@angular/common/http';\nimport { UserSessionResponse } from '../../api';\nimport { TokenRefreshCoordinatorService } from '../services/token-refresh-coordinator.service';\nimport { environment } from '../../../environments/environment';\n\nconst TOKEN_REFRESH_TIMEOUT_MS = 10000; // 10 seconds timeout for token refresh\nlet last401ToastTime = 0;\nconst TOAST_THROTTLE_MS = 3000;\n\nfunction shouldRetryError(error: HttpErrorResponse): boolean {\n  if (!navigator.onLine) {\n    return false;\n  }\n  const retryableStatuses = [0, 408, 500, 502, 503, 504];\n  return retryableStatuses.includes(error.status);\n}\n\nfunction createErrorObject(\n  error: HttpErrorResponse,\n  req: HttpRequest<unknown>,\n): ApiErrorResponse {\n  if (!navigator.onLine) {\n    return {\n      errorReason: ErrorReasons.NetworkError,\n      errorMessage:\n        'No internet connection. Please check your network and try again.',\n      token: null,\n      valid: false,\n    };\n  }\n  switch (error.status) {\n    case 401:\n      return {\n        errorReason: ErrorReasons.Unauthorized,\n        errorMessage: req.url.includes('/auth/signin')\n          ? 'Invalid username or password.'\n          : 'Your session has expired. Please log in again.',\n        token: null,\n        valid: false,\n      };\n    case 403:\n      return {\n        errorReason: ErrorReasons.Forbidden,\n        errorMessage: 'You do not have permission to perform this action.',\n        token: null,\n        valid: false,\n      };\n    case 404:\n      return {\n        errorReason: ErrorReasons.InvalidEndpoint,\n        errorMessage: 'The requested resource was not found',\n        token: null,\n        valid: false,\n      };\n    case 408:\n    case 504:\n      return {\n        errorReason: ErrorReasons.RequestTimeout,\n        errorMessage: 'The request timed out. Please try again',\n        token: null,\n        valid: false,\n      };\n    case 429:\n      return {\n        errorReason: ErrorReasons.TooManyLogins,\n        errorMessage: 'Too many login attempts. Please try again later',\n        token: null,\n        valid: false,\n      };\n    case 500:\n    case 502:\n    case 503:\n      return {\n        errorReason: ErrorReasons.ServerError,\n        errorMessage: 'Server is currently unavailable. Please try again later',\n        token: null,\n        valid: false,\n      };\n    case 400: {\n      let detailedMessage = error.error.message ?? 'Bad request';\n      if (isDefined(error.error?.data?.fields)) {\n        const fieldErrors = Object.values(error.error.data.fields)\n          .map((field) => (field as { message: string }).message)\n          .filter(Boolean)\n          .join('. ');\n        if (fieldErrors) {\n          detailedMessage += `: ${fieldErrors}`;\n        }\n      }\n      return {\n        errorReason: ErrorReasons.BadRequest,\n        errorMessage: detailedMessage,\n        token: null,\n        valid: false,\n      };\n    }\n    default:\n      return {\n        errorReason: ErrorReasons.Unknown,\n        errorMessage: 'An unexpected error occurred. Please try again',\n        token: null,\n        valid: false,\n      };\n  }\n}\n\nfunction isTargetApiUrl(requestUrl: string, allowedUrls: string[]): boolean {\n  return allowedUrls.some((apiUrl) => {\n    try {\n      const reqUrl = new URL(requestUrl);\n      const allowedUrl = new URL(apiUrl);\n\n      // Match protocol, hostname, and optionally port\n      const protocolMatch = reqUrl.protocol === allowedUrl.protocol;\n      const hostnameMatch = reqUrl.hostname === allowedUrl.hostname;\n      const portMatch =\n        allowedUrl.port === '' || reqUrl.port === allowedUrl.port;\n\n      return protocolMatch && hostnameMatch && portMatch;\n    } catch {\n      // Fallback for relative URLs - check if path starts with API path\n      return requestUrl.startsWith(apiUrl);\n    }\n  });\n}\n\nexport const AuthInterceptor: HttpInterceptorFn = (req, next) => {\n  const toastService = inject(ToastService);\n  const authService = inject(AuthService);\n  const authTokenManagerService = inject(AuthTokenManagerService);\n  const authDataService = inject(AuthDataService);\n  const versionUpdateService = inject(VersionUpdateService);\n  const tokenRefreshCoordinator = inject(TokenRefreshCoordinatorService);\n\n  const apiUrls = environment.apiUrls ?? [];\n\n  function addToken(\n    req: HttpRequest<unknown>,\n    token: string,\n  ): HttpRequest<unknown> {\n    return req.clone({\n      setHeaders: {\n        'x-access-token': `${token}`,\n      },\n    });\n  }\n\n  function showToastForError(\n    errorObject: ApiErrorResponse,\n    versionUpdateService: VersionUpdateService,\n    request: HttpRequest<unknown>,\n  ): void {\n    // Check if error toasts should be silenced for this request\n    if (request.context.get(SILENT_ERROR)) {\n      return;\n    }\n\n    // Check for version mismatch first\n    if (versionUpdateService.isVersionMismatchError(errorObject.errorMessage)) {\n      versionUpdateService.handleVersionMismatch(\n        'HTTP error: ' + errorObject.errorReason,\n      );\n      return;\n    }\n\n    switch (errorObject.errorReason) {\n      case ErrorReasons.Unauthorized: {\n        const now = Date.now();\n        if (now - last401ToastTime > TOAST_THROTTLE_MS) {\n          toastService.showError('Unauthorized', errorObject.errorMessage);\n          last401ToastTime = now;\n        }\n        break;\n      }\n      case ErrorReasons.NetworkError:\n        toastService.showError('Network Error', errorObject.errorMessage);\n        break;\n      case ErrorReasons.ServerError:\n        toastService.showError('Server Error', errorObject.errorMessage);\n        break;\n      case ErrorReasons.InvalidEndpoint:\n        toastService.showError('Service Unavailable', errorObject.errorMessage);\n        break;\n      case ErrorReasons.RequestTimeout:\n        toastService.showError('Request Timeout', errorObject.errorMessage);\n        break;\n      case ErrorReasons.TooManyLogins:\n        toastService.showError('Too Many Logins', errorObject.errorMessage);\n        break;\n      case ErrorReasons.BadRequest:\n        toastService.showError('Validation Error', errorObject.errorMessage);\n        break;\n      case ErrorReasons.Unknown:\n        toastService.showError('Error', errorObject.errorMessage);\n        break;\n      case ErrorReasons.Forbidden:\n        toastService.showError('Forbidden', errorObject.errorMessage);\n        break;\n    }\n  }\n\n  function handle401Error(\n    req: HttpRequest<unknown>,\n    next: HttpHandlerFn,\n    refreshToken: string,\n  ): Observable<HttpEvent<unknown>> {\n    if (req.url.includes('/auth/refresh')) {\n      authDataService.forceLogout();\n      return throwError(\n        () => new Error('Refresh token request failed. Logging out.'),\n      );\n    }\n\n    // First request to hit 401 initiates the refresh\n    if (tokenRefreshCoordinator.refreshTokenInProgress === false) {\n      tokenRefreshCoordinator.startRefresh();\n\n      return authService.refreshToken(refreshToken).pipe(\n        timeout(TOKEN_REFRESH_TIMEOUT_MS),\n        switchMap((authResponse: UserSessionResponse) => {\n          // Success: store tokens and notify all waiting requests\n          authTokenManagerService.storeTokens(authResponse);\n          tokenRefreshCoordinator.notifyRefreshSuccess(\n            authResponse.accessToken,\n          );\n          tokenRefreshCoordinator.resetRefreshState();\n          return next(addToken(req, authResponse.accessToken));\n        }),\n        catchError((error) => {\n          // Failure: notify all waiting requests and force logout\n          const errorMessage =\n            error instanceof TimeoutError\n              ? 'Token refresh timed out'\n              : `Token refresh error: ${error.message}`;\n\n          const refreshError = new Error(errorMessage);\n          tokenRefreshCoordinator.notifyRefreshError(refreshError);\n          tokenRefreshCoordinator.resetRefreshState();\n          authDataService.forceLogout();\n\n          return throwError(() => refreshError);\n        }),\n      );\n    } else {\n      // Subsequent requests wait for the refresh to complete\n      return tokenRefreshCoordinator.refreshTokenSubject.pipe(\n        filter(\n          (state) => state.status === 'success' || state.status === 'error',\n        ),\n        take(1),\n        timeout({\n          each: TOKEN_REFRESH_TIMEOUT_MS,\n          with: () =>\n            throwError(\n              () =>\n                new Error(\n                  'Timeout waiting for token refresh. Please try again.',\n                ),\n            ),\n        }),\n        switchMap((state) => {\n          if (state.status === 'success') {\n            // Refresh succeeded, retry the request with new token\n            return next(addToken(req, state.token));\n          } else {\n            // Refresh failed, propagate the error\n            return throwError(() => state.error);\n          }\n        }),\n        catchError((error) => {\n          // Handle timeout or other errors from waiting\n          if (\n            error instanceof Error &&\n            error.message?.includes('Timeout waiting for token refresh')\n          ) {\n            authDataService.forceLogout();\n          }\n          return throwError(() => error);\n        }),\n      );\n    }\n  }\n\n  function handleError(\n    req: HttpRequest<unknown>,\n    next: HttpHandlerFn,\n    error: HttpErrorResponse,\n  ): Observable<HttpEvent<unknown>> {\n    // Silent 404s for avatar endpoints - these are expected when no avatar exists\n    if (\n      error.status === 404 &&\n      req.url.includes('/entities/assets/') &&\n      req.url.includes('/avatar')\n    ) {\n      return throwError(() => error);\n    }\n\n    const errorObject = createErrorObject(error, req);\n    if (error.status === 401) {\n      // Prevent infinite loop: do not refresh for signin or refresh endpoints\n      if (\n        req.url.includes('/auth/signin') ||\n        req.url.includes('/auth/refresh')\n      ) {\n        showToastForError(errorObject, versionUpdateService, req);\n        return throwError(() => errorObject);\n      }\n      const refreshToken = authTokenManagerService.getRefreshToken();\n      return isDefined(refreshToken)\n        ? handle401Error(req, next, refreshToken).pipe(\n            catchError((refreshError) => {\n              authDataService.forceLogout();\n              showToastForError(errorObject, versionUpdateService, req);\n              return throwError(() => refreshError);\n            }),\n          )\n        : (() => {\n            authDataService.forceLogout();\n            showToastForError(errorObject, versionUpdateService, req);\n            return throwError(() => errorObject);\n          })();\n    }\n    showToastForError(errorObject, versionUpdateService, req);\n    return throwError(() => new Error(errorObject.errorMessage));\n  }\n\n  // Only attach tokens to configured API URLs with strict origin validation\n  const isTargetApi = isTargetApiUrl(req.url, apiUrls);\n\n  let request: HttpRequest<unknown> = req;\n\n  // Only add CypherView token for configured API hosts\n  if (isTargetApi) {\n    const accessToken = authTokenManagerService.getAccessToken();\n    if (isDefined(accessToken)) {\n      request = addToken(req, accessToken);\n    }\n  }\n\n  // Skip error handling for non-target APIs\n  if (!isTargetApi) {\n    return next(request);\n  }\n\n  return next(request).pipe(\n    retry({\n      count: 1,\n      delay: (error: HttpErrorResponse, retryCount: number) => {\n        if (shouldRetryError(error)) {\n          return timer(1000 * Math.pow(2, retryCount - 1));\n        }\n        throw error;\n      },\n    }),\n    catchError((error) => handleError(request, next, error)),\n  );\n};\n","import { inject } from '@angular/core';\nimport { firstValueFrom } from 'rxjs';\nimport { AuthService as CoreAuthService } from '../services/auth.service';\nimport { AuthService as ApiAuthService, UserProfileResponse } from '../../api';\nimport { AuthDataService } from '../services/auth-data.service';\nimport { ClientDataService } from '../../features/clients/services/client-data.service';\nimport { LocalStorageService } from '../../shared/services/local-storage.service';\nimport { isDefined, isNullOrUndefined } from '../../shared/utils';\nimport { UserSessionService } from '../services/user-session.service';\nimport { SessionCleanupService } from '../services/session-cleanup.service';\n\n/**\n * Application startup initializer.\n *\n * CRITICAL: This runs BEFORE routing and BEFORE guards.\n * It ensures user profile and sessions are loaded before navigation begins.\n *\n * Responsibilities:\n * 1. Check if user is authenticated\n * 2. If authenticated, load user profile\n * 3. Set user ID in LocalStorageService for correct namespacing\n * 4. Detect and handle user mismatches\n * 5. Force UserSessionService to reload sessions with correct namespace\n * 6. Restore selected client if available\n */\nexport function startupInitializer(): () => Promise<void> {\n  return async () => {\n    const coreAuth = inject(CoreAuthService);\n    const apiAuth = inject(ApiAuthService);\n    const authData = inject(AuthDataService);\n    const clientData = inject(ClientDataService);\n    const localStorage = inject(LocalStorageService);\n    const userSessionService = inject(UserSessionService);\n    const sessionCleanup = inject(SessionCleanupService);\n\n    // Fast path: not authenticated -> nothing to preload.\n    if (!coreAuth.isAuthenticated()) {\n      return;\n    }\n\n    try {\n      // One-time: migrate legacy non-namespaced auth tokens to API-scoped keys\n      localStorage.migrateLegacyAuthTokensToApiNamespace();\n\n      // 1. Load user profile if not already present\n      let profile: UserProfileResponse | null = authData.getUserProfile();\n      if (!profile) {\n        profile = await firstValueFrom(apiAuth.getUserProfile());\n        if (isDefined(profile)) {\n          await authData.setUserProfile(profile);\n        }\n      }\n\n      if (isNullOrUndefined(profile)) {\n        return;\n      }\n\n      // 2. Check for user mismatch ONLY if this is a fresh login (not account switch)\n      // We can detect account switch by checking if sessions already exist\n      const hasExistingSessions = userSessionService.userSessions().length > 0;\n\n      if (isDefined(profile.id) && !hasExistingSessions) {\n        // Only check mismatch on fresh login, not on app reload after account switch\n        const hasMismatch = sessionCleanup.detectAndHandleUserMismatch(\n          profile.id,\n        );\n        if (hasMismatch) {\n          console.warn(\n            '[Startup] User mismatch detected, previous user data cleared',\n          );\n        }\n\n        // Migrate any pending data to actual user namespace\n        localStorage.migrateFromPendingToUser(profile.id);\n\n        // Update last authenticated user\n        sessionCleanup.setLastAuthenticatedUser(profile.id);\n      } else if (isDefined(profile.id)) {\n        // On reload, just update the last authenticated user (no mismatch check)\n        sessionCleanup.setLastAuthenticatedUser(profile.id);\n      }\n\n      // 3. CRITICAL: Reload user sessions from storage now that we have the correct user namespace\n      // This ensures sessions are available BEFORE guards run\n\n      userSessionService.reloadSessionsFromStorage();\n\n      clientData.markInitializationComplete();\n    } catch {\n      clientData.markInitializationComplete();\n    }\n  };\n}\n","import { ErrorHandler, inject, Injectable } from '@angular/core';\nimport { VersionUpdateService } from './version-update.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GlobalErrorHandlerService implements ErrorHandler {\n  private readonly versionUpdateService = inject(VersionUpdateService);\n\n  constructor() {\n    // Catch unhandled promise rejections (zoneless compatible)\n    globalThis.addEventListener('unhandledrejection', (event) => {\n      console.error('Unhandled promise rejection caught:', event.reason);\n      this.handleError(event.reason);\n      event.preventDefault();\n    });\n\n    // Also catch any global errors\n    globalThis.addEventListener('error', (event) => {\n      console.error('Global error event caught:', event.error);\n      this.handleError(event.error);\n    });\n  }\n\n  handleError(error: unknown): void {\n    console.error('Global error handler invoked with:', error);\n\n    // Check for version mismatch errors first\n    if (this.versionUpdateService.isVersionMismatchError(error)) {\n      console.log('Detected version mismatch error, triggering update flow');\n      this.versionUpdateService.handleVersionMismatch('global error');\n      return;\n    }\n\n    // Log other errors normally\n    console.error('Unhandled application error:', error);\n  }\n}\n","/**\n * @license Angular v21.0.3\n * (c) 2010-2025 Google LLC. https://angular.dev/\n * License: MIT\n */\n\nimport * as i0 from '@angular/core';\nimport { ɵRuntimeError as _RuntimeError, ApplicationRef, Injectable, InjectionToken, makeEnvironmentProviders, provideAppInitializer, inject, NgZone, ɵformatRuntimeError as _formatRuntimeError, Injector, NgModule } from '@angular/core';\nimport { Observable, Subject, NEVER } from 'rxjs';\nimport { switchMap, take, filter, map } from 'rxjs/operators';\nconst ERR_SW_NOT_SUPPORTED = 'Service workers are disabled or not supported by this browser';\nclass NgswCommChannel {\n  serviceWorker;\n  worker;\n  registration;\n  events;\n  constructor(serviceWorker, injector) {\n    this.serviceWorker = serviceWorker;\n    if (!serviceWorker) {\n      this.worker = this.events = this.registration = new Observable(subscriber => subscriber.error(new _RuntimeError(5601, (typeof ngDevMode === 'undefined' || ngDevMode) && ERR_SW_NOT_SUPPORTED)));\n    } else {\n      let currentWorker = null;\n      const workerSubject = new Subject();\n      this.worker = new Observable(subscriber => {\n        if (currentWorker !== null) {\n          subscriber.next(currentWorker);\n        }\n        return workerSubject.subscribe(v => subscriber.next(v));\n      });\n      const updateController = () => {\n        const {\n          controller\n        } = serviceWorker;\n        if (controller === null) {\n          return;\n        }\n        currentWorker = controller;\n        workerSubject.next(currentWorker);\n      };\n      serviceWorker.addEventListener('controllerchange', updateController);\n      updateController();\n      this.registration = this.worker.pipe(switchMap(() => serviceWorker.getRegistration().then(registration => {\n        if (!registration) {\n          throw new _RuntimeError(5601, (typeof ngDevMode === 'undefined' || ngDevMode) && ERR_SW_NOT_SUPPORTED);\n        }\n        return registration;\n      })));\n      const _events = new Subject();\n      this.events = _events.asObservable();\n      const messageListener = event => {\n        const {\n          data\n        } = event;\n        if (data?.type) {\n          _events.next(data);\n        }\n      };\n      serviceWorker.addEventListener('message', messageListener);\n      const appRef = injector?.get(ApplicationRef, null, {\n        optional: true\n      });\n      appRef?.onDestroy(() => {\n        serviceWorker.removeEventListener('controllerchange', updateController);\n        serviceWorker.removeEventListener('message', messageListener);\n      });\n    }\n  }\n  postMessage(action, payload) {\n    return new Promise(resolve => {\n      this.worker.pipe(take(1)).subscribe(sw => {\n        sw.postMessage({\n          action,\n          ...payload\n        });\n        resolve();\n      });\n    });\n  }\n  postMessageWithOperation(type, payload, operationNonce) {\n    const waitForOperationCompleted = this.waitForOperationCompleted(operationNonce);\n    const postMessage = this.postMessage(type, payload);\n    return Promise.all([postMessage, waitForOperationCompleted]).then(([, result]) => result);\n  }\n  generateNonce() {\n    return Math.round(Math.random() * 10000000);\n  }\n  eventsOfType(type) {\n    let filterFn;\n    if (typeof type === 'string') {\n      filterFn = event => event.type === type;\n    } else {\n      filterFn = event => type.includes(event.type);\n    }\n    return this.events.pipe(filter(filterFn));\n  }\n  nextEventOfType(type) {\n    return this.eventsOfType(type).pipe(take(1));\n  }\n  waitForOperationCompleted(nonce) {\n    return new Promise((resolve, reject) => {\n      this.eventsOfType('OPERATION_COMPLETED').pipe(filter(event => event.nonce === nonce), take(1), map(event => {\n        if (event.result !== undefined) {\n          return event.result;\n        }\n        throw new Error(event.error);\n      })).subscribe({\n        next: resolve,\n        error: reject\n      });\n    });\n  }\n  get isEnabled() {\n    return !!this.serviceWorker;\n  }\n}\nclass SwPush {\n  sw;\n  messages;\n  notificationClicks;\n  notificationCloses;\n  pushSubscriptionChanges;\n  subscription;\n  get isEnabled() {\n    return this.sw.isEnabled;\n  }\n  pushManager = null;\n  subscriptionChanges = new Subject();\n  constructor(sw) {\n    this.sw = sw;\n    if (!sw.isEnabled) {\n      this.messages = NEVER;\n      this.notificationClicks = NEVER;\n      this.notificationCloses = NEVER;\n      this.pushSubscriptionChanges = NEVER;\n      this.subscription = NEVER;\n      return;\n    }\n    this.messages = this.sw.eventsOfType('PUSH').pipe(map(message => message.data));\n    this.notificationClicks = this.sw.eventsOfType('NOTIFICATION_CLICK').pipe(map(message => message.data));\n    this.notificationCloses = this.sw.eventsOfType('NOTIFICATION_CLOSE').pipe(map(message => message.data));\n    this.pushSubscriptionChanges = this.sw.eventsOfType('PUSH_SUBSCRIPTION_CHANGE').pipe(map(message => message.data));\n    this.pushManager = this.sw.registration.pipe(map(registration => registration.pushManager));\n    const workerDrivenSubscriptions = this.pushManager.pipe(switchMap(pm => pm.getSubscription()));\n    this.subscription = new Observable(subscriber => {\n      const workerDrivenSubscription = workerDrivenSubscriptions.subscribe(subscriber);\n      const subscriptionChanges = this.subscriptionChanges.subscribe(subscriber);\n      return () => {\n        workerDrivenSubscription.unsubscribe();\n        subscriptionChanges.unsubscribe();\n      };\n    });\n  }\n  requestSubscription(options) {\n    if (!this.sw.isEnabled || this.pushManager === null) {\n      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));\n    }\n    const pushOptions = {\n      userVisibleOnly: true\n    };\n    let key = this.decodeBase64(options.serverPublicKey.replace(/_/g, '/').replace(/-/g, '+'));\n    let applicationServerKey = new Uint8Array(new ArrayBuffer(key.length));\n    for (let i = 0; i < key.length; i++) {\n      applicationServerKey[i] = key.charCodeAt(i);\n    }\n    pushOptions.applicationServerKey = applicationServerKey;\n    return new Promise((resolve, reject) => {\n      this.pushManager.pipe(switchMap(pm => pm.subscribe(pushOptions)), take(1)).subscribe({\n        next: sub => {\n          this.subscriptionChanges.next(sub);\n          resolve(sub);\n        },\n        error: reject\n      });\n    });\n  }\n  unsubscribe() {\n    if (!this.sw.isEnabled) {\n      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));\n    }\n    const doUnsubscribe = sub => {\n      if (sub === null) {\n        throw new _RuntimeError(5602, (typeof ngDevMode === 'undefined' || ngDevMode) && 'Not subscribed to push notifications.');\n      }\n      return sub.unsubscribe().then(success => {\n        if (!success) {\n          throw new _RuntimeError(5603, (typeof ngDevMode === 'undefined' || ngDevMode) && 'Unsubscribe failed!');\n        }\n        this.subscriptionChanges.next(null);\n      });\n    };\n    return new Promise((resolve, reject) => {\n      this.subscription.pipe(take(1), switchMap(doUnsubscribe)).subscribe({\n        next: resolve,\n        error: reject\n      });\n    });\n  }\n  decodeBase64(input) {\n    return atob(input);\n  }\n  static ɵfac = function SwPush_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || SwPush)(i0.ɵɵinject(NgswCommChannel));\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: SwPush,\n    factory: SwPush.ɵfac\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SwPush, [{\n    type: Injectable\n  }], () => [{\n    type: NgswCommChannel\n  }], null);\n})();\nclass SwUpdate {\n  sw;\n  versionUpdates;\n  unrecoverable;\n  get isEnabled() {\n    return this.sw.isEnabled;\n  }\n  ongoingCheckForUpdate = null;\n  constructor(sw) {\n    this.sw = sw;\n    if (!sw.isEnabled) {\n      this.versionUpdates = NEVER;\n      this.unrecoverable = NEVER;\n      return;\n    }\n    this.versionUpdates = this.sw.eventsOfType(['VERSION_DETECTED', 'VERSION_INSTALLATION_FAILED', 'VERSION_READY', 'NO_NEW_VERSION_DETECTED']);\n    this.unrecoverable = this.sw.eventsOfType('UNRECOVERABLE_STATE');\n  }\n  checkForUpdate() {\n    if (!this.sw.isEnabled) {\n      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));\n    }\n    if (this.ongoingCheckForUpdate) {\n      return this.ongoingCheckForUpdate;\n    }\n    const nonce = this.sw.generateNonce();\n    this.ongoingCheckForUpdate = this.sw.postMessageWithOperation('CHECK_FOR_UPDATES', {\n      nonce\n    }, nonce).finally(() => {\n      this.ongoingCheckForUpdate = null;\n    });\n    return this.ongoingCheckForUpdate;\n  }\n  activateUpdate() {\n    if (!this.sw.isEnabled) {\n      return Promise.reject(new _RuntimeError(5601, (typeof ngDevMode === 'undefined' || ngDevMode) && ERR_SW_NOT_SUPPORTED));\n    }\n    const nonce = this.sw.generateNonce();\n    return this.sw.postMessageWithOperation('ACTIVATE_UPDATE', {\n      nonce\n    }, nonce);\n  }\n  static ɵfac = function SwUpdate_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || SwUpdate)(i0.ɵɵinject(NgswCommChannel));\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: SwUpdate,\n    factory: SwUpdate.ɵfac\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SwUpdate, [{\n    type: Injectable\n  }], () => [{\n    type: NgswCommChannel\n  }], null);\n})();\nconst SCRIPT = new InjectionToken(typeof ngDevMode !== undefined && ngDevMode ? 'NGSW_REGISTER_SCRIPT' : '');\nfunction ngswAppInitializer() {\n  if (typeof ngServerMode !== 'undefined' && ngServerMode) {\n    return;\n  }\n  const options = inject(SwRegistrationOptions);\n  if (!('serviceWorker' in navigator && options.enabled !== false)) {\n    return;\n  }\n  const script = inject(SCRIPT);\n  const ngZone = inject(NgZone);\n  const appRef = inject(ApplicationRef);\n  ngZone.runOutsideAngular(() => {\n    const sw = navigator.serviceWorker;\n    const onControllerChange = () => sw.controller?.postMessage({\n      action: 'INITIALIZE'\n    });\n    sw.addEventListener('controllerchange', onControllerChange);\n    appRef.onDestroy(() => {\n      sw.removeEventListener('controllerchange', onControllerChange);\n    });\n  });\n  ngZone.runOutsideAngular(() => {\n    let readyToRegister;\n    const {\n      registrationStrategy\n    } = options;\n    if (typeof registrationStrategy === 'function') {\n      readyToRegister = new Promise(resolve => registrationStrategy().subscribe(() => resolve()));\n    } else {\n      const [strategy, ...args] = (registrationStrategy || 'registerWhenStable:30000').split(':');\n      switch (strategy) {\n        case 'registerImmediately':\n          readyToRegister = Promise.resolve();\n          break;\n        case 'registerWithDelay':\n          readyToRegister = delayWithTimeout(+args[0] || 0);\n          break;\n        case 'registerWhenStable':\n          readyToRegister = Promise.race([appRef.whenStable(), delayWithTimeout(+args[0])]);\n          break;\n        default:\n          throw new _RuntimeError(5600, (typeof ngDevMode === 'undefined' || ngDevMode) && `Unknown ServiceWorker registration strategy: ${options.registrationStrategy}`);\n      }\n    }\n    readyToRegister.then(() => {\n      if (appRef.destroyed) {\n        return;\n      }\n      navigator.serviceWorker.register(script, {\n        scope: options.scope,\n        updateViaCache: options.updateViaCache,\n        type: options.type\n      }).catch(err => console.error(_formatRuntimeError(5604, (typeof ngDevMode === 'undefined' || ngDevMode) && 'Service worker registration failed with: ' + err)));\n    });\n  });\n}\nfunction delayWithTimeout(timeout) {\n  return new Promise(resolve => setTimeout(resolve, timeout));\n}\nfunction ngswCommChannelFactory() {\n  const opts = inject(SwRegistrationOptions);\n  const injector = inject(Injector);\n  const isBrowser = !(typeof ngServerMode !== 'undefined' && ngServerMode);\n  return new NgswCommChannel(isBrowser && opts.enabled !== false ? navigator.serviceWorker : undefined, injector);\n}\nclass SwRegistrationOptions {\n  enabled;\n  updateViaCache;\n  type;\n  scope;\n  registrationStrategy;\n}\nfunction provideServiceWorker(script, options = {}) {\n  return makeEnvironmentProviders([SwPush, SwUpdate, {\n    provide: SCRIPT,\n    useValue: script\n  }, {\n    provide: SwRegistrationOptions,\n    useValue: options\n  }, {\n    provide: NgswCommChannel,\n    useFactory: ngswCommChannelFactory\n  }, provideAppInitializer(ngswAppInitializer)]);\n}\nclass ServiceWorkerModule {\n  static register(script, options = {}) {\n    return {\n      ngModule: ServiceWorkerModule,\n      providers: [provideServiceWorker(script, options)]\n    };\n  }\n  static ɵfac = function ServiceWorkerModule_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || ServiceWorkerModule)();\n  };\n  static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ServiceWorkerModule\n  });\n  static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    providers: [SwPush, SwUpdate]\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServiceWorkerModule, [{\n    type: NgModule,\n    args: [{\n      providers: [SwPush, SwUpdate]\n    }]\n  }], null, null);\n})();\nexport { ServiceWorkerModule, SwPush, SwRegistrationOptions, SwUpdate, provideServiceWorker };\n","import { Provider } from '@angular/core';\nimport {\n  ENTITY_ADAPTER_REGISTRY,\n  EntityAdapterRegistration,\n} from './entity-adapter.token';\nimport {\n  SimCardsDataAdapter,\n  AssetsDataAdapter,\n  AssetTagsDataAdapter,\n  DeviceConfigProfilesDataAdapter,\n  DevicesDataAdapter,\n  GeofencesDataAdapter,\n  AlertsDataAdapter,\n  DeviceProvidersDataAdapter,\n  SmsGatewayProvidersDataAdapter,\n  IoTypesDataAdapter,\n  OverspeedProfilesDataAdapter,\n  UserRolesDataAdapter,\n  UsersDataAdapter,\n  CustomFieldsDataAdapter,\n  ThemesDataAdapter,\n  CostCentresDataAdapter,\n  GeofenceGroupsDataAdapter,\n  AssetGroupsDataAdapter,\n  AssetCategoriesDataAdapter,\n  ClientsDataAdapter,\n  VendorsDataAdapter,\n  AssetRatingProfilesDataAdapter,\n  DistributorsDataAdapter,\n  AssetStateProfilesDataAdapter,\n  CompanyGroupsDataAdapter,\n  RoadProfilesDataAdapter,\n  GeoLockProfilesDataAdapter,\n  DeviceTypesDataAdapter,\n} from '../adapters';\nimport { EmailProvidersDataAdapter } from '../adapters/email-providers-data-adapter.service';\n\nconst ADAPTERS: EntityAdapterRegistration[] = [\n  {\n    types: ['client-sim-cards', 'simcard'],\n    adapter: SimCardsDataAdapter,\n  },\n  {\n    types: ['client-assets', 'asset'],\n    adapter: AssetsDataAdapter,\n  },\n  {\n    types: ['client-asset-tags', 'asset-tag'],\n    adapter: AssetTagsDataAdapter,\n  },\n  {\n    types: [\n      'client-device-config-profiles',\n      'vendor-device-config-profiles',\n      'device-config-profile',\n    ],\n    adapter: DeviceConfigProfilesDataAdapter,\n  },\n  {\n    types: ['client-hardware-devices', 'device'],\n    adapter: DevicesDataAdapter,\n  },\n  {\n    types: ['client-geofences', 'geofence'],\n    adapter: GeofencesDataAdapter,\n  },\n  {\n    types: ['client-alerts', 'alert'],\n    adapter: AlertsDataAdapter,\n  },\n  {\n    types: [\n      'client-device-providers',\n      'distributor-device-providers',\n      'device-provider',\n    ],\n    adapter: DeviceProvidersDataAdapter,\n  },\n  {\n    types: [\n      'client-sms-gateway-providers',\n      'sms-gateway-provider',\n      'vendor-sms-gateway-providers',\n    ],\n    adapter: SmsGatewayProvidersDataAdapter,\n  },\n  {\n    types: ['email-provider', 'vendor-email-provider'],\n    adapter: EmailProvidersDataAdapter,\n  },\n  {\n    types: ['client-io-types', 'vendor-io-types', 'io-type'],\n    adapter: IoTypesDataAdapter,\n  },\n  {\n    types: [\n      'client-overspeed-profiles',\n      'vendor-overspeed-profiles',\n      'distributor-overspeed-profiles',\n      'overspeed-profile',\n    ],\n    adapter: OverspeedProfilesDataAdapter,\n  },\n  {\n    types: [\n      'client-user-roles',\n      'vendor-user-roles',\n      'distributor-user-roles',\n      'user-role',\n      'system-user-roles',\n    ],\n    adapter: UserRolesDataAdapter,\n  },\n  {\n    types: [\n      'client-users',\n      'vendor-users',\n      'distributor-users',\n      'system-users',\n      'user',\n    ],\n    adapter: UsersDataAdapter,\n  },\n  {\n    types: ['client-custom-fields', 'vendor-custom-fields', 'custom-field'],\n    adapter: CustomFieldsDataAdapter,\n  },\n  {\n    types: ['distributor-themes', 'theme'],\n    adapter: ThemesDataAdapter,\n  },\n  {\n    types: ['client-cost-centres', 'cost-centre'],\n    adapter: CostCentresDataAdapter,\n  },\n  {\n    types: ['client-geofence-groups', 'geofence-group'],\n    adapter: GeofenceGroupsDataAdapter,\n  },\n  {\n    types: ['client-asset-groups', 'asset-group'],\n    adapter: AssetGroupsDataAdapter,\n  },\n  {\n    types: ['client-asset-categories', 'asset-category'],\n    adapter: AssetCategoriesDataAdapter,\n  },\n  {\n    types: ['vendor-clients', 'client'],\n    adapter: ClientsDataAdapter,\n  },\n  {\n    types: ['distributor-vendors', 'vendor'],\n    adapter: VendorsDataAdapter,\n  },\n  {\n    types: ['client-asset-rating-profiles', 'asset-rating-profile'],\n    adapter: AssetRatingProfilesDataAdapter,\n  },\n  {\n    types: ['super-admin-distributors', 'distributor'],\n    adapter: DistributorsDataAdapter,\n  },\n  {\n    types: ['client-asset-state-profiles', 'asset-state-profile'],\n    adapter: AssetStateProfilesDataAdapter,\n  },\n  {\n    types: ['vendor-company-groups', 'company-group'],\n    adapter: CompanyGroupsDataAdapter,\n  },\n  {\n    types: ['client-road-profiles', 'vendor-road-profiles', 'road-profile'],\n    adapter: RoadProfilesDataAdapter,\n  },\n  {\n    types: [\n      'client-geo-lock-profiles',\n      'geo-lock-profile',\n      'vendor-geo-lock-profiles',\n    ],\n    adapter: GeoLockProfilesDataAdapter,\n  },\n  {\n    types: ['super-admin-device-types', 'device-types'],\n    adapter: DeviceTypesDataAdapter,\n  },\n];\n\nexport const DEFAULT_ENTITY_ADAPTERS: Provider = {\n  provide: ENTITY_ADAPTER_REGISTRY,\n  useValue: ADAPTERS,\n};\n","import {\n  ApplicationConfig,\n  ErrorHandler,\n  importProvidersFrom,\n  provideAppInitializer,\n  provideZonelessChangeDetection,\n} from '@angular/core';\nimport { LocationStrategy, HashLocationStrategy } from '@angular/common';\nimport { provideRouter } from '@angular/router';\nimport { providePrimeNG } from 'primeng/config';\nimport Aura from '@primeuix/themes/aura';\n\nimport { routes } from './app.routes';\nimport { provideHttpClient, withInterceptors } from '@angular/common/http';\nimport { ApiModule, Configuration, ConfigurationParameters } from './api';\nimport { environment } from '../environments/environment';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { ToastModule } from 'primeng/toast';\nimport { ApiUrlInterceptor } from './core/interceptors/api-url.interceptor';\nimport { AuthInterceptor } from './core/interceptors/auth.interceptor';\nimport { BroadcastMessageService } from './core/services/message.service';\nimport { DialogService } from 'primeng/dynamicdialog';\nimport { initializeFeatureDefaults } from './core/models';\nimport { of } from 'rxjs';\nimport { startupInitializer } from './core/startup/startup.initializer';\nimport { GlobalErrorHandlerService } from './core/services/global-error-handler.service';\nimport { provideServiceWorker } from '@angular/service-worker';\nimport { DEFAULT_ENTITY_ADAPTERS } from './features/administration/services/entity/entity-adapters.provider';\n\nexport function apiConfigFactory(): Configuration {\n  const params: ConfigurationParameters = { basePath: environment.apiUrls[0] };\n  return new Configuration(params);\n}\n\nexport const appConfig: ApplicationConfig = {\n  providers: [\n    provideZonelessChangeDetection(),\n    provideRouter(routes),\n    providePrimeNG({\n      theme: {\n        preset: Aura,\n        options: { prefix: 'p', darkModeSelector: 'p-dark' },\n      },\n    }),\n    provideHttpClient(withInterceptors([ApiUrlInterceptor, AuthInterceptor])),\n    provideAppInitializer(() => of(initializeFeatureDefaults())),\n    // pre-routing bootstrap (loads profile & client if already authenticated)\n    provideAppInitializer(startupInitializer()),\n    importProvidersFrom([ApiModule.forRoot(apiConfigFactory), ToastModule]),\n    { provide: LocationStrategy, useClass: HashLocationStrategy },\n    MessageService,\n    BroadcastMessageService,\n    DialogService,\n    ConfirmationService,\n    { provide: ErrorHandler, useClass: GlobalErrorHandlerService },\n    provideServiceWorker('ngsw-worker.js', {\n      enabled: true, // Enable in all environments for PWA testing\n      registrationStrategy: 'registerImmediately',\n    }),\n    DEFAULT_ENTITY_ADAPTERS,\n  ],\n};\n","import { Component } from '@angular/core';\nimport { Toast } from 'primeng/toast';\n\n@Component({\n  selector: 'app-toast',\n  imports: [Toast],\n  templateUrl: './toast.component.html',\n  styleUrl: './toast.component.scss',\n})\nexport class ToastComponent {}\n","<p-toast\n  [breakpoints]=\"{ '768px': { width: '100%', right: '0', left: '0' } }\"\n/>\n","import { Component, effect, inject } from '@angular/core';\nimport { RouterOutlet } from '@angular/router';\nimport { ToastComponent } from './shared/components/toast/toast.component';\nimport { Title } from '@angular/platform-browser';\nimport { ClientDataService } from './features/clients/services/client-data.service';\n\n@Component({\n  selector: 'app-root',\n  imports: [RouterOutlet, ToastComponent],\n  templateUrl: './app.component.html',\n  styleUrl: './app.component.scss',\n})\nexport class AppComponent {\n  // Services\n  private readonly titleService = inject(Title);\n  private readonly clientDataService = inject(ClientDataService);\n\n  // Preserve the default app title (from index.html) as the fallback\n  private readonly defaultAppTitle =\n    this.titleService.getTitle() || 'Cypherview';\n\n  // React to client selection changes and update the browser title\n  private readonly updateTitleEffect = effect(() => {\n    const client = this.clientDataService.getSelectedClientSignal()();\n    const appName = this.defaultAppTitle;\n    const clientName = client?.name?.trim();\n    const hasClientName = clientName != null && clientName !== '';\n\n    if (hasClientName) {\n      this.titleService.setTitle(`${clientName}`);\n    } else {\n      this.titleService.setTitle(appName);\n    }\n  });\n}\n","<router-outlet></router-outlet>\n<app-toast></app-toast>","import { bootstrapApplication } from '@angular/platform-browser';\nimport { appConfig } from './app/app.config';\nimport { AppComponent } from './app/app.component';\n\nbootstrapApplication(AppComponent, appConfig)\n  .catch((err) => console.error(err));\n"],"mappings":"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","names":["AuthService","import_lodash","childKey","i","g","a","b","p","AvatarClasses","_c0","_c0","s","t","_c0","f","a","b","_c0","_c1","_c0","m","AuthService","m","AuthService","req","versionUpdateService","request","next","AuthService","v","i","input","timeout","_c1","_c0"],"x_google_ignoreList":[3,34]}