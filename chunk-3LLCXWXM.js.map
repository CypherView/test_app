{
  "version": 3,
  "sources": ["src/app/features/administration/components/clients/client-administration.config.ts", "src/app/core/services/qa-tools.service.ts", "src/app/features/administration/services/client-permissions.service.ts"],
  "sourcesContent": ["import { FeatureConfig } from '../../../../core/models/permission.model';\n\n/**\n * Single source of truth for client administration feature labels and permissions.\n * Both tabs and routes pull from here to ensure consistency.\n */\nexport const CLIENT_ADMIN_FEATURES = {\n  details: {\n    label: 'Details',\n  },\n  assets: {\n    label: 'Assets',\n    permissions: 'client:list-assets',\n  },\n  geofences: {\n    label: 'Geofences',\n    permissions: 'client:list-zones',\n  },\n  alerts: {\n    label: 'Alerts',\n    permissions: {\n      or: ['client:alerts', 'client:list-alerts'],\n    },\n  },\n  hardware: {\n    label: 'Hardware',\n    permissions: {\n      or: [\n        'client:list-devices',\n        'client:devices',\n        'client:list-assettags',\n        'client:assettags',\n        'client:list-simcards',\n        'client:simcards',\n      ],\n    },\n  },\n  'client-hardware-devices': {\n    label: 'Devices',\n    permissions: {\n      or: ['client:list-devices', 'client:devices'],\n    },\n  },\n  'client-asset-tags': {\n    label: 'Asset Tags',\n    permissions: {\n      or: ['client:list-assettags', 'client:assettags'],\n    },\n  },\n  'client-sim-cards': {\n    label: 'Sim Cards',\n    permissions: {\n      or: ['client:list-simcards', 'client:simcards'],\n    },\n  },\n  providers: {\n    label: 'Providers',\n    permissions: {\n      or: [\n        'client:list-smsGatewayProviders',\n        'client:smsGatewayProviders',\n        'client:list-smsgateways',\n        'client:smsgateways',\n      ],\n    },\n  },\n  'client-sms-gateway-providers': {\n    label: 'SMS Gateways',\n    permissions: {\n      or: [\n        'client:list-smsGatewayProviders',\n        'client:smsGatewayProviders',\n        'client:list-smsgateways',\n        'client:smsgateways',\n      ],\n    },\n  },\n  profiles: {\n    label: 'Profiles',\n    permissions: {\n      or: [\n        'client:list-iotypes',\n        'client:iotypes',\n        'client:list-deviceconfigprofiles',\n        'client:deviceconfigprofiles',\n        'client:list-assetratingprofiles',\n        'client:assetratingprofiles',\n        'client:list-assetstateprofiles',\n        'client:assetstateprofiles',\n        'client:list-overspeedprofiles',\n        'client:overspeedprofiles',\n        'client:list-roadprofiles',\n        'client:roadprofiles',\n        'client:list-geolockprofiles',\n        'client:geolockprofiles',\n        'client:list-customfields',\n        'client:customfields',\n      ],\n    },\n  },\n  'client-io-types': {\n    label: 'I/O Types',\n    permissions: {\n      or: ['client:list-iotypes', 'client:iotypes'],\n    },\n  },\n  'client-device-config-profiles': {\n    label: 'Device Config Profiles',\n    permissions: {\n      or: ['client:list-deviceconfigprofiles', 'client:deviceconfigprofiles'],\n    },\n  },\n  'client-asset-rating-profiles': {\n    label: 'Asset Rating Profiles',\n    permissions: {\n      or: ['client:list-assetratingprofiles', 'client:assetratingprofiles'],\n    },\n  },\n  'client-asset-state-profiles': {\n    label: 'Asset State Profiles',\n    permissions: {\n      or: ['client:list-assetstateprofiles', 'client:assetstateprofiles'],\n    },\n  },\n  'client-overspeed-profiles': {\n    label: 'Overspeed Profiles',\n    permissions: {\n      or: ['client:list-overspeedprofiles', 'client:overspeedprofiles'],\n    },\n  },\n  'client-road-profiles': {\n    label: 'Road Profiles',\n    permissions: {\n      or: ['client:list-roadprofiles', 'client:roadprofiles'],\n    },\n  },\n  'client-geo-lock-profiles': {\n    label: 'Geo Lock Profiles',\n    permissions: {\n      or: ['client:list-geolockprofiles', 'client:geolockprofiles'],\n    },\n  },\n  'client-custom-fields': {\n    label: 'Custom Fields',\n    permissions: {\n      or: ['client:list-customfields', 'client:customfields'],\n    },\n  },\n  organization: {\n    label: 'Organization',\n    permissions: {\n      or: [\n        'client:list-costcentres',\n        'client:costcentres',\n        'client:list-assetgroups',\n        'client:assetgroups',\n        'client:list-assetcategories',\n        'client:assetcategories',\n        'client:list-zonegroups',\n        'client:zonegroups',\n      ],\n    },\n  },\n  'client-cost-centres': {\n    label: 'Cost Centres',\n    permissions: {\n      or: ['client:list-costcentres', 'client:costcentres'],\n    },\n  },\n  'client-asset-groups': {\n    label: 'Asset Groups',\n    permissions: {\n      or: ['client:list-assetgroups', 'client:assetgroups'],\n    },\n  },\n  'client-asset-categories': {\n    label: 'Categories',\n    permissions: {\n      or: ['client:list-assetcategories', 'client:assetcategories'],\n    },\n  },\n  'client-geofence-groups': {\n    label: 'Geofence Groups',\n    permissions: {\n      or: ['client:list-zonegroups', 'client:zonegroups'],\n    },\n  },\n  accounts: {\n    label: 'Accounts',\n    permissions: {\n      or: [\n        'client:list-users',\n        'client:users',\n        'client:list-userroles',\n        'client:userroles',\n      ],\n    },\n  },\n  'client-users': {\n    label: 'Users',\n    permissions: {\n      or: ['client:list-users', 'client:users'],\n    },\n  },\n  'client-user-roles': {\n    label: 'User Roles',\n    permissions: {\n      or: ['client:list-userroles', 'client:userroles'],\n    },\n  },\n} satisfies Record<string, FeatureConfig>;\n\n/**\n * Strict type for client feature IDs.\n * Ensures compile-time safety when referencing features.\n */\nexport type ClientFeatureId = keyof typeof CLIENT_ADMIN_FEATURES;\n", "import { Injectable, inject, signal, computed, effect } from '@angular/core';\nimport { AuthDataService } from './auth-data.service';\nimport {\n  AccountsService,\n  AuthService,\n  ClientsService,\n  DistributorsService,\n  IdName,\n  UserRoleListItem,\n  UserRoleResponse,\n  UserRoleUpdateRequest,\n  VendorsService,\n} from '../../api';\nimport { firstValueFrom } from 'rxjs';\nimport { isDefined, isEmpty, isNullOrUndefined } from '../../shared/utils';\nimport { PermissionUtils } from '../utils/permission.utils';\nimport { environment } from '../../../environments/environment';\n\nexport interface QAPersona {\n  id: string;\n  name: string;\n  permissions: string[];\n  ownerId: string;\n  ownerType: string | null;\n}\n\n/**\n * QA Tools Service\n *\n * Provides dynamic role-based permission simulation for QA testing.\n * Fetches actual backend roles and extracts permissions from legacyRights.\n */\n@Injectable({ providedIn: 'root' })\nexport class QAToolsService {\n  private readonly authData = inject(AuthDataService);\n  private readonly accountsService = inject(AccountsService);\n  private readonly authService = inject(AuthService);\n  private readonly distributorsService = inject(DistributorsService);\n  private readonly vendorsService = inject(VendorsService);\n  private readonly clientsService = inject(ClientsService);\n\n  private readonly PERSONA_STORAGE_KEY = 'cv_qa_test_persona';\n\n  /** Signal indicating if test mode is active */\n  readonly testMode = signal<boolean>(false);\n\n  /** Signal for the currently active test persona */\n  readonly activePersona = signal<QAPersona | null>(null);\n\n  /** List of available backend roles for the current owner */\n  readonly availableRoles = signal<UserRoleListItem[]>([]);\n\n  /** Loading state for role fetching */\n  readonly isLoadingRoles = signal<boolean>(false);\n\n  /** Set of manually toggled permissions */\n  readonly manualOverrides = signal<Set<string>>(new Set());\n\n  // Hierarchical Testing Signals\n  readonly selectedDistributorId = signal<string | null>(null);\n  readonly selectedVendorId = signal<string | null>(null);\n  readonly selectedClientId = signal<string | null>(null);\n\n  readonly availableDistributors = signal<IdName[]>([]);\n  readonly availableVendors = signal<IdName[]>([]);\n  readonly availableClients = signal<IdName[]>([]);\n\n  /** Display name for the active persona */\n  readonly activeProfileName = computed(\n    () => this.activePersona()?.name ?? 'Real User',\n  );\n\n  constructor() {\n    // Only restore QA state in allowed environments/roles\n    if (this.isQAToolsAvailable()) {\n      this.restoreFromStorage();\n    } else {\n      // Clear any stale QA data in production\n      localStorage.removeItem(this.PERSONA_STORAGE_KEY);\n    }\n\n    // Re-apply overrides if the persona or manual toggles change\n    effect(() => {\n      // Extra safety: only apply overrides if QA tools are available\n      if (!this.isQAToolsAvailable()) {\n        this.authData.resetOverrides();\n        return;\n      }\n\n      const persona = this.activePersona();\n      const manual = this.manualOverrides();\n\n      if (this.testMode()) {\n        const merged = new Set<string>(persona?.permissions ?? []);\n        manual.forEach((p) => merged.add(p));\n\n        const owner = persona\n          ? { id: persona.ownerId, type: persona.ownerType }\n          : undefined;\n        this.authData.overridePermissions([...merged], owner);\n      } else {\n        this.authData.resetOverrides();\n      }\n    });\n  }\n\n  /**\n   * Checks if QA tools should be available in the current environment or for the current user.\n   */\n  isQAToolsAvailable(): boolean {\n    // Hidden in production unless we have a specific flag or're using a dev build\n    if (environment.production) {\n      // Additional check: maybe only allow for certain domains or specific internal users\n      return (\n        this.authData\n          .getUserProfile()\n          ?.emailAddress?.endsWith('@keytelematics.com') ?? false\n      );\n    }\n    return true;\n  }\n\n  /**\n   * Resets all QA simulation state and hierarchical selections.\n   */\n  resetQAState(): void {\n    this.testMode.set(false);\n    this.activePersona.set(null);\n    this.manualOverrides.set(new Set());\n    this.selectedDistributorId.set(null);\n    this.selectedVendorId.set(null);\n    this.selectedClientId.set(null);\n    this.availableDistributors.set([]);\n    this.availableVendors.set([]);\n    this.availableClients.set([]);\n    localStorage.removeItem(this.PERSONA_STORAGE_KEY);\n    this.authData.resetOverrides();\n  }\n\n  /**\n   * Fetches the full list of roles available to the current user's owner.\n   */\n  async loadAvailableRoles(): Promise<void> {\n    const userProfile = this.authData.getUserProfile();\n    if (isNullOrUndefined(userProfile?.owner?.id)) {\n      return;\n    }\n\n    this.isLoadingRoles.set(true);\n    try {\n      const response = await firstValueFrom(\n        this.accountsService.listUserRoles(userProfile.owner.id),\n      );\n      this.availableRoles.set(response.items ?? []);\n    } catch (error) {\n      console.error('Failed to load QA roles:', error);\n    } finally {\n      this.isLoadingRoles.set(false);\n    }\n  }\n\n  /**\n   * Applies a specific role as the active test persona.\n   * Fetches full role details to extract permissions.\n   */\n  async applyRole(roleId: string): Promise<void> {\n    const userProfile = this.authData.getUserProfile();\n    if (isNullOrUndefined(userProfile?.owner?.id)) return;\n\n    try {\n      const fullRole: UserRoleResponse = await firstValueFrom(\n        this.accountsService.getUserRole(roleId),\n      );\n\n      // Handle system:all for system roles\n      const isSystemRole = roleId === '00000000-0000-0000-0000-000000000000';\n      const permissions = isSystemRole\n        ? ['system:all']\n        : this.extractPermissionsFromLegacyRights(fullRole.legacyRights);\n\n      const persona: QAPersona = {\n        id: roleId,\n        name: fullRole.name ?? 'Unknown Role',\n        permissions,\n        ownerId: userProfile.owner.id,\n        ownerType: userProfile.owner.type ?? null,\n      };\n\n      this.activePersona.set(persona);\n      this.testMode.set(true);\n      this.saveToStorage(persona);\n    } catch (error) {\n      console.error('Failed to apply role:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Manually toggles a single permission on or off.\n   */\n  setPermissionOverride(permission: string, enabled: boolean): void {\n    const current = new Set(this.manualOverrides());\n    const persona = this.activePersona();\n\n    if (enabled) {\n      current.add(permission);\n    } else {\n      current.delete(permission);\n\n      // Robust cleanup: remove all mappings (UI + Internal) from the simulation context\n      if (persona) {\n        const mappings = PermissionUtils.getInternalMappings(permission);\n        const newPersonaPerms = persona.permissions.filter(\n          (p) => !mappings.includes(p),\n        );\n\n        if (newPersonaPerms.length !== persona.permissions.length) {\n          this.activePersona.set({ ...persona, permissions: newPersonaPerms });\n        }\n      }\n    }\n\n    this.manualOverrides.set(current);\n    if (!this.testMode()) {\n      this.testMode.set(true);\n    }\n  }\n\n  /**\n   * Internal permission extraction logic, mirroring AuthDataService normalization.\n   */\n  private extractPermissionsFromLegacyRights(\n    legacyRights: Record<string, string[]> | undefined,\n  ): string[] {\n    if (isNullOrUndefined(legacyRights)) return [];\n\n    const permissions: string[] = [];\n    for (const feature in legacyRights) {\n      if (Object.hasOwn(legacyRights, feature)) {\n        const actions = legacyRights[feature];\n        if (Array.isArray(actions)) {\n          const normalizedFeature = this.normalizeResourceName(feature);\n          for (const action of actions) {\n            permissions.push(`${normalizedFeature}:${action}`);\n          }\n        }\n      }\n    }\n    // Deduplicate and ensure system:all is handled if needed\n    return [...new Set(permissions)];\n  }\n\n  /**\n   * Mirrors AuthDataService.normalizeResourceName for consistency.\n   */\n  private normalizeResourceName(resource: string): string {\n    const normalized = resource.toLowerCase().replaceAll('-', '');\n    const pluralMap: Record<string, string> = {\n      vendors: 'vendor',\n      clients: 'client',\n      users: 'user',\n      userroles: 'userrole',\n      themes: 'theme',\n      mapsets: 'mapset',\n      assets: 'asset',\n      devices: 'device',\n      simcards: 'simcard',\n      zones: 'zone',\n      alerts: 'alert',\n    };\n    return pluralMap[normalized] ?? normalized;\n  }\n\n  /**\n   * Converts flat permissions (e.g. ['client:list', 'user:create'])\n   * back to legacyRights (e.g. { clients: ['list'], users: ['create'] })\n   */\n  private denormalizePermissions(\n    permissions: string[],\n  ): Record<string, string[]> {\n    const legacyRights: Record<string, string[]> = {};\n    const reversePluralMap: Record<string, string> = {\n      vendor: 'vendors',\n      client: 'clients',\n      user: 'users',\n      userrole: 'userroles',\n      theme: 'themes',\n      mapset: 'mapsets',\n      asset: 'assets',\n      device: 'devices',\n      simcard: 'simcards',\n      zone: 'zones',\n      alert: 'alerts',\n    };\n\n    permissions.forEach((perm) => {\n      if (perm === 'system:all') return; // Skip system:all if it's special\n\n      const [resource, action] = perm.split(':');\n      if (!resource || !action) return;\n\n      const denormalizedResource = reversePluralMap[resource] ?? resource;\n      if (isEmpty(legacyRights[denormalizedResource])) {\n        legacyRights[denormalizedResource] = [];\n      }\n      legacyRights[denormalizedResource].push(action);\n    });\n\n    return legacyRights;\n  }\n\n  async loadDistributors(): Promise<void> {\n    const ownerId = this.authData.getRealUserOwnerId();\n    if (isNullOrUndefined(ownerId)) return;\n\n    try {\n      const response = await firstValueFrom(\n        this.distributorsService.listDistributors(ownerId),\n      );\n      this.availableDistributors.set(response.items ?? []);\n    } catch (error) {\n      console.error('Error loading distributors:', error);\n      this.availableDistributors.set([]);\n    }\n  }\n\n  async loadVendors(distributorId: string): Promise<void> {\n    try {\n      const response = await firstValueFrom(\n        this.vendorsService.listVendors(distributorId),\n      );\n      this.availableVendors.set(response.items ?? []);\n    } catch (error) {\n      console.error('Error loading vendors:', error);\n      this.availableVendors.set([]);\n    }\n  }\n\n  async loadClients(vendorId: string): Promise<void> {\n    try {\n      const response = await firstValueFrom(\n        this.clientsService.listClients(vendorId),\n      );\n      this.availableClients.set(response.items ?? []);\n    } catch (error) {\n      console.error('Error loading clients:', error);\n      this.availableClients.set([]);\n    }\n  }\n\n  selectDistributor(id: string | null): void {\n    this.selectedDistributorId.set(id);\n    this.selectedVendorId.set(null);\n    this.selectedClientId.set(null);\n    this.availableVendors.set([]);\n    this.availableClients.set([]);\n    if (isDefined(id)) {\n      this.loadVendors(id).catch(() => {});\n    }\n  }\n\n  selectVendor(id: string | null): void {\n    this.selectedVendorId.set(id);\n    this.selectedClientId.set(null);\n    this.availableClients.set([]);\n    if (isDefined(id)) {\n      this.loadClients(id).catch(() => {});\n    }\n  }\n\n  selectClient(id: string | null): void {\n    this.selectedClientId.set(id);\n  }\n\n  /**\n   * Persists the current manual overrides and persona permissions back to the backend role.\n   * This effectively \"saves\" your simulation as the real role configuration.\n   */\n  async saveCurrentOverridesToRole(): Promise<void> {\n    const persona = this.activePersona();\n    if (!persona) return;\n\n    const manual = this.manualOverrides();\n    const merged = new Set<string>(persona.permissions);\n    manual.forEach((p) => merged.add(p));\n\n    const legacyRights = this.denormalizePermissions([...merged]);\n\n    try {\n      await firstValueFrom(\n        this.accountsService.updateUserRole(persona.id, {\n          name: persona.name,\n          legacyRights,\n        } as UserRoleUpdateRequest),\n      );\n      // After saving, we might want to refresh the persona or just notify success\n    } catch (error) {\n      console.error('Failed to save overridden permissions to role:', error);\n      throw error;\n    }\n  }\n\n  private saveToStorage(persona: QAPersona): void {\n    localStorage.setItem(this.PERSONA_STORAGE_KEY, JSON.stringify(persona));\n  }\n\n  private restoreFromStorage(): void {\n    const stored = localStorage.getItem(this.PERSONA_STORAGE_KEY);\n    if (stored !== null && stored !== undefined) {\n      try {\n        const persona: QAPersona = JSON.parse(stored);\n        this.activePersona.set(persona);\n        this.testMode.set(true);\n      } catch (err) {\n        console.error('QA Tools: Error restoring persona from storage:', err);\n        localStorage.removeItem(this.PERSONA_STORAGE_KEY);\n      }\n    }\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\nimport { PermissionService } from '../../../core/services/permission.service';\nimport { PermissionExpression } from '../../../core/models/permission.model';\n\n/**\n * Centralized service for evaluating client-scoped permissions.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ClientPermissionsService {\n  private readonly permissionService = inject(PermissionService);\n\n  /**\n   * Check if user has access to a specific permission expression in client scope.\n   * Used by guards and tab filtering.\n   */\n  canAccessFeature(permissions: PermissionExpression | undefined): boolean {\n    if (permissions === null || permissions === undefined) {\n      return true; // No permission requirement means access allowed\n    }\n\n    return this.permissionService.canAccess(permissions, 'client');\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
