{
  "version": 3,
  "sources": ["src/app/features/development/components/analytical-report/dashboard/services/dashboard-layout.service.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/summary-block/summary-block.component.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/summary-block/summary-block.component.html", "src/app/features/development/components/analytical-report/dashboard/blocks/kpi-block/kpi-block.component.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/kpi-block/kpi-block.component.html", "src/app/features/development/components/analytical-report/dashboard/blocks/chart-block/chart-block.component.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/chart-block/chart-block.component.html", "src/app/features/development/components/analytical-report/dashboard/blocks/alert-block/alert-block.component.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/alert-block/alert-block.component.html", "src/app/features/development/components/analytical-report/dashboard/blocks/table-block/table-block.component.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/table-block/table-block.component.html", "src/app/features/development/components/analytical-report/dashboard/blocks/recommendation-block/recommendation-block.component.ts", "src/app/features/development/components/analytical-report/dashboard/blocks/recommendation-block/recommendation-block.component.html", "src/app/features/development/components/analytical-report/dashboard/analytics-dashboard.component.ts", "src/app/features/development/components/analytical-report/dashboard/analytics-dashboard.component.html", "src/app/features/development/components/analytical-report/chat/pipes/format-markdown.pipe.ts", "src/app/features/development/components/analytical-report/chat/components/inline-date-picker/inline-date-picker.component.ts", "src/app/features/development/components/analytical-report/chat/components/inline-date-picker/inline-date-picker.component.html", "src/app/features/development/components/analytical-report/chat/components/inline-vehicle-selector/inline-vehicle-selector.component.ts", "src/app/features/development/components/analytical-report/chat/components/inline-vehicle-selector/inline-vehicle-selector.component.html", "src/app/features/development/components/analytical-report/chat/components/inline-data-type-selector/inline-data-type-selector.component.ts", "src/app/features/development/components/analytical-report/chat/components/inline-data-type-selector/inline-data-type-selector.component.html", "src/app/features/development/components/analytical-report/chat/components/chat-message/chat-message.component.ts", "src/app/features/development/components/analytical-report/chat/components/chat-message/chat-message.component.html", "src/app/features/development/components/analytical-report/chat/components/chat-input/chat-input.component.ts", "src/app/features/development/components/analytical-report/chat/components/chat-input/chat-input.component.html", "src/app/features/development/components/analytical-report/chat/components/query-preview/query-preview.component.ts", "src/app/features/development/components/analytical-report/chat/components/query-preview/query-preview.component.html", "src/app/features/development/components/analytical-report/chat/services/chat-session.service.ts", "src/app/features/development/components/analytical-report/chat/components/query-chat/query-chat.component.ts", "src/app/features/development/components/analytical-report/chat/components/query-chat/query-chat.component.html", "src/app/features/development/components/analytical-report/chat/components/chat-summary-header/chat-summary-header.component.ts", "src/app/features/development/components/analytical-report/chat/components/chat-summary-header/chat-summary-header.component.html", "src/app/features/development/components/analytical-report/chat/components/chat-footer-preview/chat-footer-preview.component.ts", "src/app/features/development/components/analytical-report/chat/components/chat-footer-preview/chat-footer-preview.component.html", "src/app/core/services/telemetry-data-collection.service.ts", "src/app/features/development/components/analytical-report/analytical-report.component.ts", "src/app/features/development/components/analytical-report/analytical-report.component.html"],
  "sourcesContent": ["import { Injectable, ElementRef } from '@angular/core';\nimport {\n  DashboardLayout,\n  Block,\n  LayoutSection,\n} from '../models/analytics-dashboard.interface';\nimport { isDefined, isNullOrUndefined } from '../../../../../../shared/utils';\n\nexport interface ResponsiveBreakpoints {\n  mobile: number;\n  tablet: number;\n  desktop: number;\n}\n\nexport interface LayoutOptions {\n  enableAnimations?: boolean;\n  responsiveBreakpoints?: ResponsiveBreakpoints;\n  gapSizePx?: number;\n  minBlockHeight?: number;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DashboardLayoutService {\n  private readonly defaultBreakpoints: ResponsiveBreakpoints = {\n    mobile: 768,\n    tablet: 1024,\n    desktop: 1200,\n  };\n\n  private readonly defaultOptions: LayoutOptions = {\n    enableAnimations: true,\n    responsiveBreakpoints: this.defaultBreakpoints,\n    gapSizePx: 16,\n    minBlockHeight: 200,\n  };\n\n  private resizeObserver?: ResizeObserver;\n\n  /**\n   * Apply AI-controlled layout to the dashboard container\n   */\n  applyLayout(\n    container: ElementRef,\n    layout: DashboardLayout,\n    blocks: Block[],\n    options: LayoutOptions = {},\n  ): void {\n    const opts = { ...this.defaultOptions, ...options };\n    const element = container.nativeElement as HTMLElement;\n\n    if (isNullOrUndefined(element)) {\n      return;\n    }\n\n    try {\n      // Apply base grid configuration from AI response\n      this.configureGridSystem(element, layout, opts);\n\n      // Position individual blocks according to AI layout\n      this.positionBlocks(element, layout, blocks, opts);\n\n      // Setup responsive behavior\n      this.setupResponsiveLayout(element, layout, blocks, opts);\n\n      // Enable layout animations if requested\n      if (isDefined(opts.enableAnimations)) {\n        this.enableLayoutAnimations(element);\n      }\n    } catch {\n      this.fallbackLayout(element, blocks, opts);\n    }\n  }\n\n  /**\n   * Configure the CSS Grid system based on AI layout specifications\n   */\n  private configureGridSystem(\n    element: HTMLElement,\n    layout: DashboardLayout,\n    options: LayoutOptions,\n  ): void {\n    // Apply AI-controlled grid configuration\n    element.style.display = 'grid';\n    element.style.gridTemplateColumns = `repeat(${layout.grid.columns}, 1fr)`;\n    element.style.gap = `${layout.grid.gap ?? options.gapSizePx}px`;\n    element.style.gridAutoRows = 'minmax(auto, max-content)';\n\n    // Set container styles for optimal rendering\n    element.style.padding = `${options.gapSizePx}px`;\n    element.style.minHeight = '100%';\n    element.style.width = '100%';\n\n    // Add CSS class for dashboard-specific styling\n    element.classList.add('dashboard-grid-container');\n  }\n\n  /**\n   * Position blocks according to AI-determined layout sections\n   */\n  private positionBlocks(\n    container: HTMLElement,\n    layout: DashboardLayout,\n    blocks: Block[],\n    options: LayoutOptions,\n  ): void {\n    for (const section of layout.sections) {\n      this.positionSection(container, section, blocks, options);\n    }\n  }\n\n  /**\n   * Position individual section and its contained blocks\n   */\n  private positionSection(\n    container: HTMLElement,\n    section: LayoutSection,\n    blocks: Block[],\n    options: LayoutOptions,\n  ): void {\n    for (const [index, blockId] of section.blocks.entries()) {\n      const block = blocks.find((b) => b.block_id === blockId);\n      if (!block) {\n        continue;\n      }\n\n      const blockElement = container.querySelector(\n        `[data-block-id=\"${blockId}\"]`,\n      ) as HTMLElement;\n      if (isNullOrUndefined(blockElement)) {\n        continue;\n      }\n\n      this.applyBlockPosition(blockElement, block, section, index, options);\n    }\n  }\n\n  /**\n   * Apply positioning to individual block element\n   */\n  private applyBlockPosition(\n    element: HTMLElement,\n    block: Block,\n    section: LayoutSection,\n    indexInSection: number,\n    options: LayoutOptions,\n  ): void {\n    // Use block's custom layout if provided, otherwise use section positioning\n    if (isDefined(block.layout?.position?.gridArea)) {\n      element.style.gridArea = block.layout?.position?.gridArea;\n    } else {\n      const { row, col, colSpan } = section.position;\n\n      // For full-width sections (12 columns), stack blocks vertically\n      // Each block gets the full width and its own row\n      if (colSpan >= 12) {\n        const blockRow = row + indexInSection;\n        element.style.gridArea = `${blockRow} / ${col} / ${blockRow + 1} / ${col + colSpan}`;\n      } else {\n        // For partial-width sections, try to fit blocks side by side\n        const blocksPerRow = Math.max(1, Math.floor(colSpan / 3)); // Minimum 3 cols per block\n        const blockColSpan = Math.floor(colSpan / blocksPerRow);\n        const blockRow = row + Math.floor(indexInSection / blocksPerRow);\n        const blockCol = col + (indexInSection % blocksPerRow) * blockColSpan;\n\n        element.style.gridArea = `${blockRow} / ${blockCol} / ${blockRow + 1} / ${blockCol + blockColSpan}`;\n      }\n    }\n\n    // Apply visual styling based on block priority and theme\n    this.applyBlockStyling(element, block, options);\n  }\n\n  /**\n   * Apply visual styling to block based on AI specifications\n   */\n  private applyBlockStyling(\n    element: HTMLElement,\n    block: Block,\n    options: LayoutOptions,\n  ): void {\n    // Add priority class for visual hierarchy\n    element.classList.add(`priority-${block.priority}`);\n\n    // Apply theme-based styling\n    if (block.visual?.theme) {\n      element.classList.add(`theme-${block.visual.theme}`);\n    }\n\n    // Apply elevation (shadow depth)\n    if (isDefined(block.visual?.elevation)) {\n      element.classList.add(`elevation-${block.visual?.elevation}`);\n    }\n\n    // Ensure minimum height for better UX\n    element.style.minHeight = `${options.minBlockHeight}px`;\n\n    // Add block type class for specific styling\n    element.classList.add(`block-type-${block.block_type}`);\n  }\n\n  /**\n   * Setup responsive layout behavior\n   */\n  private setupResponsiveLayout(\n    container: HTMLElement,\n    layout: DashboardLayout,\n    blocks: Block[],\n    options: LayoutOptions,\n  ): void {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n\n    this.resizeObserver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        const width = entry.contentRect.width;\n        this.adjustLayoutForScreenSize(\n          container,\n          layout,\n          blocks,\n          width,\n          options,\n        );\n      }\n    });\n\n    this.resizeObserver.observe(container);\n\n    // Initial responsive adjustment\n    const currentWidth = container.offsetWidth;\n    this.adjustLayoutForScreenSize(\n      container,\n      layout,\n      blocks,\n      currentWidth,\n      options,\n    );\n  }\n\n  /**\n   * Adjust layout based on screen size\n   */\n  private adjustLayoutForScreenSize(\n    container: HTMLElement,\n    layout: DashboardLayout,\n    blocks: Block[],\n    width: number,\n    options: LayoutOptions,\n  ): void {\n    const breakpoints = options.responsiveBreakpoints as ResponsiveBreakpoints;\n\n    if (width <= breakpoints.mobile) {\n      this.applyMobileLayout(container, blocks);\n    } else if (width <= breakpoints.tablet) {\n      this.applyTabletLayout(container, layout);\n    } else {\n      this.applyDesktopLayout(container, layout, blocks);\n    }\n  }\n\n  /**\n   * Apply mobile-optimized layout (single column)\n   */\n  private applyMobileLayout(container: HTMLElement, blocks: Block[]): void {\n    container.style.gridTemplateColumns = '1fr';\n    container.style.gap = '12px';\n    container.style.padding = '12px';\n\n    // Reset all blocks to auto-flow in single column\n    for (const [index, element] of Array.from(\n      container.querySelectorAll('[data-block-id]'),\n    ).entries()) {\n      const htmlElement = element as HTMLElement;\n      htmlElement.style.gridArea = 'auto';\n      htmlElement.style.order = blocks[index]?.priority?.toString() || '0';\n    }\n  }\n\n  /**\n   * Apply tablet-optimized layout (reduced columns)\n   */\n  private applyTabletLayout(\n    container: HTMLElement,\n    layout: DashboardLayout,\n  ): void {\n    const tabletColumns = Math.min(8, layout.grid.columns);\n    container.style.gridTemplateColumns = `repeat(${tabletColumns}, 1fr)`;\n\n    // Adjust block spans for tablet\n    for (const section of layout.sections) {\n      const scaleFactor = tabletColumns / layout.grid.columns;\n      for (const blockId of section.blocks) {\n        const blockElement = container.querySelector(\n          `[data-block-id=\"${blockId}\"]`,\n        ) as HTMLElement;\n        if (isDefined(blockElement)) {\n          const newColSpan = Math.max(\n            1,\n            Math.floor(section.position.colSpan * scaleFactor),\n          );\n          const { row, col } = section.position;\n          blockElement.style.gridArea = `${row} / ${Math.floor(col * scaleFactor)} / ${row + 1} / ${Math.floor(col * scaleFactor) + newColSpan}`;\n        }\n      }\n    }\n  }\n\n  /**\n   * Apply full desktop layout\n   */\n  private applyDesktopLayout(\n    container: HTMLElement,\n    layout: DashboardLayout,\n    blocks: Block[],\n  ): void {\n    // Restore original layout configuration\n    this.configureGridSystem(container, layout, this.defaultOptions);\n    this.positionBlocks(container, layout, blocks, this.defaultOptions);\n  }\n\n  /**\n   * Enable smooth layout animations\n   */\n  private enableLayoutAnimations(container: HTMLElement): void {\n    container.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';\n\n    for (const element of container.querySelectorAll('[data-block-id]')) {\n      const htmlElement = element as HTMLElement;\n      htmlElement.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';\n    }\n  }\n\n  /**\n   * Fallback layout when AI layout fails\n   */\n  private fallbackLayout(\n    container: HTMLElement,\n    blocks: Block[],\n    options: LayoutOptions,\n  ): void {\n    // Simple auto-flow grid as fallback\n    container.style.display = 'grid';\n    container.style.gridTemplateColumns =\n      'repeat(auto-fit, minmax(300px, 1fr))';\n    container.style.gap = `${options.gapSizePx}px`;\n    container.style.padding = `${options.gapSizePx}px`;\n\n    // Reset all block positions to auto\n    for (const [index, element] of Array.from(\n      container.querySelectorAll('[data-block-id]'),\n    ).entries()) {\n      const htmlElement = element as HTMLElement;\n      htmlElement.style.gridArea = 'auto';\n      htmlElement.style.order = blocks[index]?.priority?.toString() || '0';\n    }\n  }\n\n  /**\n   * Calculate optimal layout based on block content and screen size\n   */\n  calculateOptimalLayout(\n    blocks: Block[],\n    containerWidth: number,\n  ): DashboardLayout {\n    const columns = this.calculateOptimalColumns(containerWidth);\n    const sections = this.calculateOptimalSections(blocks, columns);\n\n    return {\n      type: 'dashboard',\n      grid: {\n        columns,\n        rows: 'auto',\n        gap: 16,\n      },\n      sections,\n    };\n  }\n\n  /**\n   * Calculate optimal number of columns based on container width\n   */\n  private calculateOptimalColumns(width: number): number {\n    if (width < 768) return 1;\n    if (width < 1024) return 8;\n    if (width < 1440) return 12;\n    return 16;\n  }\n\n  /**\n   * Calculate optimal section arrangement\n   */\n  private calculateOptimalSections(\n    blocks: Block[],\n    columns: number,\n  ): LayoutSection[] {\n    const sections: LayoutSection[] = [];\n    let currentRow = 1;\n    let currentCol = 1;\n\n    for (const block of [...blocks].sort((a, b) => a.priority - b.priority)) {\n      const colSpan = this.calculateBlockColSpan(block, columns);\n\n      // Move to next row if block doesn't fit\n      if (currentCol + colSpan > columns + 1) {\n        currentRow++;\n        currentCol = 1;\n      }\n\n      sections.push({\n        id: `section-${block.block_id}`,\n        title: block.block_type,\n        position: {\n          row: currentRow,\n          col: currentCol,\n          colSpan,\n        },\n        blocks: [block.block_id],\n      });\n\n      currentCol += colSpan;\n    }\n\n    return sections;\n  }\n\n  /**\n   * Calculate optimal column span for a block type\n   */\n  private calculateBlockColSpan(block: Block, totalColumns: number): number {\n    const baseSpan = {\n      summary: Math.min(totalColumns, 12),\n      kpi: Math.min(Math.floor(totalColumns / 3), 4),\n      chart: Math.min(Math.floor(totalColumns / 2), 6),\n      alert: Math.min(Math.floor(totalColumns / 2), 6),\n      table: Math.min(totalColumns, 12),\n      recommendation: Math.min(Math.floor(totalColumns / 3), 4),\n      map_markers: Math.min(Math.floor(totalColumns / 2), 8),\n    };\n\n    return baseSpan[block.block_type] || Math.floor(totalColumns / 3);\n  }\n\n  /**\n   * Cleanup method to destroy observers and clear cache\n   */\n  destroy(): void {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = undefined;\n    }\n  }\n}\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  SummaryBlock,\n  Highlight,\n} from '../../models/analytics-dashboard.interface';\n\n@Component({\n  selector: 'app-summary-block',\n  imports: [CommonModule],\n  templateUrl: './summary-block.component.html',\n  styleUrls: ['./summary-block.component.scss'],\n})\nexport class SummaryBlockComponent {\n  @Input() block!: SummaryBlock;\n\n  getThemeClass(): string {\n    if (this.block.visual?.theme) {\n      return `theme-${this.block.visual.theme}`;\n    }\n    return 'theme-primary';\n  }\n\n  getHighlightClass(highlight: Highlight): string[] {\n    const classes = [`severity-${highlight.severity}`];\n\n    if (highlight.trend) {\n      classes.push(`trend-${highlight.trend}`);\n    }\n\n    return classes;\n  }\n\n  getTrendIcon(trend: string): string {\n    switch (trend) {\n      case 'up':\n        return 'trend-up';\n      case 'down':\n        return 'trend-down';\n      case 'stable':\n        return 'trend-stable';\n      default:\n        return '';\n    }\n  }\n}\n", "<div class=\"summary-block\" [ngClass]=\"getThemeClass()\">\n  <div class=\"summary-header\">\n    <h3 class=\"summary-title\">{{ block.content.title }}</h3>\n  </div>\n\n  <div class=\"summary-narrative\">\n    <p>{{ block.content.narrative }}</p>\n  </div>\n\n  @if (block.content.highlights.length > 0) {\n    <div class=\"highlights\">\n      @for (highlight of block.content.highlights; track highlight) {\n        <div class=\"highlight-item\" [ngClass]=\"getHighlightClass(highlight)\">\n          <div class=\"highlight-content\">\n            <div class=\"highlight-value\">\n              {{ highlight.value }}\n              @if (highlight.trend) {\n                <i\n                  [ngClass]=\"getTrendIcon(highlight.trend)\"\n                  [attr.aria-label]=\"highlight.trend + ' trend'\"\n                ></i>\n              }\n            </div>\n            <div class=\"highlight-label\">{{ highlight.label }}</div>\n          </div>\n          <div\n            class=\"highlight-indicator\"\n            [ngClass]=\"'severity-' + highlight.severity\"\n          ></div>\n        </div>\n      }\n    </div>\n  }\n</div>\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  KPIBlock,\n  KPIMetric,\n  MetricComparison,\n} from '../../models/analytics-dashboard.interface';\n\n@Component({\n  selector: 'app-kpi-block',\n  imports: [CommonModule],\n  templateUrl: './kpi-block.component.html',\n  styleUrls: ['./kpi-block.component.scss'],\n})\nexport class KpiBlockComponent {\n  @Input() block!: KPIBlock;\n\n  trackByMetric(index: number, metric: KPIMetric): string {\n    return metric.label;\n  }\n\n  getBlockClasses(): string[] {\n    const classes = ['kpi-block'];\n\n    if (this.block.visual?.theme) {\n      classes.push(`theme-${this.block.visual.theme}`);\n    }\n\n    return classes;\n  }\n\n  getOrientationClass(): string {\n    return `orientation-${this.block.content.orientation}`;\n  }\n\n  getMetricClasses(metric: KPIMetric): string[] {\n    const classes: string[] = [];\n\n    if (metric.comparison) {\n      classes.push('has-comparison');\n    }\n\n    return classes;\n  }\n\n  formatValue(value: number, format: string): string {\n    switch (format) {\n      case 'currency':\n        return new Intl.NumberFormat('en-ZA', {\n          style: 'currency',\n          currency: 'ZAR',\n          minimumFractionDigits: 0,\n          maximumFractionDigits: 0,\n        }).format(value);\n\n      case 'percentage':\n        return value.toFixed(1);\n\n      case 'duration': {\n        const hours = Math.floor(value / 60);\n        const minutes = value % 60;\n        if (hours > 0) {\n          return `${hours}h ${minutes}m`;\n        }\n        return `${minutes}m`;\n      }\n\n      case 'number':\n      default:\n        return new Intl.NumberFormat('en-ZA').format(value);\n    }\n  }\n\n  formatPercentage(value: number): string {\n    const formatted = Math.abs(value).toFixed(1);\n    return `${formatted}%`;\n  }\n\n  getComparisonClass(comparison: MetricComparison): string {\n    return comparison.is_improvement ? 'improvement' : 'decline';\n  }\n\n  getTrendIcon(trend: string): string {\n    switch (trend) {\n      case 'up':\n        return 'trend-up';\n      case 'down':\n        return 'trend-down';\n      case 'stable':\n        return 'trend-stable';\n      default:\n        return '';\n    }\n  }\n}\n", "<div class=\"kpi-block\" [ngClass]=\"getBlockClasses()\">\n  <div class=\"kpi-header\">\n    <h4 class=\"kpi-title\">{{ block.content.title }}</h4>\n  </div>\n\n  <div class=\"metrics-container\" [ngClass]=\"getOrientationClass()\">\n    @for (\n      metric of block.content.metrics;\n      track trackByMetric($index, metric)\n    ) {\n      <div class=\"metric-item\" [ngClass]=\"getMetricClasses(metric)\">\n        <div class=\"metric-main\">\n          <div class=\"metric-value\">\n            {{ formatValue(metric.value, metric.format) }}{{ metric.unit }}\n          </div>\n          <div class=\"metric-label\">{{ metric.label }}</div>\n        </div>\n        @if (metric.comparison) {\n          <div\n            class=\"metric-comparison\"\n            [ngClass]=\"getComparisonClass(metric.comparison)\"\n          >\n            <div class=\"comparison-indicator\">\n              <i\n                [ngClass]=\"getTrendIcon(metric.comparison.trend)\"\n                [attr.aria-label]=\"metric.comparison.trend + ' trend'\"\n              ></i>\n              <span class=\"comparison-percentage\">\n                {{ formatPercentage(metric.comparison.change_percentage) }}\n              </span>\n            </div>\n            <div class=\"comparison-label\">\n              vs\n              {{ formatValue(metric.comparison.previous_value, metric.format)\n              }}{{ metric.unit }}\n            </div>\n          </div>\n        }\n      </div>\n    }\n  </div>\n</div>\n", "import {\n  Component,\n  Input,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  ElementRef,\n  AfterViewInit,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ChartBlock } from '../../models/analytics-dashboard.interface';\nimport { Chart, ChartConfiguration, ChartType, registerables } from 'chart.js';\nimport { isDefined } from '../../../../../../../shared/utils';\n\n// Register Chart.js components\nChart.register(...registerables);\n\n@Component({\n  selector: 'app-chart-block',\n  imports: [CommonModule],\n  templateUrl: './chart-block.component.html',\n  styleUrls: ['./chart-block.component.scss'],\n})\nexport class ChartBlockComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() block!: ChartBlock;\n  @ViewChild('chartCanvas', { static: true })\n  chartCanvas!: ElementRef<HTMLCanvasElement>;\n  @ViewChild('chartContainer') chartContainer!: ElementRef;\n\n  private chart?: Chart;\n  isLoading = true;\n  showCustomLegend = false;\n  legendItems: { label: string; color: string; value: string }[] = [];\n\n  private readonly colorPalette = [\n    '#3b82f6',\n    '#ef4444',\n    '#22c55e',\n    '#f59e0b',\n    '#8b5cf6',\n    '#06b6d4',\n    '#f97316',\n    '#84cc16',\n    '#ec4899',\n    '#6b7280',\n    '#14b8a6',\n    '#f43f5e',\n  ];\n\n  ngOnInit() {\n    this.prepareLegendData();\n  }\n\n  ngAfterViewInit() {\n    // Small delay to ensure DOM is ready\n    setTimeout(() => {\n      this.createChart();\n    }, 100);\n  }\n\n  ngOnDestroy() {\n    if (this.chart) {\n      this.chart.destroy();\n    }\n  }\n\n  getBlockClasses(): string[] {\n    const classes = ['chart-block'];\n\n    if (this.block.visual?.theme) {\n      classes.push(`theme-${this.block.visual.theme}`);\n    }\n\n    return classes;\n  }\n\n  private createChart() {\n    const ctx = this.chartCanvas.nativeElement.getContext('2d');\n    if (!ctx) return;\n\n    const config = this.getChartConfig();\n\n    try {\n      this.chart = new Chart(ctx, config);\n      this.isLoading = false;\n    } catch (error) {\n      console.error('Error creating chart:', error);\n      this.isLoading = false;\n    }\n  }\n\n  private getChartConfig(): ChartConfiguration {\n    const baseConfig: ChartConfiguration = {\n      type: this.getChartType(),\n      data: this.getChartData(),\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        interaction: {\n          intersect: false,\n          mode: 'index',\n        },\n        plugins: {\n          legend: {\n            display: !this.showCustomLegend,\n            position: 'bottom',\n            labels: {\n              padding: 20,\n              usePointStyle: true,\n              color:\n                getComputedStyle(document.documentElement).getPropertyValue(\n                  '--text-color',\n                ) || '#374151',\n            },\n          },\n          tooltip: {\n            mode: 'index',\n            intersect: false,\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            titleColor: '#fff',\n            bodyColor: '#fff',\n            borderColor: 'rgba(255, 255, 255, 0.1)',\n            borderWidth: 1,\n            cornerRadius: 8,\n            displayColors: true,\n            callbacks: {\n              label: (context) => {\n                let label = context.dataset.label ?? '';\n                if (label) {\n                  label += ': ';\n                }\n                label += this.formatTooltipValue(\n                  context.parsed.y ?? context.parsed,\n                );\n                return label;\n              },\n            },\n          },\n        },\n        scales: this.getScalesConfig(),\n        animation: {\n          duration: 1000,\n          easing: 'easeOutQuart',\n        },\n      },\n    };\n\n    // Add specific configurations for different chart types\n    if (\n      this.block.content.chart_type === 'line' ||\n      this.block.content.chart_type === 'area'\n    ) {\n      if (baseConfig.options) {\n        baseConfig.options.elements = {\n          line: {\n            tension: 0.4,\n          },\n          point: {\n            radius: 4,\n            hoverRadius: 8,\n            borderWidth: 2,\n          },\n        };\n      }\n    }\n\n    return baseConfig;\n  }\n\n  private getChartType(): ChartType {\n    const typeMapping: Record<string, ChartType> = {\n      line: 'line',\n      bar: 'bar',\n      pie: 'pie',\n      area: 'line',\n      scatter: 'scatter',\n      donut: 'doughnut',\n    };\n\n    return typeMapping[this.block.content.chart_type] || 'bar';\n  }\n\n  private getChartData() {\n    const data = this.block.content.data;\n\n    if (['pie', 'donut'].includes(this.block.content.chart_type)) {\n      return {\n        labels: data.map((d) => d.label),\n        datasets: [\n          {\n            data: data.map((d) => d.value),\n            backgroundColor: data.map(\n              (d, i) =>\n                d.color ?? this.colorPalette[i % this.colorPalette.length],\n            ),\n            borderWidth: 3,\n            borderColor: '#fff',\n            hoverBorderWidth: 5,\n            hoverOffset: 10,\n          },\n        ],\n      };\n    }\n\n    const isArea = this.block.content.chart_type === 'area';\n    const baseColor = this.colorPalette[0];\n\n    return {\n      labels: data.map((d) => d.label),\n      datasets: [\n        {\n          label: this.block.content.y_axis ?? 'Value',\n          data: data.map((d) => d.value),\n          backgroundColor:\n            this.block.content.chart_type === 'line' || isArea\n              ? isArea\n                ? this.hexToRgba(baseColor, 0.2)\n                : this.hexToRgba(baseColor, 0.1)\n              : data.map(\n                  (d, i) =>\n                    d.color ?? this.colorPalette[i % this.colorPalette.length],\n                ),\n          borderColor: baseColor,\n          borderWidth: 3,\n          fill: isArea,\n          pointBackgroundColor: baseColor,\n          pointBorderColor: '#fff',\n          pointBorderWidth: 2,\n          pointHoverBackgroundColor: '#fff',\n          pointHoverBorderColor: baseColor,\n          pointHoverBorderWidth: 3,\n        },\n      ],\n    };\n  }\n\n  private getScalesConfig() {\n    if (['pie', 'donut'].includes(this.block.content.chart_type)) {\n      return {};\n    }\n\n    const textColor =\n      getComputedStyle(document.documentElement).getPropertyValue(\n        '--text-color-secondary',\n      ) || '#6b7280';\n    const gridColor =\n      getComputedStyle(document.documentElement).getPropertyValue(\n        '--surface-200',\n      ) || '#e5e7eb';\n\n    return {\n      x: {\n        display: true,\n        title: {\n          display:\n            isDefined(this.block.content.x_axis) &&\n            this.block.content.x_axis !== '',\n          text: this.block.content.x_axis,\n          color: textColor,\n        },\n        ticks: {\n          color: textColor,\n        },\n        grid: {\n          color: gridColor,\n        },\n      },\n      y: {\n        display: true,\n        title: {\n          display:\n            isDefined(this.block.content.y_axis) &&\n            this.block.content.y_axis !== '',\n          text: this.block.content.y_axis,\n          color: textColor,\n        },\n        ticks: {\n          color: textColor,\n          callback: (value: number | string) => {\n            return this.formatAxisValue(value as number);\n          },\n        },\n        grid: {\n          color: gridColor,\n        },\n      },\n    };\n  }\n\n  private prepareLegendData() {\n    if (['pie', 'donut'].includes(this.block.content.chart_type)) {\n      this.showCustomLegend = true;\n      this.legendItems = this.block.content.data.map((item, index) => ({\n        label: item.label,\n        color:\n          item.color ?? this.colorPalette[index % this.colorPalette.length],\n        value: this.formatTooltipValue(item.value),\n      }));\n    }\n  }\n\n  private formatTooltipValue(value: number): string {\n    return new Intl.NumberFormat('en-ZA').format(value);\n  }\n\n  private formatAxisValue(value: number): string {\n    if (value >= 1000000) {\n      return (value / 1000000).toFixed(1) + 'M';\n    } else if (value >= 1000) {\n      return (value / 1000).toFixed(1) + 'K';\n    }\n    return value.toString();\n  }\n\n  private hexToRgba(hex: string, alpha: number): string {\n    const r = Number.parseInt(hex.slice(1, 3), 16);\n    const g = Number.parseInt(hex.slice(3, 5), 16);\n    const b = Number.parseInt(hex.slice(5, 7), 16);\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n  }\n\n  downloadChart() {\n    if (this.chart) {\n      const url = this.chart.toBase64Image('image/png', 1);\n      const link = document.createElement('a');\n      link.download = `${this.block.content.title ?? 'chart'}.png`;\n      link.href = url;\n      link.click();\n    }\n  }\n}\n", "<div class=\"chart-block\" [ngClass]=\"getBlockClasses()\">\n  @if (block.content.title) {\n    <div class=\"chart-header\">\n      <h4 class=\"chart-title\">{{ block.content.title }}</h4>\n      <div class=\"chart-actions\">\n        <button\n          class=\"action-btn\"\n          (click)=\"downloadChart()\"\n          title=\"Download Chart\"\n        >\n          <i class=\"download-icon\">‚¨á</i>\n        </button>\n      </div>\n    </div>\n  }\n\n  <div class=\"chart-container\" #chartContainer>\n    <canvas #chartCanvas></canvas>\n    @if (isLoading) {\n      <div class=\"chart-loading\">\n        <div class=\"loading-spinner\"></div>\n        <p>Loading chart...</p>\n      </div>\n    }\n  </div>\n\n  @if (block.content.description) {\n    <div class=\"chart-description\">\n      <p>{{ block.content.description }}</p>\n    </div>\n  }\n\n  @if (showCustomLegend) {\n    <div class=\"chart-legend\">\n      <div class=\"legend-items\">\n        @for (item of legendItems; track item) {\n          <div class=\"legend-item\">\n            <!-- eslint-disable-next-line @angular-eslint/template/no-inline-styles -->\n            <span\n              class=\"legend-color\"\n              [style.background-color]=\"item.color\"\n            ></span>\n            <span class=\"legend-label\">{{ item.label }}</span>\n            <span class=\"legend-value\">{{ item.value }}</span>\n          </div>\n        }\n      </div>\n    </div>\n  }\n</div>\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  AlertBlock,\n  AffectedEntity,\n} from '../../models/analytics-dashboard.interface';\n\n@Component({\n  selector: 'app-alert-block',\n  imports: [CommonModule],\n  templateUrl: './alert-block.component.html',\n  styleUrl: './alert-block.component.scss',\n})\nexport class AlertBlockComponent {\n  @Input() block!: AlertBlock;\n\n  trackByEntity(index: number, entity: AffectedEntity): string {\n    return entity.id;\n  }\n\n  getAlertClasses(): string[] {\n    return [`severity-${this.block.content.severity}`];\n  }\n\n  getSeverityIconClass(): string {\n    return `icon-${this.block.content.severity}`;\n  }\n\n  getSeverityIcon(): string {\n    switch (this.block.content.severity) {\n      case 'critical':\n        return '‚ö†';\n      case 'warning':\n        return '‚ö°';\n      case 'info':\n        return '‚Ñπ';\n      default:\n        return '‚Ä¢';\n    }\n  }\n\n  getEntityTypeLabel(): string {\n    const entities = this.block.content.affected_entities;\n    if (entities.length === 0) return '';\n\n    const types = [...new Set(entities.map((e) => e.type))];\n    if (types.length === 1) {\n      return types[0] + (entities.length > 1 ? 's' : '');\n    }\n    return 'entities';\n  }\n\n  getEntityIcon(type: string): string {\n    switch (type) {\n      case 'vehicle':\n        return 'üöó';\n      case 'driver':\n        return 'üë§';\n      case 'geofence':\n        return 'üìç';\n      default:\n        return '‚Ä¢';\n    }\n  }\n\n  formatTimestamp(timestamp: string): string {\n    try {\n      const date = new Date(timestamp);\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffMins = Math.floor(diffMs / 60000);\n      const diffHours = Math.floor(diffMins / 60);\n      const diffDays = Math.floor(diffHours / 24);\n\n      if (diffMins < 1) {\n        return 'Just now';\n      } else if (diffMins < 60) {\n        return `${diffMins}m ago`;\n      } else if (diffHours < 24) {\n        return `${diffHours}h ago`;\n      } else if (diffDays < 7) {\n        return `${diffDays}d ago`;\n      } else {\n        return date.toLocaleDateString('en-ZA', {\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit',\n        });\n      }\n    } catch {\n      return timestamp;\n    }\n  }\n\n  takeAction(): void {\n    // Implement action logic here\n  }\n\n  dismissAlert(): void {\n    // Implement dismiss logic here\n  }\n}\n", "<div class=\"alert-block\" [ngClass]=\"getAlertClasses()\">\n  <div class=\"alert-header\">\n    <div class=\"alert-icon-title\">\n      <div class=\"alert-icon\" [ngClass]=\"getSeverityIconClass()\">\n        <i [ngClass]=\"getSeverityIcon()\"></i>\n      </div>\n      <div class=\"alert-title-timestamp\">\n        <h4 class=\"alert-title\">{{ block.content.title }}</h4>\n        <span class=\"alert-timestamp\">{{\n          formatTimestamp(block.content.timestamp)\n        }}</span>\n      </div>\n    </div>\n    <div\n      class=\"alert-severity-badge\"\n      [ngClass]=\"'severity-' + block.content.severity\"\n    >\n      {{ block.content.severity.toUpperCase() }}\n    </div>\n  </div>\n\n  <div class=\"alert-content\">\n    <p class=\"alert-message\">{{ block.content.message }}</p>\n\n    @if (block.content.affected_entities.length > 0) {\n      <div class=\"affected-entities\">\n        <div class=\"affected-header\">\n          <strong>Affected {{ getEntityTypeLabel() }}:</strong>\n        </div>\n        <div class=\"entity-list\">\n          @for (\n            entity of block.content.affected_entities;\n            track trackByEntity($index, entity)\n          ) {\n            <div class=\"entity-item\" [ngClass]=\"'entity-' + entity.type\">\n              <div class=\"entity-icon\">\n                <i [ngClass]=\"getEntityIcon(entity.type)\"></i>\n              </div>\n              <div class=\"entity-info\">\n                <span class=\"entity-name\">{{ entity.name }}</span>\n                <span class=\"entity-id\">{{ entity.id }}</span>\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    }\n\n    @if (block.content.is_actionable && block.content.suggested_action) {\n      <div class=\"suggested-action\">\n        <div class=\"action-header\">\n          <i class=\"action-icon\">üí°</i>\n          <strong>Recommended Action:</strong>\n        </div>\n        <p class=\"action-description\">{{ block.content.suggested_action }}</p>\n        <div class=\"action-buttons\">\n          <button class=\"btn btn-primary\" (click)=\"takeAction()\">\n            Take Action\n          </button>\n          <button class=\"btn btn-secondary\" (click)=\"dismissAlert()\">\n            Dismiss\n          </button>\n        </div>\n      </div>\n    }\n\n    @if (block.content.source_event_id) {\n      <div class=\"source-event\">\n        <small class=\"event-id\"\n          >Event ID: {{ block.content.source_event_id }}</small\n        >\n      </div>\n    }\n  </div>\n</div>\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  TableBlock,\n  AggregationType,\n  ColumnSummaryConfig,\n} from '../../models/analytics-dashboard.interface';\nimport { isNullOrUndefined } from '../../../../../../../shared/utils';\n\ninterface SortState {\n  column: number;\n  direction: 'asc' | 'desc';\n}\n\n@Component({\n  selector: 'app-table-block',\n  imports: [CommonModule],\n  templateUrl: './table-block.component.html',\n  styleUrls: ['./table-block.component.scss'],\n})\nexport class TableBlockComponent {\n  @Input() block!: TableBlock;\n\n  sortState: SortState = { column: -1, direction: 'asc' };\n  isFullscreen = false;\n  hoveredRow = -1;\n\n  get showSummary(): boolean {\n    return this.block.content.summary?.enabled ?? true;\n  }\n\n  trackByRow(index: number, row: (string | number)[]): string {\n    return `row-${index}-${row.join('-')}`;\n  }\n\n  getBlockClasses(): string[] {\n    const classes = ['table-block'];\n\n    if (this.block.visual?.theme) {\n      classes.push(`theme-${this.block.visual.theme}`);\n    }\n\n    return classes;\n  }\n\n  get sortedRows(): (string | number)[][] {\n    const rows = this.block.content.rows;\n    if (!Array.isArray(rows) || rows.length === 0) {\n      return [];\n    }\n\n    if (\n      this.sortState.column === -1 ||\n      isNullOrUndefined(this.block.content.sortable)\n    ) {\n      return rows;\n    }\n\n    return [...rows].sort((a, b) => {\n      const aVal = a[this.sortState.column];\n      const bVal = b[this.sortState.column];\n\n      const modifier = this.sortState.direction === 'asc' ? 1 : -1;\n\n      if (typeof aVal === 'number' && typeof bVal === 'number') {\n        return (aVal - bVal) * modifier;\n      }\n\n      return String(aVal).localeCompare(String(bVal)) * modifier;\n    });\n  }\n\n  sortColumn(columnIndex: number): void {\n    if (isNullOrUndefined(this.block.content.sortable)) return;\n\n    if (this.sortState.column === columnIndex) {\n      this.sortState.direction =\n        this.sortState.direction === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortState.column = columnIndex;\n      this.sortState.direction = 'asc';\n    }\n  }\n\n  getSortIcon(columnIndex: number): string {\n    if (this.sortState.column !== columnIndex) {\n      return 'sort-none';\n    }\n    return this.sortState.direction === 'asc' ? 'sort-asc' : 'sort-desc';\n  }\n\n  getSortAttribute(columnIndex: number): string | null {\n    if (\n      this.sortState.column !== columnIndex ||\n      isNullOrUndefined(this.block.content.sortable)\n    ) {\n      return null;\n    }\n    return this.sortState.direction === 'asc' ? 'ascending' : 'descending';\n  }\n\n  formatCell(cell: string | number, columnIndex: number): string {\n    if (typeof cell === 'number') {\n      const header = this.block.content.headers[columnIndex].toLowerCase();\n\n      if (header.includes('percent') || header.includes('%')) {\n        return `${cell.toFixed(1)}%`;\n      }\n      if (header.includes('distance') || header.includes('km')) {\n        return `${cell.toLocaleString()} km`;\n      }\n      if (\n        header.includes('currency') ||\n        header.includes('cost') ||\n        header.includes('price')\n      ) {\n        return new Intl.NumberFormat('en-ZA', {\n          style: 'currency',\n          currency: 'ZAR',\n          minimumFractionDigits: 0,\n        }).format(cell);\n      }\n      if (header.includes('duration') || header.includes('time')) {\n        const hours = Math.floor(cell / 60);\n        const minutes = cell % 60;\n        if (hours > 0) {\n          return `${hours}h ${minutes}m`;\n        }\n        return `${minutes}m`;\n      }\n\n      return cell.toLocaleString();\n    }\n\n    return String(cell);\n  }\n\n  isNumeric(value: string | number): boolean {\n    return typeof value === 'number';\n  }\n\n  getCellTooltip(cell: string | number, columnIndex: number): string {\n    const header = this.block.content.headers[columnIndex];\n    return `${header}: ${this.formatCell(cell, columnIndex)}`;\n  }\n\n  shouldShowTrend(cell: string | number, columnIndex: number): boolean {\n    // Only show trends for numeric columns with percentage or change indicators\n    return (\n      typeof cell === 'number' &&\n      (this.block.content.headers[columnIndex]\n        .toLowerCase()\n        .includes('change') ||\n        this.block.content.headers[columnIndex]\n          .toLowerCase()\n          .includes('growth'))\n    );\n  }\n\n  getTrendClass(cell: string | number): string {\n    if (typeof cell !== 'number') return 'trend-neutral';\n\n    if (cell > 0) return 'trend-positive';\n    if (cell < 0) return 'trend-negative';\n    return 'trend-neutral';\n  }\n\n  getTrendIndicator(cell: string | number): string {\n    if (typeof cell !== 'number') return '';\n\n    if (cell > 0) return '‚Üó';\n    if (cell < 0) return '‚Üò';\n    return '‚Üí';\n  }\n\n  onRowHover(rowIndex: number): void {\n    this.hoveredRow = rowIndex;\n  }\n\n  onRowLeave(): void {\n    this.hoveredRow = -1;\n  }\n\n  getSummaryStats(): { label: string; value: string }[] {\n    const rows = this.sortedRows;\n    if (rows.length === 0) return [];\n\n    const stats: { label: string; value: string }[] = [\n      { label: 'Records', value: rows.length.toString() },\n    ];\n\n    // Check if summary is explicitly disabled\n    if (this.block.content.summary?.enabled === false) {\n      return stats;\n    }\n\n    // Get columns to summarize\n    const columnsToSummarize = this.getColumnsToSummarize();\n\n    // Calculate aggregations for each configured column\n    for (const config of columnsToSummarize) {\n      const header = this.block.content.headers[config.column_index];\n      const values = rows\n        .map((row) => row[config.column_index])\n        .filter((val): val is number => typeof val === 'number');\n\n      if (values.length === 0) continue;\n\n      const format =\n        config.format ?? this.detectColumnFormat(config.column_index);\n      const columnLabel = config.label ?? header;\n\n      for (const aggType of config.aggregations) {\n        const aggValue = this.calculateAggregation(values, aggType);\n        const formattedValue = this.formatAggregationValue(aggValue, format);\n        const aggLabel = this.getAggregationLabel(aggType, columnLabel);\n\n        stats.push({ label: aggLabel, value: formattedValue });\n      }\n    }\n\n    return stats;\n  }\n\n  private getColumnsToSummarize(): ColumnSummaryConfig[] {\n    // If explicitly configured, use that\n    if (\n      this.block.content.summary?.columns !== undefined &&\n      this.block.content.summary.columns.length > 0\n    ) {\n      return this.block.content.summary.columns;\n    }\n\n    // Otherwise, return empty array to show only record count\n    // This prevents misleading automatic aggregations on unknown column types\n    return [];\n  }\n\n  private calculateAggregation(\n    values: number[],\n    type: AggregationType,\n  ): number {\n    if (values.length === 0) return 0;\n\n    switch (type) {\n      case 'count':\n        return values.length;\n      case 'sum':\n        return values.reduce((acc, val) => acc + val, 0);\n      case 'average':\n        return values.reduce((acc, val) => acc + val, 0) / values.length;\n      case 'min':\n        return Math.min(...values);\n      case 'max':\n        return Math.max(...values);\n      case 'median': {\n        const sorted = [...values].sort((a, b) => a - b);\n        const mid = Math.floor(sorted.length / 2);\n        return sorted.length % 2 === 0\n          ? (sorted[mid - 1] + sorted[mid]) / 2\n          : sorted[mid];\n      }\n      default:\n        return 0;\n    }\n  }\n\n  private formatAggregationValue(\n    value: number,\n    format: 'number' | 'percentage' | 'currency' | 'duration',\n  ): string {\n    switch (format) {\n      case 'percentage':\n        return `${value.toFixed(1)}%`;\n      case 'currency':\n        return new Intl.NumberFormat('en-ZA', {\n          style: 'currency',\n          currency: 'ZAR',\n          minimumFractionDigits: 0,\n        }).format(value);\n      case 'duration': {\n        const hours = Math.floor(value / 60);\n        const minutes = Math.round(value % 60);\n        if (hours > 0) {\n          return `${hours}h ${minutes}m`;\n        }\n        return `${minutes}m`;\n      }\n      case 'number':\n      default:\n        return value.toLocaleString(undefined, {\n          minimumFractionDigits: 0,\n          maximumFractionDigits: 2,\n        });\n    }\n  }\n\n  private getAggregationLabel(\n    type: AggregationType,\n    columnLabel: string,\n  ): string {\n    switch (type) {\n      case 'count':\n        return `${columnLabel} Count`;\n      case 'sum':\n        return `${columnLabel} Total`;\n      case 'average':\n        return `${columnLabel} Avg`;\n      case 'min':\n        return `${columnLabel} Min`;\n      case 'max':\n        return `${columnLabel} Max`;\n      case 'median':\n        return `${columnLabel} Median`;\n      default:\n        return columnLabel;\n    }\n  }\n\n  private detectColumnFormat(\n    columnIndex: number,\n  ): 'number' | 'percentage' | 'currency' | 'duration' {\n    const header = this.block.content.headers[columnIndex].toLowerCase();\n\n    if (header.includes('percent') || header.includes('%')) {\n      return 'percentage';\n    }\n    if (\n      header.includes('currency') ||\n      header.includes('cost') ||\n      header.includes('price')\n    ) {\n      return 'currency';\n    }\n    if (header.includes('duration') || header.includes('time')) {\n      return 'duration';\n    }\n\n    return 'number';\n  }\n\n  private isProbablyIdColumn(columnIndex: number): boolean {\n    const header = this.block.content.headers[columnIndex].toLowerCase();\n    return (\n      header.includes('id') ||\n      header.includes('number') ||\n      header.includes('code') ||\n      header === '#'\n    );\n  }\n\n  toggleFullscreen(): void {\n    this.isFullscreen = !this.isFullscreen;\n  }\n\n  exportTable(): void {\n    const headers = this.block.content.headers.join(',');\n    const rows = this.sortedRows\n      .map((row) => row.map((cell) => `\"${cell}\"`).join(','))\n      .join('\\n');\n\n    const csv = `${headers}\\n${rows}`;\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = globalThis.URL.createObjectURL(blob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${this.block.content.title ?? 'table-data'}.csv`;\n    link.click();\n\n    globalThis.URL.revokeObjectURL(url);\n  }\n}\n", "<div class=\"table-block\" [ngClass]=\"getBlockClasses()\">\n  @if (block.content.title) {\n    <div class=\"table-header\">\n      <h4 class=\"table-title\">{{ block.content.title }}</h4>\n      <div class=\"table-actions\">\n        <button class=\"action-btn\" (click)=\"exportTable()\" title=\"Export Data\">\n          <i class=\"export-icon\">üìä</i>\n        </button>\n        <button\n          class=\"action-btn\"\n          (click)=\"toggleFullscreen()\"\n          title=\"Toggle Fullscreen\"\n        >\n          <i class=\"fullscreen-icon\">‚õ∂</i>\n        </button>\n      </div>\n    </div>\n  }\n\n  <div class=\"table-container\" [ngClass]=\"{ fullscreen: isFullscreen }\">\n    <div class=\"table-responsive\">\n      <table class=\"data-table\">\n        <thead>\n          <tr class=\"header-row\">\n            @for (\n              header of block.content.headers;\n              track header;\n              let i = $index\n            ) {\n              <th\n                class=\"header-cell\"\n                [ngClass]=\"{\n                  sortable: block.content.sortable,\n                  highlight: i === block.content.highlight_column,\n                  'sorted-asc':\n                    sortState.column === i && sortState.direction === 'asc',\n                  'sorted-desc':\n                    sortState.column === i && sortState.direction === 'desc',\n                }\"\n                (click)=\"sortColumn(i)\"\n                [attr.aria-sort]=\"getSortAttribute(i)\"\n              >\n                <div class=\"header-content\">\n                  <span class=\"header-text\">{{ header }}</span>\n                  @if (block.content.sortable) {\n                    <div class=\"sort-indicator\">\n                      <i class=\"sort-icon\" [ngClass]=\"getSortIcon(i)\"></i>\n                    </div>\n                  }\n                </div>\n              </th>\n            }\n          </tr>\n        </thead>\n\n        <tbody>\n          @for (\n            row of sortedRows;\n            track trackByRow(rowIndex, row);\n            let rowIndex = $index\n          ) {\n            <tr\n              class=\"data-row\"\n              [ngClass]=\"{ 'highlight-row': rowIndex % 2 === 0 }\"\n              (mouseenter)=\"onRowHover(rowIndex)\"\n              (mouseleave)=\"onRowLeave()\"\n            >\n              @for (cell of row; track cell; let cellIndex = $index) {\n                <td\n                  class=\"data-cell\"\n                  [ngClass]=\"{\n                    highlight: cellIndex === block.content.highlight_column,\n                    numeric: isNumeric(cell),\n                    text: !isNumeric(cell),\n                  }\"\n                  [title]=\"getCellTooltip(cell, cellIndex)\"\n                >\n                  <div class=\"cell-content\">\n                    <span class=\"cell-value\">{{\n                      formatCell(cell, cellIndex)\n                    }}</span>\n                    @if (shouldShowTrend(cell, cellIndex)) {\n                      <span class=\"cell-trend\" [ngClass]=\"getTrendClass(cell)\">\n                        {{ getTrendIndicator(cell) }}\n                      </span>\n                    }\n                  </div>\n                </td>\n              }\n            </tr>\n          }\n\n          @if (sortedRows.length === 0) {\n            <tr class=\"empty-row\">\n              <td\n                [attr.colspan]=\"block.content.headers.length\"\n                class=\"empty-cell\"\n              >\n                <div class=\"empty-state\">\n                  <i class=\"empty-icon\">üìã</i>\n                  <p>No data available</p>\n                </div>\n              </td>\n            </tr>\n          }\n        </tbody>\n      </table>\n    </div>\n\n    @if (block.content.rows.length) {\n      <div class=\"table-footer\">\n        <div class=\"row-count\">\n          Showing {{ sortedRows.length }}\n          {{ sortedRows.length === 1 ? 'row' : 'rows' }}\n        </div>\n        @if (showSummary) {\n          <div class=\"table-summary\">\n            @for (\n              summary of getSummaryStats();\n              track summary;\n              let last = $last\n            ) {\n              <span>\n                {{ summary.label }}: <strong>{{ summary.value }}</strong>\n                @if (!last) {\n                  <span> ‚Ä¢ </span>\n                }\n              </span>\n            }\n          </div>\n        }\n      </div>\n    }\n  </div>\n</div>\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  RecommendationBlock,\n  Recommendation,\n} from '../../models/analytics-dashboard.interface';\n\n@Component({\n  selector: 'app-recommendation-block',\n  imports: [CommonModule],\n  templateUrl: './recommendation-block.component.html',\n  styleUrls: ['./recommendation-block.component.scss'],\n})\nexport class RecommendationBlockComponent {\n  @Input() block!: RecommendationBlock;\n\n  getBlockClasses(): string[] {\n    const classes: string[] = [];\n\n    if (this.block.visual?.theme) {\n      classes.push(`theme-${this.block.visual.theme}`);\n    }\n\n    return classes;\n  }\n\n  getPriorityClass(): string {\n    return `priority-${this.block.content.priority}`;\n  }\n\n  getActionableCount(): number {\n    return this.block.content.recommendations.filter((r) => r.actionable)\n      .length;\n  }\n\n  trackByRec(index: number, rec: Recommendation): string {\n    return rec.id;\n  }\n}\n", "<div class=\"recommendation-block\" [ngClass]=\"getBlockClasses()\">\n  <!-- Header -->\n  <div class=\"block-header\">\n    <div class=\"header-content\">\n      <span class=\"header-icon\">üí°</span>\n      <h3 class=\"block-title\">{{ block.content.title }}</h3>\n    </div>\n    <span class=\"priority-badge\" [ngClass]=\"getPriorityClass()\">\n      {{ block.content.priority | uppercase }}\n    </span>\n  </div>\n\n  <!-- Recommendations List -->\n  <div class=\"recommendations-list\">\n    @for (rec of block.content.recommendations; track trackByRec($index, rec)) {\n      <div\n        class=\"recommendation-card\"\n        [ngClass]=\"{ actionable: rec.actionable }\"\n      >\n        <div class=\"rec-header\">\n          <div class=\"rec-title-row\">\n            @if (rec.actionable) {\n              <span class=\"actionable-icon\">‚úì</span>\n            }\n            <h4 class=\"rec-title\">{{ rec.title }}</h4>\n          </div>\n          <span class=\"category-badge\">{{ rec.category }}</span>\n        </div>\n        <p class=\"rec-description\">{{ rec.description }}</p>\n        <div class=\"rec-footer\">\n          <div class=\"impact-section\">\n            <span class=\"impact-label\">Impact:</span>\n            <span class=\"impact-text\">{{ rec.impact }}</span>\n          </div>\n          <div class=\"effort-indicator\">\n            <span class=\"effort-label\">Effort:</span>\n            <span class=\"effort-dots\" [ngClass]=\"'effort-' + rec.effort\">\n              <span class=\"dot\"></span>\n              <span class=\"dot\"></span>\n              <span class=\"dot\"></span>\n            </span>\n            <span class=\"effort-text\">{{ rec.effort | titlecase }}</span>\n          </div>\n        </div>\n      </div>\n    }\n  </div>\n\n  <!-- Footer -->\n  @if (getActionableCount() > 0) {\n    <div class=\"block-footer\">\n      <span class=\"footer-stat\">\n        {{ getActionableCount() }} actionable recommendation{{\n          getActionableCount() > 1 ? 's' : ''\n        }}\n      </span>\n    </div>\n  }\n</div>\n", "import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnDestroy,\n  ViewChild,\n  ElementRef,\n  AfterViewInit,\n  inject,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  AnalyticsResponse,\n  Block,\n} from './models/analytics-dashboard.interface';\nimport { DashboardLayoutService } from './services/dashboard-layout.service';\n\n// Import all block components\nimport { SummaryBlockComponent } from './blocks/summary-block/summary-block.component';\nimport { KpiBlockComponent } from './blocks/kpi-block/kpi-block.component';\nimport { ChartBlockComponent } from './blocks/chart-block/chart-block.component';\nimport { AlertBlockComponent } from './blocks/alert-block/alert-block.component';\nimport { TableBlockComponent } from './blocks/table-block/table-block.component';\nimport { RecommendationBlockComponent } from './blocks/recommendation-block/recommendation-block.component';\n\n@Component({\n  selector: 'app-analytics-dashboard',\n  imports: [\n    CommonModule,\n    SummaryBlockComponent,\n    KpiBlockComponent,\n    ChartBlockComponent,\n    AlertBlockComponent,\n    TableBlockComponent,\n    RecommendationBlockComponent,\n  ],\n  templateUrl: './analytics-dashboard.component.html',\n  styleUrl: './analytics-dashboard.component.scss',\n  animations: [\n    // Will be added if Angular animations are available\n  ],\n})\nexport class AnalyticsDashboardComponent implements OnDestroy, AfterViewInit {\n  private readonly layoutService = inject(DashboardLayoutService);\n\n  @Input() response?: AnalyticsResponse;\n  @Input() isLoading = false;\n  @Input() error?: string;\n  @Input() loadingProgress = 0;\n  @Input() userQuery?: string;\n  @Input() dateRange?: string;\n  @Input() vehicleNames?: string[];\n  @Input() clientTimeZone?: string;\n  @Input() clientLanguage?: string;\n\n  showAllVehicles = false;\n\n  @Output() recalculate = new EventEmitter<void>();\n\n  @ViewChild('dashboardContainer') dashboardContainer?: ElementRef;\n\n  isRecalculating = false;\n\n  ngAfterViewInit(): void {\n    if (this.response?.response?.layout && this.dashboardContainer) {\n      setTimeout(() => this.applyLayout(), 100);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.layoutService.destroy();\n  }\n\n  trackByBlock(index: number, block: Block): string {\n    return block.block_id;\n  }\n\n  applyLayout(): void {\n    if (this.response?.response?.layout && this.dashboardContainer) {\n      this.layoutService.applyLayout(\n        this.dashboardContainer,\n        this.response.response.layout,\n        this.response.response.blocks,\n        {\n          enableAnimations: true,\n          gapSizePx: 16,\n          minBlockHeight: 200,\n        },\n      );\n    }\n  }\n\n  getBlockClasses(block: Block): string[] {\n    const classes = [`block-${block.block_type}`, `priority-${block.priority}`];\n\n    if (block.visual?.theme) {\n      classes.push(`theme-${block.visual.theme}`);\n    }\n\n    if (\n      block.visual?.elevation !== undefined &&\n      block.visual.elevation !== null\n    ) {\n      classes.push(`elevation-${block.visual.elevation}`);\n    }\n\n    return classes;\n  }\n\n  formatTimestamp(timestamp: string): string {\n    try {\n      const locale =\n        this.clientLanguage != null && this.clientLanguage === 'af'\n          ? 'af-ZA'\n          : 'en-ZA';\n      const options: Intl.DateTimeFormatOptions = {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZone: this.clientTimeZone ?? 'Africa/Johannesburg',\n      };\n      return new Date(timestamp).toLocaleString(locale, options);\n    } catch {\n      return timestamp;\n    }\n  }\n\n  getAlertCount(): number {\n    return (\n      this.response?.response?.blocks?.filter((b) => b.block_type === 'alert')\n        .length ?? 0\n    );\n  }\n\n  getVehicleDisplayText(): string {\n    if (!this.vehicleNames || this.vehicleNames.length === 0) {\n      return 'No vehicles selected';\n    }\n    if (this.vehicleNames.length <= 2) {\n      return this.vehicleNames.join(', ');\n    }\n    return `${this.vehicleNames.slice(0, 2).join(', ')} +${this.vehicleNames.length - 2} more`;\n  }\n\n  onRecalculate(): void {\n    this.isRecalculating = true;\n    this.recalculate.emit();\n  }\n\n  /** Called by parent when recalculation is complete */\n  resetRecalculatingState(): void {\n    this.isRecalculating = false;\n  }\n\n  onPrint(): void {\n    window.print();\n  }\n\n  onRetry(): void {\n    // Emit retry event - parent component should handle\n    this.error = undefined;\n  }\n\n  onDismissError(): void {\n    this.error = undefined;\n  }\n}\n", "<div\n  class=\"analytics-dashboard\"\n  [attr.data-layout-type]=\"response?.response?.layout?.type\"\n>\n  <!-- Dashboard Header -->\n  @if (response?.response?.summary) {\n    <div class=\"dashboard-header\">\n      <!-- Top Bar with Title and Actions -->\n      <div class=\"header-top-bar\">\n        <div class=\"header-branding\">\n          <div class=\"brand-icon\">\n            <svg\n              width=\"32\"\n              height=\"32\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <rect\n                x=\"3\"\n                y=\"3\"\n                width=\"7\"\n                height=\"7\"\n                rx=\"1\"\n                fill=\"currentColor\"\n                opacity=\"0.8\"\n              />\n              <rect\n                x=\"14\"\n                y=\"3\"\n                width=\"7\"\n                height=\"7\"\n                rx=\"1\"\n                fill=\"currentColor\"\n                opacity=\"0.6\"\n              />\n              <rect\n                x=\"3\"\n                y=\"14\"\n                width=\"7\"\n                height=\"7\"\n                rx=\"1\"\n                fill=\"currentColor\"\n                opacity=\"0.6\"\n              />\n              <rect\n                x=\"14\"\n                y=\"14\"\n                width=\"7\"\n                height=\"7\"\n                rx=\"1\"\n                fill=\"currentColor\"\n                opacity=\"0.4\"\n              />\n            </svg>\n          </div>\n          <div class=\"brand-text\">\n            <h1 class=\"dashboard-title\">Fleet Analytics Report</h1>\n            <span class=\"dashboard-subtitle\">AI-Powered Insights</span>\n          </div>\n        </div>\n        <div class=\"header-actions\">\n          <button\n            class=\"action-btn recalculate-btn\"\n            (click)=\"onRecalculate()\"\n            [disabled]=\"isRecalculating\"\n          >\n            @if (!isRecalculating) {\n              <svg\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n              >\n                <path d=\"M23 4v6h-6M1 20v-6h6\" />\n                <path\n                  d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\"\n                />\n              </svg>\n            }\n            @if (isRecalculating) {\n              <svg\n                class=\"spinning\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n              >\n                <circle\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke-dasharray=\"32\"\n                  stroke-dashoffset=\"32\"\n                />\n              </svg>\n            }\n            {{ isRecalculating ? 'Regenerating...' : 'Regenerate' }}\n          </button>\n          <button class=\"action-btn print-btn\" (click)=\"onPrint()\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n            >\n              <polyline points=\"6,9 6,2 18,2 18,9\" />\n              <path\n                d=\"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\"\n              />\n              <rect x=\"6\" y=\"14\" width=\"12\" height=\"8\" />\n            </svg>\n            Print\n          </button>\n        </div>\n      </div>\n      <!-- Report Context Cards -->\n      <div class=\"context-cards\">\n        <!-- Date Range Card -->\n        <div class=\"context-card date-card\">\n          <div class=\"card-icon\">\n            <svg\n              width=\"20\"\n              height=\"20\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n            >\n              <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n              <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\n              <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\n              <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\n            </svg>\n          </div>\n          <div class=\"card-content\">\n            <span class=\"card-label\">Analysis Period</span>\n            <span class=\"card-value\">{{ dateRange || 'Not specified' }}</span>\n          </div>\n        </div>\n        <!-- Vehicles Card -->\n        <div\n          class=\"context-card vehicles-card\"\n          [class.expanded]=\"showAllVehicles\"\n        >\n          <div class=\"card-icon\">\n            <svg\n              width=\"20\"\n              height=\"20\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n            >\n              <path\n                d=\"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9L18 10l-2-4H8L6 10l-2.5 1.1C2.7 11.3 2 12.1 2 13v3c0 .6.4 1 1 1h2\"\n              />\n              <circle cx=\"7\" cy=\"17\" r=\"2\" />\n              <circle cx=\"17\" cy=\"17\" r=\"2\" />\n            </svg>\n          </div>\n          <div class=\"card-content\">\n            <div class=\"card-header-row\">\n              <span class=\"card-label\"\n                >Vehicles ({{ vehicleNames?.length || 0 }})</span\n              >\n              @if (vehicleNames && vehicleNames.length > 2) {\n                <button\n                  class=\"toggle-vehicles-btn\"\n                  (click)=\"showAllVehicles = !showAllVehicles\"\n                >\n                  {{ showAllVehicles ? 'Show less' : 'Show all' }}\n                  <svg\n                    width=\"12\"\n                    height=\"12\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    stroke-width=\"2\"\n                    [class.rotated]=\"showAllVehicles\"\n                  >\n                    <polyline points=\"6,9 12,15 18,9\" />\n                  </svg>\n                </button>\n              }\n            </div>\n            @if (!showAllVehicles) {\n              <div class=\"vehicles-container\">\n                <span class=\"card-value\">{{ getVehicleDisplayText() }}</span>\n              </div>\n            }\n            @if (showAllVehicles) {\n              <div class=\"vehicles-list-full\">\n                @for (vehicle of vehicleNames; track vehicle) {\n                  <span class=\"vehicle-chip\">{{ vehicle }}</span>\n                }\n              </div>\n            }\n          </div>\n        </div>\n        <!-- Query Card -->\n        @if (userQuery) {\n          <div class=\"context-card query-card\">\n            <div class=\"card-icon\">\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n              >\n                <circle cx=\"11\" cy=\"11\" r=\"8\" />\n                <path d=\"m21 21-4.35-4.35\" />\n              </svg>\n            </div>\n            <div class=\"card-content\">\n              <span class=\"card-label\">Analysis Query</span>\n              <span class=\"card-value query-text\">\"{{ userQuery }}\"</span>\n            </div>\n          </div>\n        }\n      </div>\n      <!-- Summary Section -->\n      <div class=\"summary-section\">\n        <div class=\"summary-header\">\n          <svg\n            width=\"18\"\n            height=\"18\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n          >\n            <path\n              d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"\n            />\n            <polyline points=\"14,2 14,8 20,8\" />\n            <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\n            <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\n          </svg>\n          <span>Executive Summary</span>\n        </div>\n        <p class=\"summary-text\">{{ response?.response?.summary }}</p>\n      </div>\n      <!-- Metadata Footer -->\n      <div class=\"header-meta\">\n        <div class=\"meta-item\">\n          <svg\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n          >\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <polyline points=\"12,6 12,12 16,14\" />\n          </svg>\n          <span\n            >Generated:\n            {{ formatTimestamp(response?.response?.timestamp || '') }}</span\n          >\n        </div>\n        <div class=\"meta-item\">\n          <svg\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n          >\n            <path\n              d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"\n            />\n            <path\n              d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"\n            />\n          </svg>\n          <span>ID: {{ response?.response?.request_id }}</span>\n        </div>\n      </div>\n    </div>\n  }\n\n  <!-- Loading State -->\n  @if (isLoading) {\n    <div class=\"loading-container\">\n      <div class=\"loading-content\">\n        <div class=\"loading-spinner\">\n          <div class=\"spinner-ring\"></div>\n          <div class=\"spinner-ring\"></div>\n          <div class=\"spinner-ring\"></div>\n        </div>\n        <h3 class=\"loading-title\">Generating Analytics Dashboard</h3>\n        <p class=\"loading-description\">\n          AI is analyzing your data and creating interactive visualizations...\n        </p>\n        @if (loadingProgress > 0) {\n          <div class=\"loading-progress\">\n            <div class=\"progress-bar\">\n              <!-- eslint-disable-next-line @angular-eslint/template/no-inline-styles -->\n              <div\n                class=\"progress-fill\"\n                [style.width.%]=\"loadingProgress\"\n              ></div>\n            </div>\n            <span class=\"progress-text\">{{ loadingProgress }}%</span>\n          </div>\n        }\n      </div>\n    </div>\n  }\n\n  <!-- Error State -->\n  @if (error) {\n    <div class=\"error-container\">\n      <div class=\"error-content\">\n        <div class=\"error-icon\">‚ö†Ô∏è</div>\n        <h4 class=\"error-title\">Dashboard Generation Failed</h4>\n        <p class=\"error-message\">{{ error }}</p>\n        <div class=\"error-actions\">\n          <button class=\"btn btn-primary\" (click)=\"onRetry()\">\n            <i class=\"retry-icon\">üîÑ</i>\n            Retry\n          </button>\n          <button class=\"btn btn-secondary\" (click)=\"onDismissError()\">\n            Dismiss\n          </button>\n        </div>\n      </div>\n    </div>\n  }\n\n  <!-- Dashboard Content -->\n  @if (response?.response && !isLoading && !error) {\n    <div class=\"dashboard-content\" #dashboardContainer>\n      <!-- Dynamic Block Rendering -->\n      @for (\n        block of response?.response?.blocks;\n        track trackByBlock($index, block)\n      ) {\n        <div\n          [attr.data-block-id]=\"block.block_id\"\n          [attr.data-block-type]=\"block.block_type\"\n          class=\"dashboard-block\"\n          [ngClass]=\"getBlockClasses(block)\"\n        >\n          <!-- Summary Block -->\n          @if (block.block_type === 'summary') {\n            <app-summary-block [block]=\"block\"> </app-summary-block>\n          }\n          <!-- KPI Block -->\n          @if (block.block_type === 'kpi') {\n            <app-kpi-block [block]=\"block\"> </app-kpi-block>\n          }\n          <!-- Chart Block -->\n          @if (block.block_type === 'chart') {\n            <app-chart-block [block]=\"block\"> </app-chart-block>\n          }\n          <!-- Alert Block -->\n          @if (block.block_type === 'alert') {\n            <app-alert-block [block]=\"block\"> </app-alert-block>\n          }\n          <!-- Table Block -->\n          @if (block.block_type === 'table') {\n            <app-table-block [block]=\"block\"> </app-table-block>\n          }\n          <!-- Recommendation Block -->\n          @if (block.block_type === 'recommendation') {\n            <app-recommendation-block [block]=\"block\">\n            </app-recommendation-block>\n          }\n          <!-- Map Block (Future) -->\n          @if (block.block_type === 'map_markers') {\n            <div class=\"placeholder-block\">\n              <h4>Map Block</h4>\n              <p>Coming Soon</p>\n            </div>\n          }\n        </div>\n      }\n      <!-- Empty State -->\n      @if (response?.response?.blocks?.length === 0) {\n        <div class=\"empty-dashboard\">\n          <div class=\"empty-content\">\n            <div class=\"empty-icon\">üìä</div>\n            <h3>No Analytics Available</h3>\n            <p>No data blocks were generated for this analysis.</p>\n            <button class=\"btn btn-primary\" (click)=\"onRecalculate()\">\n              Generate New Report\n            </button>\n          </div>\n        </div>\n      }\n    </div>\n  }\n\n  <!-- Dashboard Footer -->\n  @if (response?.response && !isLoading && !error) {\n    <div class=\"dashboard-footer\">\n      <div class=\"footer-stats\">\n        <span class=\"stat-item\">\n          <strong>{{ response?.response?.blocks?.length || 0 }}</strong> blocks\n        </span>\n        @if (response?.response?.metadata) {\n          <span class=\"stat-item\">\n            <strong>{{\n              response?.response?.metadata?.generation_time || 'N/A'\n            }}</strong\n            >ms generation time\n          </span>\n        }\n        @if (getAlertCount() > 0) {\n          <span class=\"stat-item\">\n            <strong>{{ getAlertCount() }}</strong> alerts\n          </span>\n        }\n      </div>\n      <div class=\"footer-actions\">\n        <small class=\"powered-by\"> Powered by CypherView AI Analytics </small>\n      </div>\n    </div>\n  }\n</div>\n", "import { Pipe, PipeTransform, inject } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'formatMarkdown',\n})\nexport class FormatMarkdownPipe implements PipeTransform {\n  private readonly sanitizer = inject(DomSanitizer);\n\n  transform(value: string): SafeHtml {\n    if (!value) return '';\n\n    let html = this.escapeHtml(value);\n\n    // Bold: **text** or __text__\n    html = html.replaceAll(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n    html = html.replaceAll(/__(.*?)__/g, '<strong>$1</strong>');\n\n    // Italic: *text* or _text_\n    html = html.replaceAll(/\\*([^*]+)\\*/g, '<em>$1</em>');\n    html = html.replaceAll(/_([^_]+)_/g, '<em>$1</em>');\n\n    // Inline code: `code`\n    html = html.replaceAll(/`([^`]+)`/g, '<code>$1</code>');\n\n    // Blockquotes: > text\n    html = html.replaceAll(/^&gt;\\s*(.*)$/gm, '<blockquote>$1</blockquote>');\n\n    // Unordered lists: ‚Ä¢ or - or *\n    html = html.replaceAll(/^[‚Ä¢*-]\\s+(.*)$/gm, '<li>$1</li>');\n    html = html.replaceAll(/(<li>.*<\\/li>\\n?)+/g, '<ul>$&</ul>');\n\n    // Numbered lists: 1. or 1)\n    html = html.replaceAll(/^\\d+[.)]\\s+(.*)$/gm, '<li>$1</li>');\n\n    // Line breaks\n    html = html.replaceAll('\\n', '<br>');\n\n    // Clean up extra br tags around block elements\n    html = html.replaceAll(/<br><(ul|ol|blockquote)/g, '<$1');\n    html = html.replaceAll(/<\\/(ul|ol|blockquote)><br>/g, '</$1>');\n    html = html.replaceAll('</li><br>', '</li>');\n\n    return this.sanitizer.bypassSecurityTrustHtml(html);\n  }\n\n  private escapeHtml(text: string): string {\n    const map: Record<string, string> = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#039;',\n    };\n    return text.replaceAll(/[&<>\"']/g, (m) => map[m]);\n  }\n}\n", "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { DatePickerModule } from 'primeng/datepicker';\nimport { ButtonModule } from 'primeng/button';\n\nexport interface DateRangeSelection {\n  start: Date;\n  end: Date;\n}\n\n@Component({\n  selector: 'app-inline-date-picker',\n  imports: [CommonModule, FormsModule, DatePickerModule, ButtonModule],\n  templateUrl: './inline-date-picker.component.html',\n  styleUrl: './inline-date-picker.component.scss',\n})\nexport class InlineDatePickerComponent {\n  // Inputs\n  initialStart = input<Date | null>(null);\n  initialEnd = input<Date | null>(null);\n  minDate = input<Date>(\n    new Date(new Date().setFullYear(new Date().getFullYear() - 1)),\n  );\n  maxDate = input<Date>(new Date());\n\n  // Outputs\n  dateRangeSelected = output<DateRangeSelection>();\n\n  // Local state\n  startDate = signal<Date | null>(null);\n  endDate = signal<Date | null>(null);\n\n  // Date presets\n  readonly datePresets = [\n    { label: 'Today', days: 0 },\n    { label: 'Yesterday', days: 1 },\n    { label: 'Last 7 days', days: 7 },\n    { label: 'Last 30 days', days: 30 },\n    { label: 'Last 90 days', days: 90 },\n  ];\n\n  readonly canConfirm = computed(() => {\n    const start = this.startDate();\n    const end = this.endDate();\n    return start !== null && end !== null && start <= end;\n  });\n\n  readonly formattedRange = computed(() => {\n    const start = this.startDate();\n    const end = this.endDate();\n\n    if (!start || !end) return '';\n\n    const formatDate = (date: Date) => {\n      return date.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n      });\n    };\n\n    if (start.toDateString() === end.toDateString()) {\n      return formatDate(start);\n    }\n    return `${formatDate(start)} - ${formatDate(end)}`;\n  });\n\n  selectPreset(days: number): void {\n    const end = new Date();\n    const start = new Date();\n\n    if (days === 0) {\n      // Today\n      this.startDate.set(start);\n      this.endDate.set(end);\n    } else if (days === 1) {\n      // Yesterday\n      start.setDate(start.getDate() - 1);\n      end.setDate(end.getDate() - 1);\n      this.startDate.set(start);\n      this.endDate.set(end);\n    } else {\n      // Last N days\n      start.setDate(start.getDate() - days);\n      this.startDate.set(start);\n      this.endDate.set(end);\n    }\n  }\n\n  onConfirm(): void {\n    const start = this.startDate();\n    const end = this.endDate();\n\n    if (start && end) {\n      this.dateRangeSelected.emit({ start, end });\n    }\n  }\n}\n", "<div class=\"inline-date-picker\">\n  <!-- Date Presets -->\n  <div class=\"date-presets\">\n    @for (preset of datePresets; track preset.label) {\n      <button\n        type=\"button\"\n        class=\"preset-btn\"\n        (click)=\"selectPreset(preset.days)\"\n      >\n        {{ preset.label }}\n      </button>\n    }\n  </div>\n\n  <!-- Date Range Selectors -->\n  <div class=\"date-selectors\">\n    <div class=\"date-field\">\n      <span id=\"start-date-label\" class=\"date-label\">Start Date</span>\n      <p-datepicker\n        [(ngModel)]=\"startDate\"\n        [minDate]=\"minDate()\"\n        [maxDate]=\"endDate() || maxDate()\"\n        [showIcon]=\"true\"\n        dateFormat=\"M dd, yy\"\n        placeholder=\"Select start date\"\n        [showButtonBar]=\"true\"\n        appendTo=\"body\"\n        styleClass=\"compact-calendar\"\n        aria-labelledby=\"start-date-label\"\n      />\n    </div>\n\n    <div class=\"date-separator\">\n      <i class=\"pi pi-arrow-right\" aria-hidden=\"true\"></i>\n    </div>\n\n    <div class=\"date-field\">\n      <span id=\"end-date-label\" class=\"date-label\">End Date</span>\n      <p-datepicker\n        [(ngModel)]=\"endDate\"\n        [minDate]=\"startDate() || minDate()\"\n        [maxDate]=\"maxDate()\"\n        [showIcon]=\"true\"\n        dateFormat=\"M dd, yy\"\n        placeholder=\"Select end date\"\n        [showButtonBar]=\"true\"\n        appendTo=\"body\"\n        styleClass=\"compact-calendar\"\n        aria-labelledby=\"end-date-label\"\n      />\n    </div>\n  </div>\n\n  <!-- Selection Summary & Confirm -->\n  @if (canConfirm()) {\n    <div class=\"selection-summary\">\n      <div class=\"summary-text\">\n        <i class=\"pi pi-calendar-plus\"></i>\n        <span>{{ formattedRange() }}</span>\n      </div>\n      <p-button\n        label=\"Confirm\"\n        icon=\"pi pi-check\"\n        (onClick)=\"onConfirm()\"\n        size=\"small\"\n        styleClass=\"confirm-btn\"\n      />\n    </div>\n  }\n</div>\n", "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ButtonModule } from 'primeng/button';\nimport { InputTextModule } from 'primeng/inputtext';\n\nexport interface Vehicle {\n  id: string;\n  name: string;\n  registration?: string;\n}\n\n@Component({\n  selector: 'app-inline-vehicle-selector',\n  imports: [CommonModule, FormsModule, ButtonModule, InputTextModule],\n  templateUrl: './inline-vehicle-selector.component.html',\n  styleUrl: './inline-vehicle-selector.component.scss',\n})\nexport class InlineVehicleSelectorComponent {\n  // Inputs\n  vehicles = input<Vehicle[]>([]);\n  initialSelection = input<string[]>([]);\n  maxSelection = input<number | null>(null);\n\n  // Outputs\n  vehiclesSelected = output<Vehicle[]>();\n\n  // Local state\n  searchTerm = signal<string>('');\n  selectedIds = signal<Set<string>>(new Set());\n\n  // Computed\n  readonly filteredVehicles = computed(() => {\n    const term = this.searchTerm().toLowerCase();\n    const allVehicles = this.vehicles();\n\n    if (term.length === 0) {\n      return allVehicles;\n    }\n\n    return allVehicles.filter(\n      (v) =>\n        v.name.toLowerCase().includes(term) ||\n        (v.registration?.toLowerCase()?.includes(term) ?? false),\n    );\n  });\n\n  readonly selectedCount = computed(() => this.selectedIds().size);\n\n  readonly canConfirm = computed(() => this.selectedIds().size > 0);\n\n  readonly allSelected = computed(() => {\n    const vehicles = this.vehicles();\n    const selected = this.selectedIds();\n    return vehicles.length > 0 && vehicles.every((v) => selected.has(v.id));\n  });\n\n  readonly selectedVehicles = computed(() => {\n    const ids = this.selectedIds();\n    return this.vehicles().filter((v) => ids.has(v.id));\n  });\n\n  isSelected(id: string): boolean {\n    return this.selectedIds().has(id);\n  }\n\n  toggleVehicle(vehicle: Vehicle): void {\n    const current = new Set(this.selectedIds());\n\n    if (current.has(vehicle.id)) {\n      current.delete(vehicle.id);\n    } else {\n      const max = this.maxSelection();\n      if (max !== null && current.size >= max) {\n        // Already at max, don't add more\n        return;\n      }\n      current.add(vehicle.id);\n    }\n\n    this.selectedIds.set(current);\n  }\n\n  selectAll(): void {\n    const max = this.maxSelection();\n    const allVehicles = this.vehicles();\n\n    if (max !== null && allVehicles.length > max) {\n      // Select first N vehicles up to max\n      const idsToSelect = allVehicles.slice(0, max).map((v) => v.id);\n      this.selectedIds.set(new Set(idsToSelect));\n    } else {\n      this.selectedIds.set(new Set(allVehicles.map((v) => v.id)));\n    }\n  }\n\n  clearAll(): void {\n    this.selectedIds.set(new Set());\n  }\n\n  onConfirm(): void {\n    const selected = this.selectedVehicles();\n    if (selected.length > 0) {\n      this.vehiclesSelected.emit(selected);\n    }\n  }\n}\n", "<div class=\"inline-vehicle-selector\">\n  <!-- Header with Search and Actions -->\n  <div class=\"selector-header\">\n    <div class=\"search-box\">\n      <i class=\"pi pi-search\"></i>\n      <input\n        type=\"text\"\n        pInputText\n        [ngModel]=\"searchTerm()\"\n        (ngModelChange)=\"searchTerm.set($event)\"\n        placeholder=\"Search vehicles...\"\n        class=\"search-input\"\n      />\n    </div>\n    <div class=\"header-actions\">\n      @if (!allSelected()) {\n        <button type=\"button\" class=\"action-btn\" (click)=\"selectAll()\">\n          Select All\n        </button>\n      } @else {\n        <button type=\"button\" class=\"action-btn\" (click)=\"clearAll()\">\n          Clear All\n        </button>\n      }\n    </div>\n  </div>\n\n  <!-- Vehicle List -->\n  <div class=\"vehicle-list\">\n    @if (filteredVehicles().length === 0) {\n      <div class=\"empty-state\">\n        <i class=\"pi pi-car\"></i>\n        <p>No vehicles found</p>\n      </div>\n    } @else {\n      @for (vehicle of filteredVehicles(); track vehicle.id) {\n        <label class=\"vehicle-item\" [class.selected]=\"isSelected(vehicle.id)\">\n          <input\n            type=\"checkbox\"\n            [checked]=\"isSelected(vehicle.id)\"\n            (change)=\"toggleVehicle(vehicle)\"\n          />\n          <div class=\"vehicle-info\">\n            <span class=\"vehicle-name\">{{ vehicle.name }}</span>\n            @if (vehicle.registration) {\n              <span class=\"vehicle-reg\">{{ vehicle.registration }}</span>\n            }\n          </div>\n          @if (isSelected(vehicle.id)) {\n            <i class=\"pi pi-check selected-icon\"></i>\n          }\n        </label>\n      }\n    }\n  </div>\n\n  <!-- Selection Summary & Confirm -->\n  @if (canConfirm()) {\n    <div class=\"selection-summary\">\n      <div class=\"summary-text\">\n        <i class=\"pi pi-car\"></i>\n        <span\n          >{{ selectedCount() }} vehicle{{\n            selectedCount() === 1 ? '' : 's'\n          }}\n          selected</span\n        >\n      </div>\n      <p-button\n        label=\"Confirm\"\n        icon=\"pi pi-check\"\n        (onClick)=\"onConfirm()\"\n        size=\"small\"\n        styleClass=\"confirm-btn\"\n      />\n    </div>\n  }\n</div>\n", "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ButtonModule } from 'primeng/button';\n\nexport interface DataTypeOption {\n  id: string;\n  label: string;\n  description: string;\n  icon: string;\n}\n\nconst DEFAULT_DATA_TYPES: DataTypeOption[] = [\n  {\n    id: 'trips',\n    label: 'Trips',\n    description: 'Journey data with start/end locations and times',\n    icon: 'pi-map-marker',\n  },\n  {\n    id: 'events',\n    label: 'Events',\n    description: 'Driver behavior events like harsh braking, speeding',\n    icon: 'pi-exclamation-triangle',\n  },\n  {\n    id: 'telemetry',\n    label: 'Telemetry',\n    description: 'Real-time sensor data: speed, fuel, engine status',\n    icon: 'pi-chart-line',\n  },\n  {\n    id: 'alerts',\n    label: 'Alerts',\n    description: 'System alerts and notifications',\n    icon: 'pi-bell',\n  },\n];\n\n@Component({\n  selector: 'app-inline-data-type-selector',\n  imports: [CommonModule, ButtonModule],\n  templateUrl: './inline-data-type-selector.component.html',\n  styleUrl: './inline-data-type-selector.component.scss',\n})\nexport class InlineDataTypeSelectorComponent {\n  // Inputs\n  dataTypes = input<DataTypeOption[]>(DEFAULT_DATA_TYPES);\n  initialSelection = input<string[]>([]);\n  collectingTypes = input<string[]>([]); // Types currently being collected (locked)\n\n  // Outputs\n  dataTypesSelected = output<string[]>();\n\n  // Local state\n  selectedIds = signal<Set<string>>(new Set());\n\n  // Computed\n  readonly selectedCount = computed(() => this.selectedIds().size);\n\n  readonly collectingCount = computed(() => this.collectingTypes().length);\n\n  // Only show new selections (excluding already collecting)\n  readonly newSelectionCount = computed(() => {\n    const selected = this.selectedIds();\n    const collecting = new Set(this.collectingTypes());\n    return Array.from(selected).filter((id) => !collecting.has(id)).length;\n  });\n\n  readonly canConfirm = computed(() => this.newSelectionCount() > 0);\n\n  readonly allSelected = computed(() => {\n    const types = this.dataTypes();\n    const selected = this.selectedIds();\n    return types.length > 0 && types.every((t) => selected.has(t.id));\n  });\n\n  readonly hasCollectingTypes = computed(\n    () => this.collectingTypes().length > 0,\n  );\n\n  isSelected(id: string): boolean {\n    return this.selectedIds().has(id);\n  }\n\n  isCollecting(id: string): boolean {\n    return this.collectingTypes().includes(id);\n  }\n\n  toggleDataType(type: DataTypeOption): void {\n    // Don't allow toggling types that are already being collected\n    if (this.isCollecting(type.id)) {\n      return;\n    }\n\n    const current = new Set(this.selectedIds());\n\n    if (current.has(type.id)) {\n      current.delete(type.id);\n    } else {\n      current.add(type.id);\n    }\n\n    this.selectedIds.set(current);\n  }\n\n  selectAll(): void {\n    this.selectedIds.set(new Set(this.dataTypes().map((t) => t.id)));\n  }\n\n  clearAll(): void {\n    // Keep collecting types selected, clear others\n    const collecting = new Set(this.collectingTypes());\n    this.selectedIds.set(collecting);\n  }\n\n  onConfirm(): void {\n    // Only emit newly selected types (not already collecting)\n    const collecting = new Set(this.collectingTypes());\n    const newSelections = Array.from(this.selectedIds()).filter(\n      (id) => !collecting.has(id),\n    );\n\n    if (newSelections.length > 0) {\n      this.dataTypesSelected.emit(newSelections);\n    }\n  }\n}\n", "<div class=\"inline-data-type-selector\">\n  <!-- Header with Actions -->\n  <div class=\"selector-header\">\n    <span class=\"header-label\">Select data to analyze:</span>\n    <div class=\"header-actions\">\n      @if (!allSelected()) {\n        <button type=\"button\" class=\"action-btn\" (click)=\"selectAll()\">\n          Select All\n        </button>\n      } @else {\n        <button type=\"button\" class=\"action-btn\" (click)=\"clearAll()\">\n          Clear All\n        </button>\n      }\n    </div>\n  </div>\n\n  <!-- Data Type Cards -->\n  <div class=\"data-type-grid\">\n    @for (type of dataTypes(); track type.id) {\n      <button\n        type=\"button\"\n        class=\"data-type-card\"\n        [class.selected]=\"isSelected(type.id)\"\n        [class.collecting]=\"isCollecting(type.id)\"\n        [disabled]=\"isCollecting(type.id)\"\n        (click)=\"toggleDataType(type)\"\n      >\n        <div class=\"card-checkbox\">\n          @if (isCollecting(type.id)) {\n            <i class=\"pi pi-spin pi-spinner collecting-spinner\"></i>\n          } @else {\n            <input\n              type=\"checkbox\"\n              [checked]=\"isSelected(type.id)\"\n              (click)=\"$event.stopPropagation()\"\n              (change)=\"toggleDataType(type)\"\n            />\n          }\n        </div>\n        <i class=\"pi {{ type.icon }} card-icon\"></i>\n        <span class=\"card-label\">{{ type.label }}</span>\n        <span class=\"card-description\">\n          @if (isCollecting(type.id)) {\n            Collecting...\n          } @else {\n            {{ type.description }}\n          }\n        </span>\n      </button>\n    }\n  </div>\n\n  <!-- Status when collecting -->\n  @if (hasCollectingTypes()) {\n    <div class=\"collecting-status\">\n      <i class=\"pi pi-info-circle\"></i>\n      <span\n        >{{ collectingCount() }} data type{{\n          collectingCount() === 1 ? '' : 's'\n        }}\n        currently collecting</span\n      >\n    </div>\n  }\n\n  <!-- Selection Summary & Confirm -->\n  @if (canConfirm()) {\n    <div class=\"selection-summary\">\n      <div class=\"summary-text\">\n        <i class=\"pi pi-database\"></i>\n        <span\n          >{{ newSelectionCount() }} new data type{{\n            newSelectionCount() === 1 ? '' : 's'\n          }}\n          to collect</span\n        >\n      </div>\n      <p-button\n        label=\"Add to Collection\"\n        icon=\"pi pi-plus\"\n        (onClick)=\"onConfirm()\"\n        size=\"small\"\n        styleClass=\"confirm-btn\"\n      />\n    </div>\n  } @else if (!hasCollectingTypes() && selectedCount() === 0) {\n    <div class=\"selection-summary\">\n      <div class=\"summary-text\">\n        <i class=\"pi pi-database\"></i>\n        <span>Select data types to collect</span>\n      </div>\n      <p-button\n        label=\"Start Collection\"\n        icon=\"pi pi-play\"\n        [disabled]=\"true\"\n        size=\"small\"\n        styleClass=\"confirm-btn\"\n      />\n    </div>\n  }\n</div>\n", "import { Component, input, output, computed, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ButtonModule } from 'primeng/button';\nimport { CheckboxModule } from 'primeng/checkbox';\nimport { FormsModule } from '@angular/forms';\n\nimport {\n  ChatMessage,\n  SuggestedAction,\n  VehicleOption,\n} from '../../models/chat.interface';\nimport { FormatMarkdownPipe } from '../../pipes/format-markdown.pipe';\nimport {\n  InlineDatePickerComponent,\n  DateRangeSelection,\n} from '../inline-date-picker/inline-date-picker.component';\nimport {\n  InlineVehicleSelectorComponent,\n  Vehicle,\n} from '../inline-vehicle-selector/inline-vehicle-selector.component';\nimport { InlineDataTypeSelectorComponent } from '../inline-data-type-selector/inline-data-type-selector.component';\n\n// Data type values for multi-select detection\nconst DATA_TYPE_VALUES = new Set(['trips', 'events', 'telemetry', 'alerts']);\n\n@Component({\n  selector: 'app-chat-message',\n  imports: [\n    CommonModule,\n    ButtonModule,\n    CheckboxModule,\n    FormsModule,\n    FormatMarkdownPipe,\n    InlineDatePickerComponent,\n    InlineVehicleSelectorComponent,\n    InlineDataTypeSelectorComponent,\n  ],\n  templateUrl: './chat-message.component.html',\n  styleUrl: './chat-message.component.scss',\n})\nexport class ChatMessageComponent {\n  // Inputs\n  message = input.required<ChatMessage>();\n  isDisabled = input<boolean>(false); // Disable interactions (e.g., during data collection)\n  collectingDataTypes = input<string[]>([]); // Data types currently being collected\n\n  // Outputs\n  actionSelected = output<SuggestedAction>();\n  multiActionsSelected = output<SuggestedAction[]>();\n  dateRangeSelected = output<DateRangeSelection>();\n  vehiclesSelected = output<Vehicle[]>();\n  dataTypesSelected = output<string[]>();\n\n  // Local state for multi-select\n  selectedActionIds = signal<Set<string>>(new Set());\n\n  // Computed properties\n  readonly isUser = computed(() => this.message().sender === 'user');\n  readonly isAssistant = computed(() => this.message().sender === 'assistant');\n  readonly isSystem = computed(() => this.message().sender === 'system');\n\n  readonly formattedTime = computed(() =>\n    this.formatTime(this.message().timestamp),\n  );\n\n  readonly suggestedActions = computed(\n    () => this.message().metadata?.suggestedActions ?? [],\n  );\n  readonly hasSuggestedActions = computed(\n    () => this.suggestedActions().length > 0,\n  );\n\n  // Interactive type computed properties\n  readonly interactiveType = computed(\n    () => this.message().metadata?.interactiveType,\n  );\n  readonly hasInteractiveComponent = computed(() => !!this.interactiveType());\n  readonly isDatePicker = computed(\n    () => this.interactiveType() === 'date_picker',\n  );\n  readonly isVehicleSelector = computed(\n    () => this.interactiveType() === 'vehicle_selector',\n  );\n  readonly isDataTypeSelector = computed(\n    () => this.interactiveType() === 'data_type_selector',\n  );\n\n  // Available vehicles for vehicle selector\n  readonly availableVehicles = computed((): Vehicle[] => {\n    const vehicles = this.message().metadata?.availableVehicles ?? [];\n    return vehicles.map((v: VehicleOption) => ({\n      id: v.id,\n      name: v.name,\n      registration: undefined,\n    }));\n  });\n\n  // Selected data types from message metadata (for persistence)\n  readonly selectedDataTypesFromMessage = computed((): string[] => {\n    return this.message().metadata?.selectedDataTypes ?? [];\n  });\n\n  // Check if multi-select mode should be enabled\n  // Now enabled for all suggestions with 2+ options\n  readonly isMultiSelectMode = computed(() => {\n    const actions = this.suggestedActions();\n    return actions.length >= 2;\n  });\n\n  // Check if all suggestions are data type related\n  readonly isDataTypeMultiSelect = computed(() => {\n    const actions = this.suggestedActions();\n    return (\n      actions.length >= 2 &&\n      actions.every((action) =>\n        DATA_TYPE_VALUES.has(action.value.toLowerCase()),\n      )\n    );\n  });\n\n  // Check if an action is selected\n  isActionSelected(actionId: string): boolean {\n    return this.selectedActionIds().has(actionId);\n  }\n\n  // Get selected actions\n  readonly selectedActions = computed(() => {\n    const ids = this.selectedActionIds();\n    return this.suggestedActions().filter((action) => ids.has(action.id));\n  });\n\n  // Check if any actions are selected\n  readonly hasSelectedActions = computed(\n    () => this.selectedActionIds().size > 0,\n  );\n\n  readonly statusIcon = computed(() => {\n    switch (this.message().status) {\n      case 'sending':\n        return 'pi pi-clock';\n      case 'sent':\n        return 'pi pi-check';\n      case 'delivered':\n        return 'pi pi-check-circle';\n      case 'error':\n        return 'pi pi-exclamation-circle';\n      default:\n        return '';\n    }\n  });\n\n  readonly statusClass = computed(() => {\n    return this.message().status === 'error' ? 'text-red-500' : 'text-blue-400';\n  });\n\n  onActionClick(action: SuggestedAction): void {\n    this.actionSelected.emit(action);\n  }\n\n  // Toggle action selection for multi-select mode\n  toggleActionSelection(actionId: string): void {\n    this.selectedActionIds.update((current) => {\n      const newSet = new Set(current);\n      if (newSet.has(actionId)) {\n        newSet.delete(actionId);\n      } else {\n        newSet.add(actionId);\n      }\n      return newSet;\n    });\n  }\n\n  // Select all data type actions\n  selectAllActions(): void {\n    const allIds = this.suggestedActions().map((a) => a.id);\n    this.selectedActionIds.set(new Set(allIds));\n  }\n\n  // Submit selected actions\n  submitSelectedActions(): void {\n    const selected = this.selectedActions();\n    if (selected.length > 0) {\n      this.multiActionsSelected.emit(selected);\n      // Clear selection after submission\n      this.selectedActionIds.set(new Set());\n    }\n  }\n\n  // Handler for inline date picker\n  onDateRangeSelected(dateRange: DateRangeSelection): void {\n    this.dateRangeSelected.emit(dateRange);\n  }\n\n  // Handler for inline vehicle selector\n  onVehiclesSelected(vehicles: Vehicle[]): void {\n    this.vehiclesSelected.emit(vehicles);\n  }\n\n  // Handler for inline data type selector\n  onDataTypesSelected(dataTypes: string[]): void {\n    this.dataTypesSelected.emit(dataTypes);\n  }\n\n  private formatTime(date: Date): string {\n    return date.toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n    });\n  }\n}\n", "<div\n  class=\"message-wrapper\"\n  [class.user-message]=\"isUser()\"\n  [class.assistant-message]=\"isAssistant()\"\n  [class.system-message]=\"isSystem()\"\n>\n  <div class=\"message-bubble\">\n    <!-- Message content with markdown-style rendering -->\n    <div\n      class=\"message-content\"\n      [innerHTML]=\"message().content | formatMarkdown\"\n    ></div>\n\n    <!-- Interactive components for guided conversation -->\n    @if (hasInteractiveComponent()) {\n      <div class=\"interactive-component\">\n        @if (isDatePicker()) {\n          <app-inline-date-picker\n            (dateRangeSelected)=\"onDateRangeSelected($event)\"\n          />\n        }\n        @if (isVehicleSelector()) {\n          <app-inline-vehicle-selector\n            [vehicles]=\"availableVehicles()\"\n            (vehiclesSelected)=\"onVehiclesSelected($event)\"\n          />\n        }\n        @if (isDataTypeSelector()) {\n          <app-inline-data-type-selector\n            [initialSelection]=\"selectedDataTypesFromMessage()\"\n            [collectingTypes]=\"collectingDataTypes()\"\n            (dataTypesSelected)=\"onDataTypesSelected($event)\"\n          />\n        }\n      </div>\n    }\n\n    <!-- Suggested actions (for assistant messages) -->\n    @if (hasSuggestedActions()) {\n      <div\n        class=\"suggested-actions\"\n        [class.multi-select-mode]=\"isMultiSelectMode()\"\n      >\n        @if (isMultiSelectMode()) {\n          <!-- Multi-select mode with checkboxes -->\n          <div class=\"multi-select-header\">\n            <span class=\"multi-select-label\">\n              @if (isDataTypeMultiSelect()) {\n                Select data types to collect:\n              } @else {\n                Select one or more options:\n              }\n            </span>\n            <button\n              type=\"button\"\n              class=\"select-all-btn\"\n              (click)=\"selectAllActions()\"\n            >\n              Select All\n            </button>\n          </div>\n          <div class=\"checkbox-actions\">\n            @for (action of suggestedActions(); track action.id) {\n              <label\n                class=\"checkbox-action\"\n                [class.selected]=\"isActionSelected(action.id)\"\n              >\n                <input\n                  type=\"checkbox\"\n                  [checked]=\"isActionSelected(action.id)\"\n                  (change)=\"toggleActionSelection(action.id)\"\n                />\n                <span class=\"checkbox-label\">{{ action.label }}</span>\n              </label>\n            }\n          </div>\n          <div class=\"multi-select-footer\">\n            <button\n              type=\"button\"\n              class=\"submit-selection-btn\"\n              [disabled]=\"!hasSelectedActions()\"\n              (click)=\"submitSelectedActions()\"\n            >\n              <i class=\"pi pi-check\"></i>\n              @if (isDataTypeMultiSelect()) {\n                Start Data Collection ({{ selectedActionIds().size }} selected)\n              } @else {\n                Apply Selected ({{ selectedActionIds().size }})\n              }\n            </button>\n          </div>\n        } @else {\n          <!-- Single-select mode with buttons (only 1 suggestion) -->\n          @for (action of suggestedActions(); track action.id) {\n            <button\n              class=\"action-chip\"\n              (click)=\"onActionClick(action)\"\n              type=\"button\"\n            >\n              {{ action.label }}\n            </button>\n          }\n        }\n      </div>\n    }\n\n    <!-- Message footer with time and status -->\n    <div class=\"message-footer\">\n      <span class=\"message-time\">{{ formattedTime() }}</span>\n      @if (isUser()) {\n        <span class=\"message-status\" [ngClass]=\"statusClass()\">\n          <i [ngClass]=\"statusIcon()\"></i>\n        </span>\n      }\n    </div>\n  </div>\n</div>\n", "import {\n  Component,\n  input,\n  output,\n  signal,\n  ElementRef,\n  ViewChild,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ButtonModule } from 'primeng/button';\nimport { TooltipModule } from 'primeng/tooltip';\n\n@Component({\n  selector: 'app-chat-input',\n  imports: [CommonModule, FormsModule, ButtonModule, TooltipModule],\n  templateUrl: './chat-input.component.html',\n  styleUrl: './chat-input.component.scss',\n})\nexport class ChatInputComponent {\n  // Inputs\n  disabled = input(false);\n  placeholder = input('Type your message...');\n  isLoading = input(false);\n\n  // Outputs\n  messageSent = output<string>();\n\n  // Local state\n  messageText = signal('');\n\n  @ViewChild('inputField') inputField!: ElementRef<HTMLTextAreaElement>;\n\n  onSend(): void {\n    const trimmed = this.messageText().trim();\n    if (trimmed && !this.disabled() && !this.isLoading()) {\n      this.messageSent.emit(trimmed);\n      this.messageText.set('');\n      this.resetTextareaHeight();\n    }\n  }\n\n  onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.onSend();\n    }\n  }\n\n  onInput(event: Event): void {\n    const target = event.target as HTMLTextAreaElement;\n    this.messageText.set(target.value);\n    this.autoResizeTextarea(target);\n  }\n\n  private autoResizeTextarea(textarea: HTMLTextAreaElement): void {\n    textarea.style.height = 'auto';\n    const maxHeight = 150; // Max height in pixels\n    textarea.style.height = Math.min(textarea.scrollHeight, maxHeight) + 'px';\n  }\n\n  private resetTextareaHeight(): void {\n    if (this.inputField?.nativeElement !== undefined) {\n      this.inputField.nativeElement.style.height = 'auto';\n    }\n  }\n\n  focus(): void {\n    this.inputField?.nativeElement?.focus();\n  }\n}\n", "<div class=\"chat-input-container\">\n  <div class=\"input-wrapper\">\n    <textarea\n      #inputField\n      class=\"chat-textarea\"\n      [placeholder]=\"placeholder()\"\n      [disabled]=\"disabled() || isLoading()\"\n      [value]=\"messageText()\"\n      (input)=\"onInput($event)\"\n      (keydown)=\"onKeyDown($event)\"\n      rows=\"1\"\n    ></textarea>\n  </div>\n\n  <button\n    pButton\n    type=\"button\"\n    class=\"send-button\"\n    [disabled]=\"disabled() || isLoading() || !messageText().trim()\"\n    (click)=\"onSend()\"\n    [icon]=\"isLoading() ? 'pi pi-spin pi-spinner' : 'pi pi-send'\"\n    aria-label=\"Send message\"\n    [pTooltip]=\"'Send message (Enter)'\"\n    tooltipPosition=\"top\"\n  ></button>\n</div>\n", "import { Component, input, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CardModule } from 'primeng/card';\nimport { ProgressBarModule } from 'primeng/progressbar';\n\nimport {\n  CollectedDataSummary,\n  VehicleCollectionProgress,\n  DataType,\n} from '../../models/chat.interface';\n\n@Component({\n  selector: 'app-query-preview',\n  imports: [CommonModule, CardModule, ProgressBarModule],\n  templateUrl: './query-preview.component.html',\n  styleUrl: './query-preview.component.scss',\n})\nexport class QueryPreviewComponent {\n  // Inputs\n  query = input('');\n  confidence = input(0);\n  changes = input<string[]>([]);\n  isLoading = input(false);\n\n  // Data collection status\n  isCollecting = input(false);\n  collectionProgress = input(0);\n  collectedData = input<CollectedDataSummary | null>(null);\n\n  // Detailed collection status\n  dataTypes = input<DataType[]>([]);\n  statusMessage = input('');\n  currentVehicle = input('');\n  vehicleProgress = input<VehicleCollectionProgress[]>([]);\n\n  // Computed properties\n  readonly hasQuery = computed(() => this.query().length > 0);\n  readonly hasChanges = computed(() => this.changes().length > 0);\n  readonly hasCollectedData = computed(() => this.collectedData() !== null);\n  readonly hasVehicleProgress = computed(\n    () => this.vehicleProgress().length > 0,\n  );\n\n  // Format data types for display\n  readonly dataTypesLabel = computed(() => {\n    const types = this.dataTypes();\n    if (types.length === 0) return '';\n    return types.map((t) => t.charAt(0).toUpperCase() + t.slice(1)).join(', ');\n  });\n\n  // Get completed vehicles count\n  readonly completedVehiclesCount = computed(() => {\n    return this.vehicleProgress().filter((v) => v.status === 'complete').length;\n  });\n\n  // Get total records collected so far\n  readonly totalRecordsCollected = computed(() => {\n    return this.vehicleProgress().reduce(\n      (sum, v) => sum + v.recordsCollected,\n      0,\n    );\n  });\n\n  readonly confidenceColor = computed(() => {\n    const conf = this.confidence();\n    if (conf >= 80) return 'high';\n    if (conf >= 50) return 'medium';\n    return 'low';\n  });\n\n  readonly confidenceLabel = computed(() => {\n    const conf = this.confidence();\n    if (conf >= 90) return 'Ready';\n    if (conf >= 70) return 'Good';\n    if (conf >= 50) return 'Building';\n    return 'Starting';\n  });\n}\n", "<div class=\"query-preview-panel\">\n  <!-- Header -->\n  <div class=\"panel-header\">\n    <div class=\"header-title\">\n      <i class=\"pi pi-file-edit\"></i>\n      <span>Current Query</span>\n    </div>\n    @if (confidence() > 0) {\n      <div class=\"confidence-badge\" [attr.data-level]=\"confidenceColor()\">\n        <span class=\"confidence-value\">{{ confidence() }}%</span>\n        <span class=\"confidence-label\">{{ confidenceLabel() }}</span>\n      </div>\n    }\n  </div>\n\n  <!-- Query Content -->\n  <div class=\"query-content\">\n    @if (isLoading()) {\n      <div class=\"loading-state\">\n        <i class=\"pi pi-spin pi-spinner\"></i>\n        <span>Building query...</span>\n      </div>\n    } @else if (hasQuery()) {\n      <p class=\"query-text\">{{ query() }}</p>\n\n      @if (hasChanges()) {\n        <div class=\"changes-section\">\n          <span class=\"changes-label\">Recent changes:</span>\n          <ul class=\"changes-list\">\n            @for (change of changes(); track $index) {\n              <li class=\"change-item\">\n                <i class=\"pi pi-check-circle\"></i>\n                {{ change }}\n              </li>\n            }\n          </ul>\n        </div>\n      }\n    } @else {\n      <div class=\"empty-state\">\n        <div class=\"empty-state-icon\">\n          <i class=\"pi pi-file-edit\"></i>\n        </div>\n        <h3 class=\"empty-state-title\">Your Query Preview</h3>\n        <p class=\"empty-state-description\">\n          As you chat, your analysis request will appear here.\n        </p>\n        <div class=\"empty-state-steps\">\n          <div class=\"step\">\n            <span class=\"step-number\">1</span>\n            <span class=\"step-text\">Describe what you want to analyze</span>\n          </div>\n          <div class=\"step\">\n            <span class=\"step-number\">2</span>\n            <span class=\"step-text\">Select data types to include</span>\n          </div>\n          <div class=\"step\">\n            <span class=\"step-number\">3</span>\n            <span class=\"step-text\">Generate your report</span>\n          </div>\n        </div>\n      </div>\n    }\n  </div>\n\n  <!-- Data Collection Status -->\n  @if (isCollecting() || hasCollectedData()) {\n    <div class=\"data-status-section\">\n      <div class=\"section-header\">\n        <i class=\"pi pi-database\"></i>\n        <span>Data Status</span>\n      </div>\n\n      @if (isCollecting()) {\n        <div class=\"collection-progress\">\n          <!-- Data types being collected -->\n          @if (dataTypesLabel()) {\n            <div class=\"data-types-label\">\n              <i class=\"pi pi-list\"></i>\n              <span>Collecting: {{ dataTypesLabel() }}</span>\n            </div>\n          }\n\n          <!-- Overall progress bar -->\n          <div class=\"progress-bar-container\">\n            <p-progressBar\n              [value]=\"collectionProgress()\"\n              [showValue]=\"true\"\n              styleClass=\"collection-progress-bar\"\n            ></p-progressBar>\n          </div>\n\n          <!-- Status message -->\n          @if (statusMessage()) {\n            <div class=\"status-message\">\n              <i class=\"pi pi-spin pi-spinner\"></i>\n              <span>{{ statusMessage() }}</span>\n            </div>\n          }\n\n          <!-- Summary stats -->\n          @if (hasVehicleProgress()) {\n            <div class=\"collection-stats\">\n              <div class=\"stat-item\">\n                <span class=\"stat-value\"\n                  >{{ completedVehiclesCount() }}/{{\n                    vehicleProgress().length\n                  }}</span\n                >\n                <span class=\"stat-label\">Vehicles</span>\n              </div>\n              <div class=\"stat-item\">\n                <span class=\"stat-value\">{{\n                  totalRecordsCollected() | number\n                }}</span>\n                <span class=\"stat-label\">Records</span>\n              </div>\n            </div>\n          }\n\n          <!-- Vehicle progress list (collapsible) -->\n          @if (hasVehicleProgress()) {\n            <div class=\"vehicle-progress-list\">\n              @for (vehicle of vehicleProgress(); track vehicle.vehicleId) {\n                <div\n                  class=\"vehicle-progress-item\"\n                  [attr.data-status]=\"vehicle.status\"\n                >\n                  <div class=\"vehicle-header\">\n                    @if (vehicle.status === 'pending') {\n                      <i class=\"pi pi-clock status-icon pending\"></i>\n                    } @else if (vehicle.status === 'collecting') {\n                      <i\n                        class=\"pi pi-spin pi-spinner status-icon collecting\"\n                      ></i>\n                    } @else if (vehicle.status === 'complete') {\n                      <i class=\"pi pi-check-circle status-icon complete\"></i>\n                    } @else if (vehicle.status === 'error') {\n                      <i class=\"pi pi-exclamation-circle status-icon error\"></i>\n                    }\n                    <span class=\"vehicle-name\">{{ vehicle.vehicleName }}</span>\n                    <span class=\"vehicle-records\"\n                      >{{ vehicle.recordsCollected | number }} records</span\n                    >\n                  </div>\n                  <!-- Data type badges -->\n                  <div class=\"data-type-badges\">\n                    @for (dt of vehicle.dataTypesProgress; track dt.dataType) {\n                      <span\n                        class=\"data-type-badge\"\n                        [attr.data-status]=\"dt.status\"\n                      >\n                        @if (dt.status === 'collecting') {\n                          <i class=\"pi pi-spin pi-spinner\"></i>\n                        } @else if (dt.status === 'complete') {\n                          <i class=\"pi pi-check\"></i>\n                        }\n                        {{ dt.dataType }}\n                        @if (dt.recordCount > 0) {\n                          ({{ dt.recordCount }})\n                        }\n                      </span>\n                    }\n                  </div>\n                </div>\n              }\n            </div>\n          }\n        </div>\n      } @else if (hasCollectedData()) {\n        <div class=\"collected-data\">\n          <!-- Summary totals -->\n          <div class=\"collection-summary\">\n            <div class=\"summary-header\">\n              <i class=\"pi pi-check-circle\"></i>\n              <span>Collection Complete</span>\n            </div>\n            <div class=\"summary-totals\">\n              @if (collectedData()!.trips > 0) {\n                <div class=\"total-item\">\n                  <span class=\"total-value\">{{\n                    collectedData()!.trips | number\n                  }}</span>\n                  <span class=\"total-label\">Trips</span>\n                </div>\n              }\n              @if (collectedData()!.events > 0) {\n                <div class=\"total-item\">\n                  <span class=\"total-value\">{{\n                    collectedData()!.events | number\n                  }}</span>\n                  <span class=\"total-label\">Events</span>\n                </div>\n              }\n              @if (collectedData()!.telemetry > 0) {\n                <div class=\"total-item\">\n                  <span class=\"total-value\">{{\n                    collectedData()!.telemetry | number\n                  }}</span>\n                  <span class=\"total-label\">Telemetry</span>\n                </div>\n              }\n              @if (collectedData()!.alerts > 0) {\n                <div class=\"total-item\">\n                  <span class=\"total-value\">{{\n                    collectedData()!.alerts | number\n                  }}</span>\n                  <span class=\"total-label\">Alerts</span>\n                </div>\n              }\n            </div>\n          </div>\n\n          <!-- Per-vehicle breakdown (preserved from collection) -->\n          @if (hasVehicleProgress()) {\n            <div class=\"vehicle-breakdown\">\n              <div class=\"breakdown-header\">\n                <span>Per Vehicle Breakdown</span>\n                <span class=\"vehicle-count\"\n                  >{{ vehicleProgress().length }} vehicles</span\n                >\n              </div>\n              <div class=\"vehicle-progress-list completed\">\n                @for (vehicle of vehicleProgress(); track vehicle.vehicleId) {\n                  <div\n                    class=\"vehicle-progress-item\"\n                    [attr.data-status]=\"vehicle.status\"\n                  >\n                    <div class=\"vehicle-header\">\n                      @if (vehicle.status === 'complete') {\n                        <i class=\"pi pi-check-circle status-icon complete\"></i>\n                      } @else if (vehicle.status === 'error') {\n                        <i\n                          class=\"pi pi-exclamation-circle status-icon error\"\n                        ></i>\n                      } @else {\n                        <i class=\"pi pi-minus-circle status-icon skipped\"></i>\n                      }\n                      <span class=\"vehicle-name\">{{\n                        vehicle.vehicleName\n                      }}</span>\n                      <span class=\"vehicle-records\"\n                        >{{ vehicle.recordsCollected | number }} records</span\n                      >\n                    </div>\n                    <!-- Data type badges -->\n                    <div class=\"data-type-badges\">\n                      @for (\n                        dt of vehicle.dataTypesProgress;\n                        track dt.dataType\n                      ) {\n                        <span\n                          class=\"data-type-badge\"\n                          [attr.data-status]=\"dt.status\"\n                        >\n                          @if (dt.status === 'complete') {\n                            <i class=\"pi pi-check\"></i>\n                          }\n                          {{ dt.dataType }}\n                          @if (dt.recordCount > 0) {\n                            ({{ dt.recordCount }})\n                          }\n                        </span>\n                      }\n                    </div>\n                  </div>\n                }\n              </div>\n            </div>\n          }\n        </div>\n      }\n    </div>\n  }\n</div>\n", "import { Injectable, inject, signal, computed } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { firstValueFrom } from 'rxjs';\n\nimport { AuthTokenManagerService } from '../../../../../../core/services/auth-token-manager.service';\nimport { ApiUrlService } from '../../../../../../core/services/api-url.service';\n\nimport {\n  ChatMessage,\n  ChatSession,\n  ChatContext,\n  SuggestedAction,\n  QueryUpdate,\n  DataType,\n  StartSessionRequest,\n  StartSessionResponse,\n  SendMessageRequest,\n  SendMessageResponse,\n  SubmitContextRequest,\n  SubmitContextResponse,\n  SummarizedData,\n  DataCollectionStatus,\n  CollectedDataSummary,\n  VehicleCollectionProgress,\n} from '../models/chat.interface';\n\n@Injectable()\nexport class ChatSessionService {\n  private readonly http = inject(HttpClient);\n  private readonly authTokenManagerService = inject(AuthTokenManagerService);\n  private readonly apiUrlService = inject(ApiUrlService);\n\n  // ============================================================================\n  // State Signals\n  // ============================================================================\n\n  private readonly _session = signal<ChatSession | null>(null);\n  private readonly _messages = signal<ChatMessage[]>([]);\n  private readonly _isConnecting = signal(false);\n  private readonly _isTyping = signal(false);\n  private readonly _error = signal<string | null>(null);\n  private readonly _currentQuery = signal('');\n  private readonly _queryConfidence = signal(0);\n  private readonly _dataCollectionStatus = signal<DataCollectionStatus>({\n    isCollecting: false,\n    progress: 0,\n    dataTypes: [],\n    collectedData: null,\n  });\n\n  // Promise to track ongoing API session creation (prevents race conditions)\n  private _apiSessionCreationPromise: Promise<void> | null = null;\n\n  // ============================================================================\n  // Form State Signals (for guided conversation)\n  // ============================================================================\n\n  private readonly _formDateRange = signal<{ start: Date; end: Date } | null>(\n    null,\n  );\n  private readonly _formSelectedVehicles = signal<\n    { id: string; name: string }[]\n  >([]);\n  private readonly _formSelectedDataTypes = signal<DataType[]>([]);\n  private readonly _conversationPhase = signal<\n    | 'greeting'\n    | 'date_selection'\n    | 'vehicle_selection'\n    | 'data_type_selection'\n    | 'query_building'\n    | 'ready'\n  >('greeting');\n  private readonly _availableVehicles = signal<{ id: string; name: string }[]>(\n    [],\n  );\n\n  // ============================================================================\n  // Public Readonly Signals\n  // ============================================================================\n\n  readonly session = this._session.asReadonly();\n  readonly messages = this._messages.asReadonly();\n  readonly isConnecting = this._isConnecting.asReadonly();\n  readonly isTyping = this._isTyping.asReadonly();\n  readonly error = this._error.asReadonly();\n  readonly currentQuery = this._currentQuery.asReadonly();\n  readonly queryConfidence = this._queryConfidence.asReadonly();\n  readonly dataCollectionStatus = this._dataCollectionStatus.asReadonly();\n\n  // Form state (public readable)\n  readonly formDateRange = this._formDateRange.asReadonly();\n  readonly formSelectedVehicles = this._formSelectedVehicles.asReadonly();\n  readonly formSelectedDataTypes = this._formSelectedDataTypes.asReadonly();\n  readonly conversationPhase = this._conversationPhase.asReadonly();\n\n  // ============================================================================\n  // Computed Signals\n  // ============================================================================\n\n  readonly isSessionActive = computed(\n    () => this._session()?.status === 'active',\n  );\n  readonly hasMessages = computed(() => this._messages().length > 0);\n  readonly canGenerate = computed(\n    () => this._currentQuery().length > 0 && this._queryConfidence() >= 50,\n  );\n\n  // Form state computed\n  readonly hasDateRange = computed(() => this._formDateRange() !== null);\n  readonly hasVehicles = computed(\n    () => this._formSelectedVehicles().length > 0,\n  );\n  readonly hasDataTypes = computed(\n    () => this._formSelectedDataTypes().length > 0,\n  );\n  readonly isFormComplete = computed(\n    () => this.hasDateRange() && this.hasVehicles() && this.hasDataTypes(),\n  );\n\n  // ============================================================================\n  // API Configuration\n  // ============================================================================\n\n  private readonly chatApiBaseUrl = signal(\n    'https://cypherview-reporting-develop-function.azurewebsites.net/api',\n  );\n\n  // Toggle for mock mode during development\n  private readonly useMockResponses = signal(false);\n\n  // ============================================================================\n  // Session Management\n  // ============================================================================\n\n  async startSession(context: ChatContext): Promise<void> {\n    this._isConnecting.set(true);\n    this._error.set(null);\n\n    try {\n      if (this.useMockResponses()) {\n        await this.mockStartSession(context);\n      } else {\n        await this.apiStartSession(context);\n      }\n    } catch (err) {\n      const errorMessage =\n        err instanceof Error ? err.message : 'Failed to start session';\n      this._error.set(errorMessage);\n      throw err;\n    } finally {\n      this._isConnecting.set(false);\n    }\n  }\n\n  async sendMessage(content: string): Promise<void> {\n    const session = this._session();\n    if (!session) {\n      throw new Error('No active session');\n    }\n\n    // Add user message immediately\n    const userMessage = this.createUserMessage(session.id, content);\n    this._messages.update((msgs) => [...msgs, userMessage]);\n\n    this._isTyping.set(true);\n    this._error.set(null);\n\n    try {\n      if (this.useMockResponses()) {\n        await this.mockSendMessage(session.id, content);\n      } else {\n        await this.apiSendMessage(session.id, content);\n      }\n\n      // Update user message status\n      this._messages.update((msgs) =>\n        msgs.map((m) =>\n          m.id === userMessage.id ? { ...m, status: 'delivered' as const } : m,\n        ),\n      );\n    } catch (err) {\n      // Update user message status to error\n      this._messages.update((msgs) =>\n        msgs.map((m) =>\n          m.id === userMessage.id ? { ...m, status: 'error' as const } : m,\n        ),\n      );\n      const errorMessage =\n        err instanceof Error ? err.message : 'Failed to send message';\n      this._error.set(errorMessage);\n      throw err;\n    } finally {\n      this._isTyping.set(false);\n    }\n  }\n\n  async submitDataContext(summarizedData: SummarizedData): Promise<void> {\n    // Wait for any ongoing API session creation to complete first\n    // This prevents the race condition where context is submitted before the session exists\n    if (this._apiSessionCreationPromise) {\n      try {\n        await this._apiSessionCreationPromise;\n      } catch {\n        // If session creation failed, we'll handle it below\n      }\n    }\n\n    const session = this._session();\n    if (!session) {\n      throw new Error('No active session');\n    }\n\n    // If we still have a guided session, the API session creation failed\n    // Try to create it now before submitting context\n    if (session.id.startsWith('guided-')) {\n      console.warn('API session not yet created, attempting to create now...');\n      await this.startApiSessionFromGuidedFlow();\n\n      // Re-check session after creation attempt\n      const updatedSession = this._session();\n      if (!updatedSession || updatedSession.id.startsWith('guided-')) {\n        throw new Error('Failed to create API session for context submission');\n      }\n    }\n\n    this._isTyping.set(true);\n    this._error.set(null);\n\n    try {\n      const currentSession = this._session();\n      if (!currentSession) {\n        throw new Error('Session lost during context submission');\n      }\n\n      if (this.useMockResponses()) {\n        await this.mockSubmitContext(currentSession.id, summarizedData);\n      } else {\n        await this.apiSubmitContext(currentSession.id, summarizedData);\n      }\n    } catch (err) {\n      const errorMessage =\n        err instanceof Error ? err.message : 'Failed to submit data context';\n      this._error.set(errorMessage);\n      throw err;\n    } finally {\n      this._isTyping.set(false);\n    }\n  }\n\n  async endSession(): Promise<void> {\n    const session = this._session();\n    if (!session) return;\n\n    try {\n      if (!this.useMockResponses()) {\n        await this.apiEndSession(session.id);\n      }\n    } finally {\n      this._session.update((s) =>\n        s ? { ...s, status: 'completed' as const } : null,\n      );\n    }\n  }\n\n  reset(): void {\n    this._session.set(null);\n    this._messages.set([]);\n    this._isConnecting.set(false);\n    this._isTyping.set(false);\n    this._error.set(null);\n    this._currentQuery.set('');\n    this._queryConfidence.set(0);\n    this._dataCollectionStatus.set({\n      isCollecting: false,\n      progress: 0,\n      dataTypes: [],\n      collectedData: null,\n    });\n    // Reset form state\n    this._formDateRange.set(null);\n    this._formSelectedVehicles.set([]);\n    this._formSelectedDataTypes.set([]);\n    this._conversationPhase.set('greeting');\n    // Clear any pending API session creation\n    this._apiSessionCreationPromise = null;\n    // Note: Don't reset available vehicles - they stay available across sessions\n  }\n\n  // ============================================================================\n  // Form State Management (for guided conversation)\n  // ============================================================================\n\n  /**\n   * Set available vehicles for the guided session.\n   * Also updates any existing vehicle selector messages to include the vehicles.\n   */\n  setAvailableVehicles(vehicles: { id: string; name: string }[]): void {\n    this._availableVehicles.set(vehicles);\n\n    // Update any existing vehicle selector messages with the new vehicles\n    // This handles the case where vehicles are loaded after the selector was shown\n    this._messages.update((msgs) =>\n      msgs.map((m) => {\n        if (m.metadata?.interactiveType === 'vehicle_selector') {\n          return {\n            ...m,\n            metadata: {\n              ...m.metadata,\n              availableVehicles: vehicles.map((v) => ({\n                id: v.id,\n                name: v.name,\n              })),\n            },\n          };\n        }\n        return m;\n      }),\n    );\n  }\n\n  /**\n   * Set date range from inline date picker\n   */\n  setDateRange(start: Date, end: Date): void {\n    this._formDateRange.set({ start, end });\n\n    // Add confirmation message\n    const formatDate = (d: Date) =>\n      d.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n      });\n    const dateText =\n      start.toDateString() === end.toDateString()\n        ? formatDate(start)\n        : `${formatDate(start)} to ${formatDate(end)}`;\n\n    this.addSystemMessage(`Date range selected: **${dateText}**`);\n\n    // Move to next phase\n    this._conversationPhase.set('vehicle_selection');\n    this.promptForVehicleSelection();\n  }\n\n  /**\n   * Set selected vehicles from inline selector\n   */\n  setSelectedVehicles(vehicles: { id: string; name: string }[]): void {\n    this._formSelectedVehicles.set(vehicles);\n\n    // Add confirmation message\n    const vehicleText =\n      vehicles.length === 1\n        ? vehicles[0].name\n        : vehicles.length <= 3\n          ? vehicles.map((v) => v.name).join(', ')\n          : `${vehicles.length} vehicles`;\n\n    this.addSystemMessage(`Vehicles selected: **${vehicleText}**`);\n\n    // Move to next phase\n    this._conversationPhase.set('data_type_selection');\n    this.promptForDataTypeSelection();\n  }\n\n  /**\n   * Set selected data types from inline selector\n   */\n  setSelectedDataTypes(dataTypes: DataType[]): void {\n    // Merge with existing selected data types (for adding more types)\n    const existingTypes = this._formSelectedDataTypes();\n    const mergedTypes: DataType[] = [\n      ...new Set([...existingTypes, ...dataTypes]),\n    ];\n    this._formSelectedDataTypes.set(mergedTypes);\n\n    // Update the data type selector message to persist the selection\n    this.updateDataTypeSelectorMessage(mergedTypes);\n\n    // Add confirmation message\n    const typesText = dataTypes\n      .map((t) => t.charAt(0).toUpperCase() + t.slice(1))\n      .join(', ');\n    this.addSystemMessage(`Data types selected: **${typesText}**`);\n\n    // Move to query building phase\n    this._conversationPhase.set('query_building');\n    this.promptForQueryBuilding();\n  }\n\n  /**\n   * Update the data type selector message metadata to persist selections\n   */\n  private updateDataTypeSelectorMessage(selectedTypes: DataType[]): void {\n    this._messages.update((msgs) =>\n      msgs.map((m) => {\n        if (m.metadata?.interactiveType === 'data_type_selector') {\n          return {\n            ...m,\n            metadata: {\n              ...m.metadata,\n              selectedDataTypes: selectedTypes,\n            },\n          };\n        }\n        return m;\n      }),\n    );\n  }\n\n  /**\n   * Start a guided session (without pre-existing context)\n   */\n  async startGuidedSession(\n    clientId: string,\n    clientName: string,\n  ): Promise<void> {\n    this._isConnecting.set(true);\n    this._error.set(null);\n\n    try {\n      await this.delay(300);\n\n      // Use \"guided-\" prefix to identify local sessions vs real API sessions\n      const sessionId = `guided-${this.generateId()}`;\n      const now = new Date();\n\n      const session: ChatSession = {\n        id: sessionId,\n        createdAt: now,\n        lastActivity: now,\n        expiresAt: new Date(now.getTime() + 30 * 60 * 1000),\n        status: 'active',\n        context: {\n          clientId,\n          clientName,\n          dateRange: { startDate: '', endDate: '' },\n          vehicleIds: [],\n          vehicleNames: [],\n        },\n        currentQuery: '',\n        messageCount: 0,\n      };\n\n      this._session.set(session);\n      this._conversationPhase.set('date_selection');\n\n      // Send welcome message with date picker prompt\n      const welcomeMessage = this.createAssistantMessage(\n        sessionId,\n        `Hello! I'll help you build an analytical report for **${clientName}**.\\n\\nLet's start by selecting the date range for your analysis.`,\n        {\n          interactiveType: 'date_picker',\n        },\n      );\n\n      this._messages.set([welcomeMessage]);\n    } finally {\n      this._isConnecting.set(false);\n    }\n  }\n\n  /**\n   * Add a system message to the chat\n   */\n  private addSystemMessage(content: string): void {\n    const session = this._session();\n    if (!session) return;\n\n    const message: ChatMessage = {\n      id: this.generateId(),\n      sessionId: session.id,\n      sender: 'system',\n      content,\n      timestamp: new Date(),\n      status: 'delivered',\n    };\n\n    this._messages.update((msgs) => [...msgs, message]);\n  }\n\n  /**\n   * Prompt user for vehicle selection\n   */\n  private promptForVehicleSelection(): void {\n    const session = this._session();\n    if (!session) return;\n\n    const availableVehicles = this._availableVehicles();\n    const message = this.createAssistantMessage(\n      session.id,\n      `Now, which vehicles would you like to include in this report?\\n\\nSelect one or more vehicles from the list below.`,\n      {\n        interactiveType: 'vehicle_selector',\n        availableVehicles: availableVehicles.map((v) => ({\n          id: v.id,\n          name: v.name,\n        })),\n      },\n    );\n\n    this._messages.update((msgs) => [...msgs, message]);\n  }\n\n  /**\n   * Prompt user for data type selection\n   */\n  private promptForDataTypeSelection(): void {\n    const session = this._session();\n    if (!session) return;\n\n    const message = this.createAssistantMessage(\n      session.id,\n      `What data would you like to analyze?\\n\\nSelect the types of data you're interested in.`,\n      {\n        interactiveType: 'data_type_selector',\n      },\n    );\n\n    this._messages.update((msgs) => [...msgs, message]);\n  }\n\n  /**\n   * Prompt user for query building\n   */\n  private promptForQueryBuilding(): void {\n    const session = this._session();\n    if (!session) return;\n\n    const dateRange = this._formDateRange();\n    const vehicles = this._formSelectedVehicles();\n    const dataTypes = this._formSelectedDataTypes();\n\n    const formatDate = (d: Date) =>\n      d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    const dateText = dateRange\n      ? dateRange.start.toDateString() === dateRange.end.toDateString()\n        ? formatDate(dateRange.start)\n        : `${formatDate(dateRange.start)} - ${formatDate(dateRange.end)}`\n      : '';\n\n    const vehicleText =\n      vehicles.length === 1 ? vehicles[0].name : `${vehicles.length} vehicles`;\n\n    const typesText = dataTypes\n      .map((t) => t.charAt(0).toUpperCase() + t.slice(1))\n      .join(', ');\n\n    // Build initial query\n    const initialQuery = `Analyze ${typesText.toLowerCase()} data for ${vehicleText} from ${dateText}`;\n    this._currentQuery.set(initialQuery);\n    this._queryConfidence.set(50);\n\n    const message = this.createAssistantMessage(\n      session.id,\n      `I'm ready to collect **${typesText}** for **${vehicleText}** during **${dateText}**.\\n\\nWhat specific insights are you looking for? For example:\\n‚Ä¢ Driver safety analysis\\n‚Ä¢ Fuel efficiency trends\\n‚Ä¢ Vehicle utilization\\n‚Ä¢ Route optimization`,\n      {\n        suggestedActions: [\n          {\n            id: '1',\n            label: 'Driver safety',\n            action: 'select',\n            value: 'safety',\n          },\n          {\n            id: '2',\n            label: 'Fuel efficiency',\n            action: 'select',\n            value: 'fuel',\n          },\n          {\n            id: '3',\n            label: 'General overview',\n            action: 'select',\n            value: 'overview',\n          },\n        ],\n        queryUpdate: {\n          query: initialQuery,\n          confidence: 50,\n          changes: ['Set date range', 'Selected vehicles', 'Chose data types'],\n        },\n      },\n    );\n\n    this._messages.update((msgs) => [...msgs, message]);\n  }\n\n  // ============================================================================\n  // Data Collection Status\n  // ============================================================================\n\n  /**\n   * Start the real API session using the data collected in the guided flow.\n   * This should be called when data collection begins.\n   * Returns a promise that resolves when the session is created.\n   */\n  async startApiSessionFromGuidedFlow(): Promise<void> {\n    const session = this._session();\n    const dateRange = this._formDateRange();\n    const vehicles = this._formSelectedVehicles();\n\n    if (!session || !dateRange || vehicles.length === 0) {\n      console.warn('Cannot start API session: missing required data');\n      return;\n    }\n\n    // Don't restart if we already have a real API session\n    if (session.id && !session.id.startsWith('guided-')) {\n      return;\n    }\n\n    // If already creating a session, return the existing promise\n    if (this._apiSessionCreationPromise) {\n      return this._apiSessionCreationPromise;\n    }\n\n    const context: ChatContext = {\n      clientId: session.context.clientId,\n      clientName: session.context.clientName,\n      dateRange: {\n        startDate: dateRange.start.toISOString(),\n        endDate: dateRange.end.toISOString(),\n      },\n      vehicleIds: vehicles.map((v) => v.id),\n      vehicleNames: vehicles.map((v) => v.name),\n    };\n\n    this._isConnecting.set(true);\n\n    // Store the promise so submitDataContext can await it\n    this._apiSessionCreationPromise = (async () => {\n      try {\n        if (this.useMockResponses()) {\n          // For mock mode, just update the context on the existing session\n          this._session.update((s) => (s ? { ...s, context } : null));\n        } else {\n          // Call the real API to start a session, preserving guided conversation history\n          await this.apiStartSession(context, true);\n        }\n      } catch (err) {\n        const errorMessage =\n          err instanceof Error ? err.message : 'Failed to start API session';\n        this._error.set(errorMessage);\n        // Don't throw - data collection can still proceed with local session\n        console.error('API session start failed:', err);\n        throw err; // Re-throw so awaiting code knows it failed\n      } finally {\n        this._isConnecting.set(false);\n        this._apiSessionCreationPromise = null;\n      }\n    })();\n\n    return this._apiSessionCreationPromise;\n  }\n\n  setDataCollectionStarted(\n    dataTypes: DataType[],\n    vehicles: { id: string; name: string }[],\n  ): void {\n    // Initialize vehicle progress\n    const vehicleProgress: VehicleCollectionProgress[] = vehicles.map((v) => ({\n      vehicleId: v.id,\n      vehicleName: v.name,\n      status: 'pending' as const,\n      dataTypesProgress: dataTypes.map((dt) => ({\n        dataType: dt,\n        status: 'pending' as const,\n        recordCount: 0,\n      })),\n      recordsCollected: 0,\n    }));\n\n    this._dataCollectionStatus.set({\n      isCollecting: true,\n      progress: 0,\n      dataTypes,\n      collectedData: null,\n      currentPhase: 'initializing',\n      currentVehicle: undefined,\n      vehicleProgress,\n      statusMessage: `Preparing to collect ${dataTypes.join(', ')} for ${vehicles.length} vehicles...`,\n    });\n\n    // Start the real API session when data collection begins\n    void this.startApiSessionFromGuidedFlow();\n  }\n\n  updateDataCollectionProgress(progress: number): void {\n    this._dataCollectionStatus.update((status) => ({\n      ...status,\n      progress,\n    }));\n  }\n\n  // Update status message\n  updateCollectionStatusMessage(message: string): void {\n    this._dataCollectionStatus.update((status) => ({\n      ...status,\n      statusMessage: message,\n    }));\n  }\n\n  // Start collecting for a specific vehicle\n  startVehicleCollection(vehicleId: string, vehicleName: string): void {\n    this._dataCollectionStatus.update((status) => {\n      const vehicleProgress = status.vehicleProgress?.map((v) =>\n        v.vehicleId === vehicleId ? { ...v, status: 'collecting' as const } : v,\n      );\n\n      return {\n        ...status,\n        currentPhase: 'collecting',\n        currentVehicle: vehicleName,\n        vehicleProgress,\n        statusMessage: `Collecting data for ${vehicleName}...`,\n      };\n    });\n  }\n\n  // Update progress for a specific data type on a vehicle\n  updateVehicleDataTypeProgress(\n    vehicleId: string,\n    dataType: DataType,\n    recordCount: number,\n    status: 'collecting' | 'complete' | 'skipped' = 'collecting',\n  ): void {\n    this._dataCollectionStatus.update((currentStatus) => {\n      const vehicleProgress = currentStatus.vehicleProgress?.map((v) => {\n        if (v.vehicleId !== vehicleId) return v;\n\n        const dataTypesProgress = v.dataTypesProgress.map((dtp) =>\n          dtp.dataType === dataType ? { ...dtp, status, recordCount } : dtp,\n        );\n\n        const totalRecords = dataTypesProgress.reduce(\n          (sum, dtp) => sum + dtp.recordCount,\n          0,\n        );\n\n        return {\n          ...v,\n          dataTypesProgress,\n          recordsCollected: totalRecords,\n        };\n      });\n\n      // Calculate overall progress based on completed items\n      const totalItems =\n        (vehicleProgress?.length ?? 0) * currentStatus.dataTypes.length;\n      const completedItems =\n        vehicleProgress?.reduce((sum, v) => {\n          return (\n            sum +\n            v.dataTypesProgress.filter(\n              (dtp) => dtp.status === 'complete' || dtp.status === 'skipped',\n            ).length\n          );\n        }, 0) ?? 0;\n\n      const progress =\n        totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;\n\n      // Update status message\n      const dataTypeLabel =\n        dataType.charAt(0).toUpperCase() + dataType.slice(1);\n      const vehicleName =\n        vehicleProgress?.find((v) => v.vehicleId === vehicleId)?.vehicleName ??\n        '';\n      const statusMessage =\n        status === 'complete'\n          ? `${vehicleName}: ${dataTypeLabel} complete (${recordCount} records)`\n          : `${vehicleName}: Collecting ${dataTypeLabel.toLowerCase()}...`;\n\n      return {\n        ...currentStatus,\n        progress,\n        vehicleProgress,\n        statusMessage,\n      };\n    });\n  }\n\n  // Mark a vehicle as complete\n  completeVehicleCollection(vehicleId: string): void {\n    this._dataCollectionStatus.update((status) => {\n      const vehicleProgress = status.vehicleProgress?.map((v) =>\n        v.vehicleId === vehicleId ? { ...v, status: 'complete' as const } : v,\n      );\n\n      const completedCount =\n        vehicleProgress?.filter((v) => v.status === 'complete').length ?? 0;\n      const totalCount = vehicleProgress?.length ?? 0;\n\n      return {\n        ...status,\n        vehicleProgress,\n        statusMessage: `Completed ${completedCount} of ${totalCount} vehicles`,\n      };\n    });\n  }\n\n  // Mark a vehicle as having an error\n  setVehicleCollectionError(vehicleId: string, error: string): void {\n    this._dataCollectionStatus.update((status) => {\n      const vehicleProgress = status.vehicleProgress?.map((v) =>\n        v.vehicleId === vehicleId\n          ? { ...v, status: 'error' as const, error }\n          : v,\n      );\n\n      return {\n        ...status,\n        vehicleProgress,\n      };\n    });\n  }\n\n  setDataCollectionComplete(summary: CollectedDataSummary): void {\n    this._dataCollectionStatus.update((status) => ({\n      ...status,\n      isCollecting: false,\n      progress: 100,\n      collectedData: summary,\n      currentPhase: 'complete',\n      currentVehicle: undefined,\n      statusMessage: 'Data collection complete',\n    }));\n  }\n\n  // ============================================================================\n  // Mock Implementations (for development)\n  // ============================================================================\n\n  private async mockStartSession(context: ChatContext): Promise<void> {\n    await this.delay(500); // Simulate network delay\n\n    const sessionId = this.generateId();\n    const now = new Date();\n\n    const session: ChatSession = {\n      id: sessionId,\n      createdAt: now,\n      lastActivity: now,\n      expiresAt: new Date(now.getTime() + 30 * 60 * 1000), // 30 min\n      status: 'active',\n      context,\n      currentQuery: '',\n      messageCount: 0,\n    };\n\n    this._session.set(session);\n\n    // Create initial AI message\n    const vehicleList = context.vehicleNames.slice(0, 3).join(', ');\n    const vehicleCount = context.vehicleNames.length;\n    const vehicleText =\n      vehicleCount > 3\n        ? `${vehicleList} and ${vehicleCount - 3} more`\n        : vehicleList;\n\n    const startDate = new Date(context.dateRange.startDate);\n    const endDate = new Date(context.dateRange.endDate);\n    const dateText = `${startDate.toLocaleDateString()} to ${endDate.toLocaleDateString()}`;\n\n    const initialMessage = this.createAssistantMessage(\n      sessionId,\n      `I see you've selected **${vehicleText}** for **${dateText}**.\\n\\nWhat data would you like to analyze? You can select multiple types.`,\n      {\n        suggestedActions: [\n          { id: '1', label: 'Trips', action: 'select', value: 'trips' },\n          { id: '2', label: 'Events', action: 'select', value: 'events' },\n          { id: '3', label: 'Telemetry', action: 'select', value: 'telemetry' },\n          { id: '4', label: 'Alerts', action: 'select', value: 'alerts' },\n        ],\n      },\n    );\n\n    this._messages.set([initialMessage]);\n  }\n\n  private async mockSendMessage(\n    sessionId: string,\n    content: string,\n  ): Promise<void> {\n    await this.delay(800 + Math.random() * 400); // Simulate AI thinking\n\n    const lowerContent = content.toLowerCase();\n    const collectionStatus = this._dataCollectionStatus();\n    const isCollecting = collectionStatus.isCollecting;\n    const collectingTypes = collectionStatus.dataTypes;\n\n    // If currently collecting, acknowledge the context and respond appropriately\n    if (isCollecting) {\n      const collectingText = collectingTypes\n        .map((t) => t.charAt(0).toUpperCase() + t.slice(1))\n        .join(', ');\n      const response = this.createAssistantMessage(\n        sessionId,\n        `I'm currently collecting **${collectingText}** data (${collectionStatus.progress}% complete).\\n\\nFeel free to ask questions about what you're looking for in the analysis, and I'll have more insights once the data collection is complete.`,\n        {\n          queryUpdate: {\n            query: this._currentQuery(),\n            confidence: this._queryConfidence(),\n            changes: [],\n          },\n        },\n      );\n      this._messages.update((msgs) => [...msgs, response]);\n      return;\n    }\n\n    // Detect data type selection\n    const selectedTypes: DataType[] = [];\n    if (lowerContent.includes('trip')) selectedTypes.push('trips');\n    if (lowerContent.includes('event')) selectedTypes.push('events');\n    if (lowerContent.includes('telemetry')) selectedTypes.push('telemetry');\n    if (lowerContent.includes('alert')) selectedTypes.push('alerts');\n\n    if (selectedTypes.length > 0 && !collectionStatus.collectedData) {\n      // User is selecting data types\n      const typeNames = selectedTypes\n        .map((t) => t.charAt(0).toUpperCase() + t.slice(1))\n        .join(' and ');\n\n      const response = this.createAssistantMessage(\n        sessionId,\n        `I'll collect **${typeNames}** data for your selected vehicles. This may take a moment depending on the data volume.\\n\\nYou can continue chatting while I gather the data.`,\n        {\n          triggerDataCollection: { dataTypes: selectedTypes },\n          queryUpdate: {\n            query: `Analyze ${typeNames.toLowerCase()} data`,\n            confidence: 25,\n            changes: selectedTypes.map((t) => `Added ${t} analysis`),\n          },\n        },\n      );\n\n      this._messages.update((msgs) => [...msgs, response]);\n      this._currentQuery.set(response.metadata?.queryUpdate?.query ?? '');\n      this._queryConfidence.set(\n        response.metadata?.queryUpdate?.confidence ?? 0,\n      );\n      return;\n    }\n\n    // Handle other message types based on conversation state\n    let responseContent = '';\n    let suggestedActions: SuggestedAction[] = [];\n    let queryUpdate: QueryUpdate | undefined;\n\n    if (lowerContent.includes('safety') || lowerContent.includes('driver')) {\n      responseContent = `I'll focus on **driver safety analysis**. Based on your data, I can analyze:\\n\\n‚Ä¢ Harsh braking events\\n‚Ä¢ Speeding incidents\\n‚Ä¢ Rapid acceleration\\n\\nWould you like me to compare drivers against each other, or show trends over time?`;\n      suggestedActions = [\n        {\n          id: '1',\n          label: 'Compare drivers',\n          action: 'select',\n          value: 'compare_drivers',\n        },\n        {\n          id: '2',\n          label: 'Show trends',\n          action: 'select',\n          value: 'show_trends',\n        },\n        {\n          id: '3',\n          label: 'Both',\n          action: 'select',\n          value: 'compare_and_trends',\n        },\n      ];\n      queryUpdate = {\n        query: `${this._currentQuery()} with focus on driver safety`,\n        confidence: Math.min(this._queryConfidence() + 25, 100),\n        changes: ['Added driver safety focus'],\n      };\n    } else if (\n      lowerContent.includes('compare') ||\n      lowerContent.includes('both') ||\n      lowerContent.includes('trend')\n    ) {\n      const includesCompare =\n        lowerContent.includes('compare') || lowerContent.includes('both');\n      const includesTrends =\n        lowerContent.includes('trend') || lowerContent.includes('both');\n\n      const features: string[] = [];\n      if (includesCompare) features.push('driver comparison');\n      if (includesTrends) features.push('daily trends');\n\n      responseContent = `I've updated the query to include **${features.join(' and ')}**.\\n\\nAnything else you'd like to add, or are you ready to generate the report?`;\n      suggestedActions = [\n        {\n          id: '1',\n          label: 'Add fuel analysis',\n          action: 'append',\n          value: 'add_fuel',\n        },\n        {\n          id: '2',\n          label: 'Add speed analysis',\n          action: 'append',\n          value: 'add_speed',\n        },\n        {\n          id: '3',\n          label: 'Generate Report',\n          action: 'select',\n          value: 'generate',\n        },\n      ];\n      queryUpdate = {\n        query: `${this._currentQuery()}, including ${features.join(' and ')}`,\n        confidence: Math.min(this._queryConfidence() + 30, 95),\n        changes: features.map((f) => `Added ${f}`),\n      };\n    } else if (\n      lowerContent.includes('generate') ||\n      lowerContent.includes('ready')\n    ) {\n      responseContent = `Your query is ready:\\n\\n> \"${this._currentQuery()}\"\\n\\nConfidence: **${this._queryConfidence()}%**\\n\\nClick the **Generate Report** button below to create your analysis.`;\n      suggestedActions = [];\n      queryUpdate = {\n        query: this._currentQuery(),\n        confidence: 95,\n        changes: ['Query finalized'],\n      };\n    } else {\n      // Generic response\n      responseContent = `I understand you're interested in \"${content}\". Could you tell me more about what specific aspects you'd like to analyze?\\n\\nFor example:\\n‚Ä¢ Driver behavior and safety\\n‚Ä¢ Fuel efficiency\\n‚Ä¢ Route optimization\\n‚Ä¢ Vehicle utilization`;\n      suggestedActions = [\n        { id: '1', label: 'Driver safety', action: 'select', value: 'safety' },\n        { id: '2', label: 'Fuel efficiency', action: 'select', value: 'fuel' },\n        {\n          id: '3',\n          label: 'General overview',\n          action: 'select',\n          value: 'overview',\n        },\n      ];\n    }\n\n    const response = this.createAssistantMessage(sessionId, responseContent, {\n      suggestedActions,\n      queryUpdate,\n    });\n\n    this._messages.update((msgs) => [...msgs, response]);\n\n    if (queryUpdate) {\n      this._currentQuery.set(queryUpdate.query);\n      this._queryConfidence.set(queryUpdate.confidence);\n    }\n  }\n\n  private async mockSubmitContext(\n    sessionId: string,\n    summarizedData: SummarizedData,\n  ): Promise<void> {\n    await this.delay(600);\n\n    // Calculate totals from summarized data\n    let totalTrips = 0;\n    let totalEvents = 0;\n    const eventTypes = new Set<string>();\n\n    for (const vehicle of Object.values(summarizedData.vehicles)) {\n      totalTrips += vehicle.data_summary.trip_count;\n      totalEvents += vehicle.data_summary.event_count;\n\n      // Extract event types from column definitions\n      for (const col of vehicle.events) {\n        if (col.startsWith('eventType:')) {\n          const types = col.replace('eventType:', '').split(',');\n          types.forEach((t) => eventTypes.add(t));\n        }\n      }\n    }\n\n    const vehicleCount = summarizedData.metadata.total_vehicles;\n    const eventTypeList = Array.from(eventTypes);\n\n    let content = `I've analyzed your data. Here's what I found:\\n\\n`;\n    content += `‚Ä¢ **${totalTrips} trips** across ${vehicleCount} vehicles\\n`;\n    content += `‚Ä¢ **${totalEvents} events**`;\n\n    if (eventTypeList.length > 0) {\n      content += ` including: ${eventTypeList.join(', ')}`;\n    }\n\n    content += `\\n\\nWhat would you like to focus on in your analysis?`;\n\n    const response = this.createAssistantMessage(sessionId, content, {\n      suggestedActions: [\n        {\n          id: '1',\n          label: 'Driver safety',\n          action: 'select',\n          value: 'focus:safety',\n        },\n        {\n          id: '2',\n          label: 'Vehicle comparison',\n          action: 'select',\n          value: 'focus:comparison',\n        },\n        {\n          id: '3',\n          label: 'Trip analysis',\n          action: 'select',\n          value: 'focus:trips',\n        },\n        {\n          id: '4',\n          label: 'General overview',\n          action: 'select',\n          value: 'focus:overview',\n        },\n      ],\n      queryUpdate: {\n        query: `Analyze ${totalTrips} trips and ${totalEvents} events for ${vehicleCount} vehicles`,\n        confidence: 40,\n        changes: ['Data context received', `Identified ${totalEvents} events`],\n      },\n      dataInsights: {\n        totalTrips,\n        totalEvents,\n        totalTelemetry: 0,\n        totalAlerts: 0,\n        eventTypesFound: eventTypeList,\n        suggestedFocusAreas: [\n          'Driver Safety',\n          'Speed Compliance',\n          'Vehicle Comparison',\n        ],\n      },\n    });\n\n    this._messages.update((msgs) => [...msgs, response]);\n    this._currentQuery.set(response.metadata?.queryUpdate?.query ?? '');\n    this._queryConfidence.set(response.metadata?.queryUpdate?.confidence ?? 0);\n  }\n\n  // ============================================================================\n  // Real API Implementations\n  // ============================================================================\n\n  private async apiStartSession(\n    context: ChatContext,\n    skipInitialMessage = false,\n  ): Promise<void> {\n    const request: StartSessionRequest = {\n      auth_token: this.authTokenManagerService.getAccessToken() ?? '',\n      base_url: this.apiUrlService.getCurrentApiUrl(),\n      context: {\n        client_id: context.clientId,\n        client_name: context.clientName,\n        date_range: {\n          start_date: context.dateRange.startDate,\n          end_date: context.dateRange.endDate,\n        },\n        vehicle_ids: context.vehicleIds,\n        vehicle_names: context.vehicleNames,\n      },\n    };\n\n    const response = await firstValueFrom(\n      this.http.post<StartSessionResponse>(\n        `${this.chatApiBaseUrl()}/chat/sessions`,\n        request,\n      ),\n    );\n\n    const session: ChatSession = {\n      id: response.session_id,\n      createdAt: new Date(response.created_at),\n      lastActivity: new Date(response.created_at),\n      expiresAt: new Date(response.expires_at),\n      status: response.status,\n      context,\n      currentQuery: this._currentQuery(),\n      messageCount: skipInitialMessage ? this._messages().length : 1,\n    };\n\n    this._session.set(session);\n\n    // When upgrading from guided session, don't add the API's initial message\n    // The user has already gone through the guided flow\n    if (!skipInitialMessage) {\n      const initialMessage = this.createAssistantMessage(\n        response.session_id,\n        response.initial_message.content,\n        {\n          suggestedActions: response.initial_message.suggested_actions.map(\n            (a) => ({\n              id: a.id,\n              label: a.label,\n              action: a.action,\n              value: a.value,\n            }),\n          ),\n        },\n      );\n      this._messages.set([initialMessage]);\n    }\n  }\n\n  private async apiSendMessage(\n    sessionId: string,\n    content: string,\n  ): Promise<void> {\n    // Build message content with collection context if currently collecting\n    const messageContent = this.buildMessageWithContext(content);\n\n    const request: SendMessageRequest = {\n      auth_token: this.authTokenManagerService.getAccessToken() ?? '',\n      base_url: this.apiUrlService.getCurrentApiUrl(),\n      content: messageContent,\n    };\n\n    const response = await firstValueFrom(\n      this.http.post<SendMessageResponse>(\n        `${this.chatApiBaseUrl()}/chat/sessions/${sessionId}/messages`,\n        request,\n      ),\n    );\n\n    const assistantMessage = this.createAssistantMessage(\n      sessionId,\n      response.assistant_message.content,\n      {\n        suggestedActions:\n          response.assistant_message.metadata.suggested_actions?.map((a) => ({\n            id: a.id,\n            label: a.label,\n            action: a.action,\n            value: a.value,\n          })),\n        queryUpdate: response.assistant_message.metadata.query_update\n          ? {\n              query: response.assistant_message.metadata.query_update.query,\n              confidence:\n                response.assistant_message.metadata.query_update.confidence,\n              changes: response.assistant_message.metadata.query_update.changes,\n            }\n          : undefined,\n        triggerDataCollection: response.assistant_message.metadata\n          .trigger_data_collection\n          ? {\n              dataTypes:\n                response.assistant_message.metadata.trigger_data_collection\n                  .data_types,\n            }\n          : undefined,\n      },\n    );\n\n    this._messages.update((msgs) => [...msgs, assistantMessage]);\n\n    if (response.assistant_message.metadata.query_update) {\n      this._currentQuery.set(\n        response.assistant_message.metadata.query_update.query,\n      );\n      this._queryConfidence.set(\n        response.assistant_message.metadata.query_update.confidence,\n      );\n    }\n  }\n\n  private async apiSubmitContext(\n    sessionId: string,\n    summarizedData: SummarizedData,\n  ): Promise<void> {\n    const request: SubmitContextRequest = {\n      auth_token: this.authTokenManagerService.getAccessToken() ?? '',\n      base_url: this.apiUrlService.getCurrentApiUrl(),\n      summarized_data: summarizedData,\n    };\n\n    const response = await firstValueFrom(\n      this.http.post<SubmitContextResponse>(\n        `${this.chatApiBaseUrl()}/chat/sessions/${sessionId}/context`,\n        request,\n      ),\n    );\n\n    const assistantMessage = this.createAssistantMessage(\n      sessionId,\n      response.assistant_message.content,\n      {\n        suggestedActions:\n          response.assistant_message.metadata.suggested_actions.map((a) => ({\n            id: a.id,\n            label: a.label,\n            action: a.action,\n            value: a.value,\n          })),\n        queryUpdate: {\n          query: response.assistant_message.metadata.query_update.query,\n          confidence:\n            response.assistant_message.metadata.query_update.confidence,\n          changes: response.assistant_message.metadata.query_update.changes,\n        },\n        dataInsights: {\n          totalTrips:\n            response.assistant_message.metadata.data_insights.total_trips,\n          totalEvents:\n            response.assistant_message.metadata.data_insights.total_events,\n          totalTelemetry:\n            response.assistant_message.metadata.data_insights.total_telemetry,\n          totalAlerts:\n            response.assistant_message.metadata.data_insights.total_alerts,\n          eventTypesFound:\n            response.assistant_message.metadata.data_insights.event_types_found,\n          suggestedFocusAreas:\n            response.assistant_message.metadata.data_insights\n              .suggested_focus_areas,\n        },\n      },\n    );\n\n    this._messages.update((msgs) => [...msgs, assistantMessage]);\n    this._currentQuery.set(\n      response.assistant_message.metadata.query_update.query,\n    );\n    this._queryConfidence.set(\n      response.assistant_message.metadata.query_update.confidence,\n    );\n  }\n\n  private async apiEndSession(sessionId: string): Promise<void> {\n    const request = {\n      auth_token: this.authTokenManagerService.getAccessToken() ?? '',\n      base_url: this.apiUrlService.getCurrentApiUrl(),\n      reason: 'user_completed',\n    };\n\n    await firstValueFrom(\n      this.http.post(\n        `${this.chatApiBaseUrl()}/chat/sessions/${sessionId}/end`,\n        request,\n      ),\n    );\n  }\n\n  // ============================================================================\n  // Helper Methods\n  // ============================================================================\n\n  private createUserMessage(sessionId: string, content: string): ChatMessage {\n    return {\n      id: this.generateId(),\n      sessionId,\n      sender: 'user',\n      content,\n      timestamp: new Date(),\n      status: 'sending',\n    };\n  }\n\n  private createAssistantMessage(\n    sessionId: string,\n    content: string,\n    metadata?: ChatMessage['metadata'],\n  ): ChatMessage {\n    return {\n      id: this.generateId(),\n      sessionId,\n      sender: 'assistant',\n      content,\n      timestamp: new Date(),\n      status: 'delivered',\n      metadata,\n    };\n  }\n\n  private generateId(): string {\n    return `${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n  }\n\n  /**\n   * Build message content with data collection context.\n   * This prepends context information so the AI knows what data is currently being collected.\n   */\n  private buildMessageWithContext(userContent: string): string {\n    const status = this._dataCollectionStatus();\n\n    // If not collecting, return the original message\n    if (!status.isCollecting || status.dataTypes.length === 0) {\n      return userContent;\n    }\n\n    // Build context prefix\n    const dataTypesText = status.dataTypes\n      .map((t) => t.charAt(0).toUpperCase() + t.slice(1))\n      .join(', ');\n\n    const vehicleProgress = status.vehicleProgress ?? [];\n    const completedVehicles = vehicleProgress.filter(\n      (v) => v.status === 'complete',\n    ).length;\n    const totalVehicles = vehicleProgress.length;\n\n    let contextPrefix = `[SYSTEM CONTEXT: Data collection is currently in progress. `;\n    contextPrefix += `Collecting: ${dataTypesText}. `;\n    contextPrefix += `Progress: ${status.progress}% (${completedVehicles}/${totalVehicles} vehicles). `;\n\n    if (status.currentVehicle !== undefined && status.currentVehicle !== '') {\n      contextPrefix += `Currently processing: ${status.currentVehicle}. `;\n    }\n\n    contextPrefix += `Do not suggest adding data types that are already being collected.]\\n\\n`;\n\n    return contextPrefix + userContent;\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n", "import {\n  Component,\n  input,\n  output,\n  computed,\n  inject,\n  ViewChild,\n  ElementRef,\n  OnDestroy,\n  effect,\n  AfterViewInit,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ButtonModule } from 'primeng/button';\nimport { CardModule } from 'primeng/card';\nimport { ProgressBarModule } from 'primeng/progressbar';\n\nimport { ChatMessageComponent } from '../chat-message/chat-message.component';\nimport { ChatInputComponent } from '../chat-input/chat-input.component';\nimport { QueryPreviewComponent } from '../query-preview/query-preview.component';\nimport { ChatSessionService } from '../../services/chat-session.service';\n\nimport {\n  ChatContext,\n  SuggestedAction,\n  DataType,\n  VehicleOption,\n  ClientInfo,\n  SummarizedData,\n  CollectedDataSummary,\n} from '../../models/chat.interface';\nimport { DateRangeSelection } from '../inline-date-picker/inline-date-picker.component';\nimport { Vehicle } from '../inline-vehicle-selector/inline-vehicle-selector.component';\n\n@Component({\n  selector: 'app-query-chat',\n  imports: [\n    CommonModule,\n    ButtonModule,\n    CardModule,\n    ProgressBarModule,\n    ChatMessageComponent,\n    ChatInputComponent,\n    QueryPreviewComponent,\n  ],\n  providers: [ChatSessionService],\n  templateUrl: './query-chat.component.html',\n  styleUrl: './query-chat.component.scss',\n})\nexport class QueryChatComponent implements OnDestroy, AfterViewInit {\n  // Injected services\n  readonly chatSessionService = inject(ChatSessionService);\n\n  // Inputs\n  dateRange = input<{ start: Date; end: Date } | null>(null);\n  selectedVehicles = input<VehicleOption[]>([]);\n  clientInfo = input<ClientInfo | null>(null);\n  fullWidthMode = input<boolean>(false);\n  guidedMode = input<boolean>(false);\n  availableVehiclesForSelection = input<VehicleOption[]>([]);\n\n  // Outputs\n  generateReport = output<string>();\n  dataCollectionTriggered = output<DataType[]>();\n  queryUpdated = output<string>();\n  confidenceUpdated = output<number>();\n  // Guided flow outputs\n  dateRangeSelected = output<DateRangeSelection>();\n  vehiclesSelected = output<Vehicle[]>();\n  dataTypesSelected = output<string[]>();\n\n  // View children\n  @ViewChild('messagesContainer')\n  messagesContainer!: ElementRef<HTMLDivElement>;\n  @ViewChild(ChatInputComponent) chatInput!: ChatInputComponent;\n\n  // Computed signals from service\n  readonly messages = this.chatSessionService.messages;\n  readonly isTyping = this.chatSessionService.isTyping;\n  readonly isConnecting = this.chatSessionService.isConnecting;\n  readonly currentQuery = this.chatSessionService.currentQuery;\n  readonly queryConfidence = this.chatSessionService.queryConfidence;\n  readonly error = this.chatSessionService.error;\n  readonly session = this.chatSessionService.session;\n  readonly dataCollectionStatus = this.chatSessionService.dataCollectionStatus;\n\n  // Form state signals from service (for guided mode)\n  readonly formDateRange = this.chatSessionService.formDateRange;\n  readonly formSelectedVehicles = this.chatSessionService.formSelectedVehicles;\n  readonly formSelectedDataTypes =\n    this.chatSessionService.formSelectedDataTypes;\n  readonly conversationPhase = this.chatSessionService.conversationPhase;\n\n  // Local computed\n  readonly canStartSession = computed(() => {\n    const range = this.dateRange();\n    const vehicles = this.selectedVehicles();\n    const client = this.clientInfo();\n    return range !== null && vehicles.length > 0 && client !== null;\n  });\n\n  // For guided mode, we only need a client to start\n  readonly canStartGuidedSession = computed(() => {\n    const client = this.clientInfo();\n    return client !== null;\n  });\n\n  readonly isSessionActive = computed(\n    () => this.session()?.status === 'active',\n  );\n\n  readonly canGenerateReport = computed(\n    () => this.currentQuery().length > 0 && this.queryConfidence() >= 50,\n  );\n\n  readonly queryChanges = computed(() => {\n    // Get the last message with query changes\n    const msgs = this.messages();\n    for (let i = msgs.length - 1; i >= 0; i--) {\n      const changes = msgs[i].metadata?.queryUpdate?.changes;\n      if (changes && changes.length > 0) {\n        return changes;\n      }\n    }\n    return [];\n  });\n\n  readonly collectedDataSummary = computed(() => {\n    return this.dataCollectionStatus().collectedData;\n  });\n\n  readonly completedVehiclesCount = computed(() => {\n    const progress = this.dataCollectionStatus().vehicleProgress;\n    if (!progress) return 0;\n    return progress.filter((v) => v.status === 'complete').length;\n  });\n\n  // Prompt starters for empty chat state\n  readonly promptStarters = [\n    {\n      icon: 'pi-shield',\n      text: 'Analyze driver safety scores',\n      description: 'Review speeding, harsh braking, and acceleration events',\n    },\n    {\n      icon: 'pi-chart-line',\n      text: 'Show fuel efficiency trends',\n      description: 'Compare consumption patterns across vehicles',\n    },\n    {\n      icon: 'pi-car',\n      text: 'Compare vehicle utilization',\n      description: 'Identify underused or overworked assets',\n    },\n    {\n      icon: 'pi-exclamation-triangle',\n      text: 'Highlight maintenance alerts',\n      description: 'Find vehicles needing attention',\n    },\n  ];\n\n  readonly showPromptStarters = computed(\n    () =>\n      this.isSessionActive() &&\n      this.messages().length === 0 &&\n      !this.isTyping(),\n  );\n\n  // Track if we've already started a session to avoid duplicate starts\n  private sessionStarted = false;\n\n  // Track if view has been initialized for safe scrolling\n  private viewInitialized = false;\n\n  constructor() {\n    // Auto-scroll to bottom when new messages arrive, typing indicator changes, or session starts\n    effect(() => {\n      // Subscribe to signals that should trigger scroll\n      const messageCount = this.messages().length;\n      const typing = this.isTyping();\n      const collecting = this.dataCollectionStatus().isCollecting;\n      const sessionActive = this.isSessionActive();\n\n      // Only scroll if view is initialized and we have content to scroll to\n      if (\n        this.viewInitialized &&\n        (messageCount > 0 || typing || collecting || sessionActive)\n      ) {\n        // Use a small delay to ensure DOM has rendered the new content\n        setTimeout(() => this.scrollToBottom(), 50);\n      }\n    });\n    // Auto-start guided session when conditions are met\n    effect(() => {\n      const isGuided = this.guidedMode();\n      const canStart = this.canStartGuidedSession();\n      const sessionActive = this.isSessionActive();\n      const isConnecting = this.isConnecting();\n\n      // Auto-start guided session if:\n      // 1. We're in guided mode\n      // 2. We can start a guided session (client is selected)\n      // 3. Session is not already active\n      // 4. Not currently connecting\n      // 5. Haven't already started a session\n      if (\n        isGuided &&\n        canStart &&\n        !sessionActive &&\n        !isConnecting &&\n        !this.sessionStarted\n      ) {\n        this.sessionStarted = true;\n        void this.startGuidedSession();\n      }\n    });\n\n    // Keep available vehicles in sync with the service\n    // This ensures vehicles are available when the vehicle selection phase is reached,\n    // even if they were loaded after the guided session started\n    effect(() => {\n      const availableVehicles = this.availableVehiclesForSelection();\n      if (availableVehicles.length > 0) {\n        this.chatSessionService.setAvailableVehicles(\n          availableVehicles.map((v) => ({ id: v.id, name: v.name })),\n        );\n      }\n    });\n\n    // Emit query and confidence updates to parent component\n    // This ensures the footer preview and header stay in sync with the chat service\n    effect(() => {\n      const query = this.currentQuery();\n      if (query) {\n        this.queryUpdated.emit(query);\n      }\n    });\n\n    effect(() => {\n      const confidence = this.queryConfidence();\n      this.confidenceUpdated.emit(confidence);\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.viewInitialized = true;\n    // Initial scroll to bottom if there are already messages\n    if (this.messages().length > 0) {\n      this.scrollToBottom();\n    }\n  }\n\n  ngOnDestroy(): void {\n    void this.chatSessionService.endSession();\n  }\n\n  async startSession(): Promise<void> {\n    const range = this.dateRange();\n    const vehicles = this.selectedVehicles();\n    const client = this.clientInfo();\n\n    if (!range || vehicles.length === 0 || !client) {\n      return;\n    }\n\n    const context: ChatContext = {\n      clientId: client.id,\n      clientName: client.name,\n      dateRange: {\n        startDate: range.start.toISOString(),\n        endDate: range.end.toISOString(),\n      },\n      vehicleIds: vehicles.map((v) => v.id),\n      vehicleNames: vehicles.map((v) => v.name),\n    };\n\n    try {\n      await this.chatSessionService.startSession(context);\n      this.focusInput();\n    } catch (err) {\n      console.error('Failed to start chat session:', err);\n    }\n  }\n\n  async onSendMessage(content: string): Promise<void> {\n    try {\n      await this.chatSessionService.sendMessage(content);\n\n      // Check if we need to trigger data collection\n      const lastMessage = this.messages()[this.messages().length - 1];\n      const trigger = lastMessage?.metadata?.triggerDataCollection;\n\n      if (trigger && trigger.dataTypes.length > 0) {\n        this.dataCollectionTriggered.emit(trigger.dataTypes);\n      }\n    } catch (err) {\n      console.error('Failed to send message:', err);\n    }\n  }\n\n  async onActionSelected(action: SuggestedAction): Promise<void> {\n    // Handle special actions\n    if (action.value === 'generate' || action.value === 'generate_report') {\n      this.onGenerateReport();\n      return;\n    }\n\n    // Send action as a message\n    await this.onSendMessage(action.label);\n  }\n\n  async onMultiActionsSelected(actions: SuggestedAction[]): Promise<void> {\n    if (actions.length === 0) return;\n\n    // Extract data types from selected actions\n    const dataTypes = actions\n      .map((a) => a.value.toLowerCase())\n      .filter((v): v is DataType =>\n        ['trips', 'events', 'telemetry', 'alerts'].includes(v),\n      );\n\n    // Get non-data-type actions\n    const otherActions = actions.filter(\n      (a) =>\n        !['trips', 'events', 'telemetry', 'alerts'].includes(\n          a.value.toLowerCase(),\n        ),\n    );\n\n    // If we have data types, trigger collection\n    if (dataTypes.length > 0) {\n      this.dataCollectionTriggered.emit(dataTypes);\n    }\n\n    // Build message with all selected options\n    const selectedLabels = actions.map((a) => a.label).join(', ');\n\n    // Send message to chat about the selections\n    if (dataTypes.length > 0 && otherActions.length === 0) {\n      // Only data types selected\n      await this.onSendMessage(`I'd like to include: ${selectedLabels}`);\n    } else if (dataTypes.length === 0 && otherActions.length > 0) {\n      // Only non-data-type actions selected\n      await this.onSendMessage(`I want to: ${selectedLabels}`);\n    } else {\n      // Mixed selection\n      await this.onSendMessage(`Selected options: ${selectedLabels}`);\n    }\n  }\n\n  async onPromptStarterClick(prompt: { text: string }): Promise<void> {\n    await this.onSendMessage(prompt.text);\n  }\n\n  onGenerateReport(): void {\n    const query = this.currentQuery();\n    if (query) {\n      this.generateReport.emit(query);\n    }\n  }\n\n  // Called by parent when data collection completes\n  async submitDataContext(summarizedData: SummarizedData): Promise<void> {\n    try {\n      // Calculate summary for display\n      let trips = 0;\n      let events = 0;\n      let telemetry = 0;\n      let alerts = 0;\n\n      for (const vehicle of Object.values(summarizedData.vehicles)) {\n        trips += vehicle.data_summary.trip_count;\n        events += vehicle.data_summary.event_count;\n        telemetry += vehicle.data_summary.telemetry_count;\n        alerts += vehicle.data_summary.alert_count;\n      }\n\n      const summary: CollectedDataSummary = {\n        trips,\n        events,\n        telemetry,\n        alerts,\n      };\n      this.chatSessionService.setDataCollectionComplete(summary);\n\n      // Send to backend\n      await this.chatSessionService.submitDataContext(summarizedData);\n    } catch (err) {\n      console.error('Failed to submit data context:', err);\n    }\n  }\n\n  // Called by parent to update collection progress\n  updateCollectionProgress(progress: number): void {\n    this.chatSessionService.updateDataCollectionProgress(progress);\n  }\n\n  // Called by parent to start collection\n  startDataCollection(dataTypes: DataType[]): void {\n    const vehicles = this.selectedVehicles().map((v) => ({\n      id: v.id,\n      name: v.name,\n    }));\n    this.chatSessionService.setDataCollectionStarted(dataTypes, vehicles);\n  }\n\n  private focusInput(): void {\n    setTimeout(() => {\n      this.chatInput?.focus();\n    }, 100);\n  }\n\n  /**\n   * Scrolls the messages container to the bottom.\n   * Uses double requestAnimationFrame to ensure the DOM has fully rendered before scrolling.\n   * In full-width mode, scrolls the parent .chat-area container instead.\n   */\n  private scrollToBottom(): void {\n    // Use double requestAnimationFrame to ensure DOM updates are complete\n    // First frame: Angular updates the DOM\n    // Second frame: Browser has painted the changes\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        let container: HTMLElement | null | undefined =\n          this.messagesContainer?.nativeElement;\n\n        // In full-width mode, the actual scroll container is the parent .chat-area\n        // We need to find and scroll that instead\n        if (this.fullWidthMode() && container != null) {\n          const chatArea = container.closest('.chat-area');\n          if (chatArea != null) {\n            container = chatArea as HTMLElement;\n          }\n        }\n\n        if (container != null) {\n          container.scrollTo({\n            top: container.scrollHeight,\n            behavior: 'smooth',\n          });\n        }\n      });\n    });\n  }\n\n  // Called by parent to clear session and start fresh\n  clearSession(): void {\n    void this.chatSessionService.endSession();\n    // Reset the flag so the effect can auto-start a new session\n    this.sessionStarted = false;\n  }\n\n  // Guided conversation flow handlers\n  async startGuidedSession(): Promise<void> {\n    const client = this.clientInfo();\n    if (!client) {\n      return;\n    }\n\n    try {\n      // Pass available vehicles to the service before starting\n      const availableVehicles = this.availableVehiclesForSelection();\n      if (availableVehicles.length > 0) {\n        this.chatSessionService.setAvailableVehicles(\n          availableVehicles.map((v) => ({ id: v.id, name: v.name })),\n        );\n      }\n\n      await this.chatSessionService.startGuidedSession(client.id, client.name);\n      this.focusInput();\n    } catch (err) {\n      console.error('Failed to start guided session:', err);\n    }\n  }\n\n  // Handler for inline date picker selection\n  onDateRangeSelected(dateRange: DateRangeSelection): void {\n    // Update service state\n    this.chatSessionService.setDateRange(dateRange.start, dateRange.end);\n    // Emit to parent\n    this.dateRangeSelected.emit(dateRange);\n  }\n\n  // Handler for inline vehicle selector\n  onVehiclesSelected(vehicles: Vehicle[]): void {\n    // Update service state\n    this.chatSessionService.setSelectedVehicles(vehicles);\n    // Emit to parent\n    this.vehiclesSelected.emit(vehicles);\n  }\n\n  // Handler for inline data type selector\n  onDataTypesSelected(dataTypes: string[]): void {\n    // Update service state\n    const typedDataTypes = dataTypes.filter((t): t is DataType =>\n      ['trips', 'events', 'telemetry', 'alerts'].includes(t),\n    );\n    this.chatSessionService.setSelectedDataTypes(typedDataTypes);\n    // Emit to parent\n    this.dataTypesSelected.emit(dataTypes);\n    // Trigger data collection\n    if (typedDataTypes.length > 0) {\n      this.dataCollectionTriggered.emit(typedDataTypes);\n    }\n  }\n}\n", "<div class=\"query-chat-container\" [class.full-width-mode]=\"fullWidthMode()\">\n  <!-- Main layout: Chat + Preview side by side -->\n  <div class=\"chat-layout\">\n    <!-- Chat Panel -->\n    <div class=\"chat-panel\">\n      <!-- Header (hidden in full-width mode since parent provides header) -->\n      @if (!fullWidthMode()) {\n        <div class=\"chat-header\">\n          <div class=\"header-info\">\n            <i class=\"pi pi-comments\"></i>\n            <span>Report Query Builder</span>\n          </div>\n          @if (isSessionActive()) {\n            <div class=\"session-status active\">\n              <i class=\"pi pi-circle-fill\"></i>\n              <span>Active</span>\n            </div>\n          }\n        </div>\n      }\n\n      <!-- Messages Area -->\n      <div class=\"messages-area\" #messagesContainer>\n        @if (isConnecting()) {\n          <div class=\"connecting-state\">\n            <i class=\"pi pi-spin pi-spinner\"></i>\n            <span>Starting session...</span>\n          </div>\n        } @else if (\n          !isSessionActive() && guidedMode() && !canStartGuidedSession()\n        ) {\n          <!-- Guided mode requires only a client -->\n          <div class=\"setup-required\">\n            <i class=\"pi pi-info-circle\"></i>\n            <p>\n              Please select a client from the sidebar to start building your\n              report.\n            </p>\n          </div>\n        } @else if (\n          !isSessionActive() && guidedMode() && canStartGuidedSession()\n        ) {\n          <!-- Auto-start guided session -->\n          <div class=\"connecting-state\">\n            <i class=\"pi pi-spin pi-spinner\"></i>\n            <span>Starting guided session...</span>\n          </div>\n        } @else if (!isSessionActive() && !guidedMode() && !canStartSession()) {\n          <div class=\"setup-required\">\n            <i class=\"pi pi-info-circle\"></i>\n            <p>\n              Please select a date range and at least one vehicle to start\n              building your query.\n            </p>\n          </div>\n        } @else if (!isSessionActive() && !guidedMode() && canStartSession()) {\n          <div class=\"start-session\">\n            <i class=\"pi pi-play-circle\"></i>\n            <p>Ready to start building your report query.</p>\n            <button\n              pButton\n              type=\"button\"\n              label=\"Start Chat Session\"\n              icon=\"pi pi-comments\"\n              (click)=\"startSession()\"\n              class=\"p-button-primary\"\n            >\n              <span class=\"p-button-label\">Start Chat Session</span>\n            </button>\n          </div>\n        } @else {\n          <!-- Prompt starters (shown when no messages yet) -->\n          @if (showPromptStarters()) {\n            <div class=\"prompt-starters\">\n              <div class=\"prompt-starters-header\">\n                <i class=\"pi pi-lightbulb\"></i>\n                <span>Get started with a suggestion:</span>\n              </div>\n              <div class=\"prompt-starters-grid\">\n                @for (prompt of promptStarters; track prompt.text) {\n                  <button\n                    class=\"prompt-starter-card\"\n                    type=\"button\"\n                    (click)=\"onPromptStarterClick(prompt)\"\n                  >\n                    <i class=\"pi {{ prompt.icon }} prompt-icon\"></i>\n                    <span class=\"prompt-text\">{{ prompt.text }}</span>\n                    <span class=\"prompt-description\">{{\n                      prompt.description\n                    }}</span>\n                  </button>\n                }\n              </div>\n              <p class=\"prompt-starters-hint\">\n                Or type your own question below\n              </p>\n            </div>\n          }\n\n          <!-- Messages list -->\n          @for (message of messages(); track message.id) {\n            <app-chat-message\n              [message]=\"message\"\n              [isDisabled]=\"dataCollectionStatus().isCollecting\"\n              [collectingDataTypes]=\"dataCollectionStatus().dataTypes\"\n              (actionSelected)=\"onActionSelected($event)\"\n              (multiActionsSelected)=\"onMultiActionsSelected($event)\"\n              (dateRangeSelected)=\"onDateRangeSelected($event)\"\n              (vehiclesSelected)=\"onVehiclesSelected($event)\"\n              (dataTypesSelected)=\"onDataTypesSelected($event)\"\n            />\n          }\n\n          <!-- Typing indicator -->\n          @if (isTyping()) {\n            <div class=\"typing-indicator\">\n              <div class=\"typing-bubble\">\n                <span class=\"dot\"></span>\n                <span class=\"dot\"></span>\n                <span class=\"dot\"></span>\n              </div>\n            </div>\n          }\n\n          <!-- Data collection progress (inline) -->\n          @if (dataCollectionStatus().isCollecting) {\n            <div class=\"collection-progress-inline\">\n              <div class=\"progress-header\">\n                <i class=\"pi pi-spin pi-spinner\"></i>\n                <span class=\"progress-title\">Collecting data...</span>\n                @if (dataCollectionStatus().vehicleProgress) {\n                  <span class=\"progress-count\">\n                    {{ completedVehiclesCount() }}/{{\n                      dataCollectionStatus().vehicleProgress!.length\n                    }}\n                    vehicles\n                  </span>\n                }\n              </div>\n              <p-progressBar\n                [value]=\"dataCollectionStatus().progress\"\n                [showValue]=\"true\"\n                styleClass=\"inline-progress-bar\"\n              ></p-progressBar>\n              @if (dataCollectionStatus().statusMessage) {\n                <div class=\"progress-detail\">\n                  {{ dataCollectionStatus().statusMessage }}\n                </div>\n              }\n            </div>\n          }\n        }\n      </div>\n\n      <!-- Error message -->\n      @if (error()) {\n        <div class=\"error-banner\">\n          <i class=\"pi pi-exclamation-triangle\"></i>\n          <span>{{ error() }}</span>\n        </div>\n      }\n\n      <!-- Input Area -->\n      @if (isSessionActive()) {\n        <app-chat-input\n          [disabled]=\"!isSessionActive()\"\n          [isLoading]=\"isTyping()\"\n          placeholder=\"Type your message or select a suggestion...\"\n          (messageSent)=\"onSendMessage($event)\"\n        />\n      }\n\n      <!-- Generate Report Button (hidden in full-width mode, parent handles it) -->\n      @if (canGenerateReport() && !fullWidthMode()) {\n        <div class=\"generate-button-container\">\n          <button\n            pButton\n            type=\"button\"\n            label=\"Generate Report\"\n            icon=\"pi pi-chart-bar\"\n            (click)=\"onGenerateReport()\"\n            class=\"p-button-success generate-button\"\n          >\n            <span class=\"p-button-label\">Generate Report</span>\n          </button>\n        </div>\n      }\n    </div>\n\n    <!-- Query Preview Panel (hidden in full-width mode, parent handles it) -->\n    @if (!fullWidthMode()) {\n      <div class=\"preview-panel\">\n        <app-query-preview\n          [query]=\"currentQuery()\"\n          [confidence]=\"queryConfidence()\"\n          [changes]=\"queryChanges()\"\n          [isLoading]=\"isTyping()\"\n          [isCollecting]=\"dataCollectionStatus().isCollecting\"\n          [collectionProgress]=\"dataCollectionStatus().progress\"\n          [collectedData]=\"collectedDataSummary()\"\n          [dataTypes]=\"dataCollectionStatus().dataTypes\"\n          [statusMessage]=\"dataCollectionStatus().statusMessage ?? ''\"\n          [currentVehicle]=\"dataCollectionStatus().currentVehicle ?? ''\"\n          [vehicleProgress]=\"dataCollectionStatus().vehicleProgress ?? []\"\n        />\n      </div>\n    }\n  </div>\n</div>\n", "import {\n  Component,\n  input,\n  output,\n  computed,\n  signal,\n  ViewChild,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Popover, PopoverModule } from 'primeng/popover';\nimport { CheckboxModule } from 'primeng/checkbox';\nimport { ButtonModule } from 'primeng/button';\nimport { FormsModule } from '@angular/forms';\nimport { DatePickerModule } from 'primeng/datepicker';\n\nexport interface HeaderSummary {\n  dateRange: { start: Date; end: Date } | null;\n  vehicleCount: number;\n  vehicleNames: string[];\n  dataTypes: string[];\n  queryConfidence: number;\n  currentQuery: string;\n}\n\nexport interface VehicleOption {\n  id: string;\n  name: string;\n  selected: boolean;\n}\n\nexport interface DataTypeOption {\n  id: string;\n  label: string;\n  description: string;\n  icon: string;\n}\n\nconst DEFAULT_DATA_TYPES: DataTypeOption[] = [\n  {\n    id: 'trips',\n    label: 'Trips',\n    description: 'Journey data with start/end locations',\n    icon: 'pi-map-marker',\n  },\n  {\n    id: 'events',\n    label: 'Events',\n    description: 'Driver behavior events',\n    icon: 'pi-exclamation-triangle',\n  },\n  {\n    id: 'telemetry',\n    label: 'Telemetry',\n    description: 'Real-time sensor data',\n    icon: 'pi-chart-line',\n  },\n  {\n    id: 'alerts',\n    label: 'Alerts',\n    description: 'System alerts and notifications',\n    icon: 'pi-bell',\n  },\n];\n\n@Component({\n  selector: 'app-chat-summary-header',\n  imports: [\n    CommonModule,\n    PopoverModule,\n    CheckboxModule,\n    ButtonModule,\n    FormsModule,\n    DatePickerModule,\n  ],\n  templateUrl: './chat-summary-header.component.html',\n  styleUrl: './chat-summary-header.component.scss',\n})\nexport class ChatSummaryHeaderComponent {\n  @ViewChild('vehiclePanel') vehiclePanel!: Popover;\n  @ViewChild('datePanel') datePanel!: Popover;\n  @ViewChild('dataTypesPanel') dataTypesPanel!: Popover;\n\n  summary = input.required<HeaderSummary>();\n  availableVehicles = input<VehicleOption[]>([]);\n  selectedVehicleIds = input<string[]>([]);\n  collectingDataTypes = input<string[]>([]); // Data types currently being collected\n\n  // Outputs for editing\n  dateRangeClicked = output<void>();\n  vehiclesChanged = output<string[]>();\n  dateRangeChanged = output<{ start: Date; end: Date }>();\n  dataTypesClicked = output<void>();\n  dataTypesChanged = output<string[]>(); // New data types to add\n\n  // Local state for vehicle selection\n  localSelectedIds = signal<Set<string>>(new Set());\n\n  // Local state for date range editing\n  localDateRange = signal<Date[] | null>(null);\n\n  // Local state for data type selection\n  localSelectedDataTypes = signal<Set<string>>(new Set());\n\n  // Today's date for max date picker restriction\n  readonly today = new Date();\n\n  readonly hasDateRange = computed(() => this.summary().dateRange !== null);\n\n  readonly dateRangeText = computed(() => {\n    const range = this.summary().dateRange;\n    if (!range) return 'Not selected';\n\n    const formatDate = (date: Date) => {\n      return date.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n      });\n    };\n\n    const start = formatDate(range.start);\n    const end = formatDate(range.end);\n\n    if (start === end) {\n      return start;\n    }\n    return `${start} - ${end}`;\n  });\n\n  readonly vehicleText = computed(() => {\n    const count = this.summary().vehicleCount;\n    if (count === 0) return 'None selected';\n    if (count === 1) return this.summary().vehicleNames[0] || '1 vehicle';\n    if (count <= 2) return this.summary().vehicleNames.join(', ');\n    return `${count} vehicles`;\n  });\n\n  readonly dataTypesText = computed(() => {\n    const types = this.summary().dataTypes;\n    if (types.length === 0) return 'None';\n    return types.map((t) => this.capitalizeFirst(t)).join(', ');\n  });\n\n  readonly confidenceLevel = computed(() => {\n    const confidence = this.summary().queryConfidence;\n    if (confidence >= 90) return 'high';\n    if (confidence >= 70) return 'medium';\n    if (confidence >= 50) return 'building';\n    return 'low';\n  });\n\n  readonly confidenceLabel = computed(() => {\n    const level = this.confidenceLevel();\n    switch (level) {\n      case 'high':\n        return 'Ready';\n      case 'medium':\n        return 'Good';\n      case 'building':\n        return 'Building';\n      default:\n        return 'Starting';\n    }\n  });\n\n  readonly showConfidence = computed(\n    () => this.summary().currentQuery.length > 0,\n  );\n\n  private capitalizeFirst(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  // Computed for local vehicle options with selection state\n  readonly localVehicleOptions = computed(() => {\n    const available = this.availableVehicles();\n    const selectedIds = this.localSelectedIds();\n    return available.map((v) => ({\n      ...v,\n      selected: selectedIds.has(v.id),\n    }));\n  });\n\n  // Handle date item click - opens date picker panel\n  onDateClick(event: Event): void {\n    this.datePanel?.toggle(event);\n  }\n\n  // Handle vehicle item click - opens vehicle selection panel\n  onVehicleClick(event: Event): void {\n    this.vehiclePanel?.toggle(event);\n  }\n\n  // Toggle individual vehicle selection\n  toggleVehicle(vehicleId: string): void {\n    this.localSelectedIds.update((ids) => {\n      const newIds = new Set(ids);\n      if (newIds.has(vehicleId)) {\n        newIds.delete(vehicleId);\n      } else {\n        newIds.add(vehicleId);\n      }\n      return newIds;\n    });\n  }\n\n  // Check if a vehicle is selected\n  isVehicleSelected(vehicleId: string): boolean {\n    return this.localSelectedIds().has(vehicleId);\n  }\n\n  // Apply vehicle selection changes\n  applyVehicleChanges(): void {\n    const selectedIds = Array.from(this.localSelectedIds());\n    this.vehiclesChanged.emit(selectedIds);\n    this.vehiclePanel?.hide();\n  }\n\n  // Cancel vehicle selection changes\n  cancelVehicleChanges(): void {\n    // Reset to original selection\n    const ids = this.selectedVehicleIds();\n    this.localSelectedIds.set(new Set(ids));\n    this.vehiclePanel?.hide();\n  }\n\n  // Handle date range selection - called on each date selection in range mode\n  onDateRangeSelect(_date: Date): void {\n    // The localDateRange signal is already bound via ngModel,\n    // so we just need to trigger any side effects here if needed\n  }\n\n  // Apply date range changes\n  applyDateChanges(): void {\n    const range = this.localDateRange();\n    if (\n      range !== null &&\n      range.length === 2 &&\n      range[0] !== undefined &&\n      range[1] !== undefined\n    ) {\n      this.dateRangeChanged.emit({ start: range[0], end: range[1] });\n    }\n    this.datePanel?.hide();\n  }\n\n  // Cancel date range changes\n  cancelDateChanges(): void {\n    // Reset to original range\n    const range = this.summary().dateRange;\n    if (range) {\n      this.localDateRange.set([range.start, range.end]);\n    } else {\n      this.localDateRange.set(null);\n    }\n    this.datePanel?.hide();\n  }\n\n  // ============================================================================\n  // Data Types Panel Methods\n  // ============================================================================\n\n  // Available data type options\n  readonly availableDataTypeOptions = computed(() => DEFAULT_DATA_TYPES);\n\n  // Check if a data type is currently being collected\n  isDataTypeCollecting(dataTypeId: string): boolean {\n    return this.collectingDataTypes().includes(dataTypeId);\n  }\n\n  // Check if a data type is selected\n  isDataTypeSelected(dataTypeId: string): boolean {\n    return this.localSelectedDataTypes().has(dataTypeId);\n  }\n\n  // Check if there are any collecting data types\n  readonly hasCollectingDataTypes = computed(\n    () => this.collectingDataTypes().length > 0,\n  );\n\n  // Count of new data types to add (excluding already collecting)\n  readonly newDataTypeSelectionCount = computed(() => {\n    const selected = this.localSelectedDataTypes();\n    const collecting = new Set(this.collectingDataTypes());\n    const currentTypes = new Set(this.summary().dataTypes);\n\n    // Count types that are selected but not collecting and not already in summary\n    return Array.from(selected).filter(\n      (id) => !collecting.has(id) && !currentTypes.has(id),\n    ).length;\n  });\n\n  // Handle data types click - opens data types panel\n  onDataTypesClick(event: Event): void {\n    this.dataTypesPanel?.toggle(event);\n  }\n\n  // Toggle individual data type selection\n  toggleDataType(dataTypeId: string): void {\n    // Don't allow toggling types that are being collected\n    if (this.isDataTypeCollecting(dataTypeId)) {\n      return;\n    }\n\n    this.localSelectedDataTypes.update((ids) => {\n      const newIds = new Set(ids);\n      if (newIds.has(dataTypeId)) {\n        newIds.delete(dataTypeId);\n      } else {\n        newIds.add(dataTypeId);\n      }\n      return newIds;\n    });\n  }\n\n  // Apply data type changes\n  applyDataTypeChanges(): void {\n    const collecting = new Set(this.collectingDataTypes());\n    const currentTypes = new Set(this.summary().dataTypes);\n\n    // Get newly selected types (not collecting and not already selected)\n    const newTypes = Array.from(this.localSelectedDataTypes()).filter(\n      (id) => !collecting.has(id) && !currentTypes.has(id),\n    );\n\n    if (newTypes.length > 0) {\n      this.dataTypesChanged.emit(newTypes);\n    }\n    this.dataTypesPanel?.hide();\n  }\n\n  // Cancel data type changes\n  cancelDataTypeChanges(): void {\n    // Reset to original selection\n    const currentTypes = this.summary().dataTypes;\n    const collecting = this.collectingDataTypes();\n    const combined = new Set([...currentTypes, ...collecting]);\n    this.localSelectedDataTypes.set(combined);\n    this.dataTypesPanel?.hide();\n  }\n}\n", "<header class=\"chat-summary-header\">\n  <div class=\"header-content\">\n    <!-- Report Title -->\n    <div class=\"header-title\">\n      <i class=\"pi pi-chart-bar\"></i>\n      <span>Report Builder</span>\n    </div>\n\n    <!-- Summary Items -->\n    <div class=\"summary-items\">\n      <!-- Date Range (clickable) -->\n      <button\n        class=\"summary-item clickable\"\n        [class.empty]=\"!hasDateRange()\"\n        (click)=\"onDateClick($event)\"\n        type=\"button\"\n        title=\"Click to change date range\"\n      >\n        <i class=\"pi pi-calendar\"></i>\n        <span class=\"summary-value\">{{ dateRangeText() }}</span>\n        <i class=\"pi pi-chevron-down edit-icon\"></i>\n      </button>\n\n      <!-- Vehicles (clickable) -->\n      <button\n        class=\"summary-item clickable\"\n        [class.empty]=\"summary().vehicleCount === 0\"\n        (click)=\"onVehicleClick($event)\"\n        type=\"button\"\n        title=\"Click to edit vehicle selection\"\n      >\n        <i class=\"pi pi-car\"></i>\n        <span class=\"summary-value\">{{ vehicleText() }}</span>\n        <i class=\"pi pi-chevron-down edit-icon\"></i>\n      </button>\n\n      <!-- Data Types (clickable) -->\n      <button\n        class=\"summary-item clickable\"\n        [class.empty]=\"summary().dataTypes.length === 0\"\n        (click)=\"onDataTypesClick($event)\"\n        type=\"button\"\n        title=\"Click to edit data types\"\n      >\n        <i class=\"pi pi-database\"></i>\n        <span class=\"summary-value\">{{ dataTypesText() }}</span>\n        <i class=\"pi pi-chevron-down edit-icon\"></i>\n      </button>\n    </div>\n\n    <!-- Confidence Badge -->\n    @if (showConfidence()) {\n      <div class=\"confidence-badge\" [attr.data-level]=\"confidenceLevel()\">\n        <span class=\"confidence-value\">{{ summary().queryConfidence }}%</span>\n        <span class=\"confidence-label\">{{ confidenceLabel() }}</span>\n      </div>\n    }\n  </div>\n</header>\n\n<!-- Date Range Panel -->\n<p-popover #datePanel styleClass=\"header-edit-panel date-panel\">\n  <div class=\"panel-content\">\n    <div class=\"panel-header\">\n      <h4>Change Date Range</h4>\n    </div>\n    <div class=\"panel-body\">\n      <p-datepicker\n        [(ngModel)]=\"localDateRange\"\n        selectionMode=\"range\"\n        [inline]=\"true\"\n        [showButtonBar]=\"false\"\n        [numberOfMonths]=\"1\"\n        dateFormat=\"M d\"\n        [maxDate]=\"today\"\n        (onSelect)=\"onDateRangeSelect($event)\"\n      />\n    </div>\n    <div class=\"panel-footer\">\n      <p-button\n        label=\"Cancel\"\n        severity=\"secondary\"\n        [text]=\"true\"\n        size=\"small\"\n        (onClick)=\"cancelDateChanges()\"\n      />\n      <p-button\n        label=\"Apply\"\n        severity=\"primary\"\n        size=\"small\"\n        (onClick)=\"applyDateChanges()\"\n      />\n    </div>\n  </div>\n</p-popover>\n\n<!-- Vehicle Selection Panel -->\n<p-popover #vehiclePanel styleClass=\"header-edit-panel vehicle-panel\">\n  <div class=\"panel-content\">\n    <div class=\"panel-header\">\n      <h4>Select Vehicles</h4>\n      <span class=\"selection-count\"\n        >{{ localSelectedIds().size }} selected</span\n      >\n    </div>\n    <div class=\"panel-body vehicle-list\">\n      @for (vehicle of localVehicleOptions(); track vehicle.id) {\n        <div class=\"vehicle-item\" (click)=\"toggleVehicle(vehicle.id)\">\n          <p-checkbox\n            [ngModel]=\"isVehicleSelected(vehicle.id)\"\n            [binary]=\"true\"\n            [inputId]=\"'vehicle-' + vehicle.id\"\n            (ngModelChange)=\"toggleVehicle(vehicle.id)\"\n          />\n          <label [for]=\"'vehicle-' + vehicle.id\" class=\"vehicle-name\">\n            {{ vehicle.name }}\n          </label>\n        </div>\n      } @empty {\n        <div class=\"empty-state\">No vehicles available</div>\n      }\n    </div>\n    <div class=\"panel-footer\">\n      <p-button\n        label=\"Cancel\"\n        severity=\"secondary\"\n        [text]=\"true\"\n        size=\"small\"\n        (onClick)=\"cancelVehicleChanges()\"\n      />\n      <p-button\n        label=\"Apply\"\n        severity=\"primary\"\n        size=\"small\"\n        [disabled]=\"localSelectedIds().size === 0\"\n        (onClick)=\"applyVehicleChanges()\"\n      />\n    </div>\n  </div>\n</p-popover>\n\n<!-- Data Types Selection Panel -->\n<p-popover #dataTypesPanel styleClass=\"header-edit-panel data-types-panel\">\n  <div class=\"panel-content\">\n    <div class=\"panel-header\">\n      <h4>Select Data Types</h4>\n      <span class=\"selection-count\"\n        >{{ newDataTypeSelectionCount() }} to add</span\n      >\n    </div>\n    <div class=\"panel-body data-types-list\">\n      @for (dataType of availableDataTypeOptions(); track dataType.id) {\n        <div\n          class=\"data-type-item\"\n          [class.collecting]=\"isDataTypeCollecting(dataType.id)\"\n          [class.selected]=\"isDataTypeSelected(dataType.id)\"\n          (click)=\"toggleDataType(dataType.id)\"\n        >\n          @if (isDataTypeCollecting(dataType.id)) {\n            <i class=\"pi pi-spin pi-spinner collecting-icon\"></i>\n          } @else {\n            <p-checkbox\n              [ngModel]=\"isDataTypeSelected(dataType.id)\"\n              [binary]=\"true\"\n              [inputId]=\"'datatype-' + dataType.id\"\n              [disabled]=\"isDataTypeCollecting(dataType.id)\"\n              (ngModelChange)=\"toggleDataType(dataType.id)\"\n            />\n          }\n          <div class=\"data-type-info\">\n            <label [for]=\"'datatype-' + dataType.id\" class=\"data-type-name\">\n              <i class=\"pi {{ dataType.icon }}\"></i>\n              {{ dataType.label }}\n            </label>\n            <span class=\"data-type-description\">\n              @if (isDataTypeCollecting(dataType.id)) {\n                Collecting...\n              } @else {\n                {{ dataType.description }}\n              }\n            </span>\n          </div>\n        </div>\n      }\n    </div>\n    <div class=\"panel-footer\">\n      <p-button\n        label=\"Cancel\"\n        severity=\"secondary\"\n        [text]=\"true\"\n        size=\"small\"\n        (onClick)=\"cancelDataTypeChanges()\"\n      />\n      <p-button\n        [label]=\"hasCollectingDataTypes() ? 'Add to Collection' : 'Apply'\"\n        severity=\"primary\"\n        size=\"small\"\n        [disabled]=\"newDataTypeSelectionCount() === 0\"\n        (onClick)=\"applyDataTypeChanges()\"\n      />\n    </div>\n  </div>\n</p-popover>\n", "import { Component, input, output, computed, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ButtonModule } from 'primeng/button';\nimport { ProgressBarModule } from 'primeng/progressbar';\nimport { TextareaModule } from 'primeng/textarea';\n\n@Component({\n  selector: 'app-chat-footer-preview',\n  imports: [\n    CommonModule,\n    FormsModule,\n    ButtonModule,\n    ProgressBarModule,\n    TextareaModule,\n  ],\n  templateUrl: './chat-footer-preview.component.html',\n  styleUrl: './chat-footer-preview.component.scss',\n})\nexport class ChatFooterPreviewComponent {\n  // Inputs\n  query = input<string>('');\n  confidence = input<number>(0);\n  isLoading = input<boolean>(false);\n  isCollecting = input<boolean>(false);\n  collectionProgress = input<number>(0);\n\n  // Outputs\n  generateReport = output<void>();\n  queryChanged = output<string>();\n\n  // Local state for editing\n  isEditing = signal<boolean>(false);\n  editedQuery = signal<string>('');\n\n  // Computed\n  readonly hasQuery = computed(() => this.query().length > 0);\n\n  // Generate button is enabled as long as there's a query with sufficient confidence\n  // Loading/collecting states don't block the button - user can still click to generate\n  readonly canGenerate = computed(\n    () => this.hasQuery() && this.confidence() >= 50,\n  );\n\n  readonly confidenceLevel = computed(() => {\n    const conf = this.confidence();\n    if (conf >= 90) return 'high';\n    if (conf >= 70) return 'medium';\n    if (conf >= 50) return 'building';\n    return 'low';\n  });\n\n  readonly confidenceLabel = computed(() => {\n    const level = this.confidenceLevel();\n    switch (level) {\n      case 'high':\n        return 'Ready to generate';\n      case 'medium':\n        return 'Almost ready';\n      case 'building':\n        return 'Continue refining';\n      default:\n        return 'Keep chatting...';\n    }\n  });\n\n  // Show full query when editing, otherwise show preview\n  readonly queryPreview = computed(() => {\n    const q = this.query();\n    if (q.length <= 150) return q;\n    return q.substring(0, 147) + '...';\n  });\n\n  readonly buttonLabel = computed(() => {\n    if (this.isCollecting()) return 'Collecting Data...';\n    if (this.isLoading()) return 'Generating...';\n    return 'Generate Report';\n  });\n\n  onGenerateClick(): void {\n    if (this.canGenerate()) {\n      this.generateReport.emit();\n    }\n  }\n\n  // Start editing the query\n  onQueryClick(): void {\n    if (!this.hasQuery()) return;\n    this.editedQuery.set(this.query());\n    this.isEditing.set(true);\n  }\n\n  // Save edited query\n  saveEdit(): void {\n    const newQuery = this.editedQuery().trim();\n    if (newQuery.length > 0) {\n      this.queryChanged.emit(newQuery);\n    }\n    this.isEditing.set(false);\n  }\n\n  // Cancel editing\n  cancelEdit(): void {\n    this.isEditing.set(false);\n    this.editedQuery.set('');\n  }\n\n  // Handle Enter key to save (Shift+Enter for newline)\n  onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.saveEdit();\n    } else if (event.key === 'Escape') {\n      this.cancelEdit();\n    }\n  }\n}\n", "<footer class=\"chat-footer-preview\">\n  <!-- Query Preview Section -->\n  <div class=\"query-section\">\n    <div class=\"query-header\">\n      <div class=\"query-label\">\n        <i class=\"pi pi-file-edit\"></i>\n        <span>Generated Query</span>\n        @if (hasQuery() && !isEditing()) {\n          <span class=\"edit-hint\">(click to edit)</span>\n        }\n      </div>\n\n      @if (hasQuery()) {\n        <div class=\"confidence-indicator\" [attr.data-level]=\"confidenceLevel()\">\n          <div class=\"confidence-bar\">\n            <!-- eslint-disable-next-line @angular-eslint/template/no-inline-styles -->\n            <div class=\"confidence-fill\" [style.width.%]=\"confidence()\"></div>\n          </div>\n          <span class=\"confidence-text\"\n            >{{ confidence() }}% - {{ confidenceLabel() }}</span\n          >\n        </div>\n      }\n    </div>\n\n    <!-- Editing Mode -->\n    @if (isEditing()) {\n      <div class=\"query-edit-container\">\n        <textarea\n          pTextarea\n          [(ngModel)]=\"editedQuery\"\n          [autoResize]=\"true\"\n          rows=\"3\"\n          class=\"query-textarea\"\n          placeholder=\"Enter your query...\"\n          (keydown)=\"onKeyDown($event)\"\n        ></textarea>\n        <div class=\"edit-actions\">\n          <p-button\n            icon=\"pi pi-times\"\n            label=\"Cancel\"\n            severity=\"secondary\"\n            [text]=\"true\"\n            size=\"small\"\n            (onClick)=\"cancelEdit()\"\n          />\n          <p-button\n            icon=\"pi pi-check\"\n            label=\"Save\"\n            severity=\"primary\"\n            size=\"small\"\n            (onClick)=\"saveEdit()\"\n          />\n        </div>\n      </div>\n    } @else {\n      <!-- Display Mode -->\n      <div\n        class=\"query-content\"\n        [class.empty]=\"!hasQuery()\"\n        [class.clickable]=\"hasQuery()\"\n        (click)=\"onQueryClick()\"\n        (keydown.enter)=\"onQueryClick()\"\n        [attr.tabindex]=\"hasQuery() ? 0 : null\"\n        [attr.role]=\"hasQuery() ? 'button' : null\"\n        [attr.aria-label]=\"hasQuery() ? 'Click to edit query' : null\"\n      >\n        @if (hasQuery()) {\n          <p class=\"query-text\">{{ query() }}</p>\n        } @else {\n          <p class=\"query-placeholder\">\n            Start chatting to build your analysis query...\n          </p>\n        }\n      </div>\n    }\n  </div>\n\n  <!-- Collection Progress (if collecting) -->\n  @if (isCollecting()) {\n    <div class=\"collection-progress\">\n      <p-progressBar\n        [value]=\"collectionProgress()\"\n        [showValue]=\"true\"\n        styleClass=\"collection-bar\"\n      ></p-progressBar>\n    </div>\n  }\n\n  <!-- Generate Button -->\n  <div class=\"action-section\">\n    <p-button\n      [label]=\"buttonLabel()\"\n      icon=\"pi pi-chart-bar\"\n      [disabled]=\"!canGenerate()\"\n      [loading]=\"isLoading() || isCollecting()\"\n      (onClick)=\"onGenerateClick()\"\n      styleClass=\"generate-button\"\n    />\n  </div>\n</footer>\n", "import { Injectable, inject } from '@angular/core';\nimport {\n  HttpClient,\n  HttpHeaders,\n  HttpErrorResponse,\n} from '@angular/common/http';\nimport { BehaviorSubject, firstValueFrom } from 'rxjs';\nimport {\n  DataCollectionRequest,\n  DataCollectionResult,\n  DateChunk,\n  CollectionProgress,\n  AggregatedData,\n  DataType,\n  TelemetryApiResponse,\n  TripItem,\n  EventItem,\n  TelemetryItem,\n  AlertItem,\n  CollectionError,\n} from '../interfaces/telemetry-data-collector.interface';\nimport { isDefined, isNullOrUndefined } from '../../shared/utils';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TelemetryDataCollectionService {\n  private readonly http = inject(HttpClient);\n\n  private readonly MAX_CONCURRENT_REQUESTS = 10;\n  private readonly MAX_RETRY_ATTEMPTS = 3;\n  private readonly RETRY_DELAY_BASE = 1000; // 1 second\n  private readonly HOURS_24_MS = 24 * 60 * 60 * 1000;\n\n  private readonly progressSubject = new BehaviorSubject<CollectionProgress>({\n    totalRequests: 0,\n    completedRequests: 0,\n    successfulRequests: 0,\n    failedRequests: 0,\n    percentage: 0,\n    message: 'Initializing data collection...',\n  });\n\n  public progress$ = this.progressSubject.asObservable();\n\n  splitInto24HourChunks(startDate: string, endDate: string): DateChunk[] {\n    const chunks: DateChunk[] = [];\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n\n    let currentStart = new Date(start);\n    while (currentStart < end) {\n      const currentEnd = new Date(\n        Math.min(currentStart.getTime() + this.HOURS_24_MS, end.getTime()),\n      );\n\n      chunks.push({\n        start: currentStart.toISOString(),\n        end: currentEnd.toISOString(),\n      });\n\n      currentStart = new Date(currentEnd);\n    }\n\n    return chunks;\n  }\n\n  private createHeaders(authToken: string): HttpHeaders {\n    return new HttpHeaders({\n      'x-access-token': authToken,\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    });\n  }\n\n  private buildApiUrl(\n    baseUrl: string,\n    dataType: DataType,\n    vehicleId: string,\n    start: string,\n    end: string,\n  ): string {\n    const endpoint = `${baseUrl}/data/history/${dataType}/${vehicleId}`;\n    const params = new URLSearchParams({\n      start,\n      end,\n    });\n    return `${endpoint}?${params.toString()}`;\n  }\n\n  private async collectVehicleData(\n    dataType: DataType,\n    vehicleId: string,\n    chunk: DateChunk,\n    baseUrl: string,\n    authToken: string,\n    retryCount = 0,\n  ): Promise<{\n    dataType: DataType;\n    vehicleId: string;\n    data: TelemetryApiResponse;\n    chunk: DateChunk;\n  }> {\n    const headers = this.createHeaders(authToken);\n    const url = this.buildApiUrl(\n      baseUrl,\n      dataType,\n      vehicleId,\n      chunk.start,\n      chunk.end,\n    );\n\n    try {\n      const response = await firstValueFrom(\n        this.http.get<TelemetryApiResponse>(url, { headers }),\n      );\n\n      if (isNullOrUndefined(response)) {\n        throw new Error('No response received from API');\n      }\n\n      return {\n        dataType,\n        vehicleId,\n        data: response,\n        chunk,\n      };\n    } catch (error) {\n      const httpError = error as HttpErrorResponse;\n\n      // Handle authentication errors (don't retry)\n      if (httpError.status === 401 || httpError.status === 403) {\n        throw new Error('Authentication failed. Please provide a valid token.');\n      }\n\n      // Handle rate limiting with exponential backoff\n      if (httpError.status === 429 && retryCount < this.MAX_RETRY_ATTEMPTS) {\n        const delay = Math.pow(2, retryCount) * this.RETRY_DELAY_BASE;\n\n        await new Promise((resolve) => setTimeout(resolve, delay));\n        return this.collectVehicleData(\n          dataType,\n          vehicleId,\n          chunk,\n          baseUrl,\n          authToken,\n          retryCount + 1,\n        );\n      }\n\n      // For other errors, throw with context\n      throw new Error(\n        `Failed to collect ${dataType} data for vehicle ${vehicleId}: ${httpError.message || 'Unknown error'}`,\n      );\n    }\n  }\n\n  private updateProgress(update: Partial<CollectionProgress>): void {\n    const current = this.progressSubject.value;\n    const newProgress: CollectionProgress = {\n      ...current,\n      ...update,\n    };\n\n    // Calculate percentage based on current totals\n    const totalRequests = newProgress.totalRequests;\n    const completedRequests = newProgress.completedRequests;\n\n    if (totalRequests > 0) {\n      newProgress.percentage = Math.round(\n        (completedRequests / totalRequests) * 100,\n      );\n    }\n\n    this.progressSubject.next(newProgress);\n  }\n\n  private aggregateResults(\n    results: {\n      dataType: DataType;\n      vehicleId: string;\n      data: TelemetryApiResponse;\n      chunk: DateChunk;\n    }[],\n    errors: CollectionError[],\n    request: DataCollectionRequest,\n  ): AggregatedData {\n    const aggregated: AggregatedData = {\n      vehicles: {},\n      metadata: {\n        start_date: request.startDate,\n        end_date: request.endDate,\n        vehicle_count: request.vehicleIds.length,\n        data_types: request.dataTypes,\n        collection_timestamp: new Date().toISOString(),\n        successful_requests: results.length,\n        failed_requests: errors.length,\n        total_requests: results.length + errors.length,\n        timezone: 'Africa/Johannesburg',\n        business_context: {\n          fleet_type: 'delivery',\n          region: 'south_africa',\n          kpi_focus: ['efficiency', 'safety', 'fuel_consumption'],\n        },\n      },\n    };\n\n    // Create a map from vehicleId to vehicleName for easy lookup\n    const idToNameMap: Record<string, string> = request.vehicleNames ?? {};\n\n    // Initialize vehicle structures using vehicle NAME as the key\n    request.vehicleIds.forEach((vehicleId) => {\n      const vehicleName = idToNameMap[vehicleId] || vehicleId;\n      aggregated.vehicles[vehicleName] = {\n        vehicle_info: {\n          id: vehicleId,\n          name: vehicleName,\n          active: true,\n        },\n        trips: [],\n        events: [],\n        telemetry: [],\n        alerts: [],\n        data_summary: {\n          trip_count: 0,\n          event_count: 0,\n          telemetry_count: 0,\n          alert_count: 0,\n          date_range: { earliest: null, latest: null },\n        },\n      };\n    });\n\n    // Process results and organize by vehicle\n    results.forEach((result) => {\n      if (isDefined(result.data?.items) && Array.isArray(result.data.items)) {\n        const { dataType, vehicleId } = result;\n        const items = result.data.items;\n\n        // Look up vehicle name from ID\n        const vehicleName = idToNameMap[vehicleId] || vehicleId;\n\n        if (isDefined(aggregated.vehicles[vehicleName])) {\n          // Add data to the specific vehicle\n          switch (dataType) {\n            case 'trips':\n              aggregated.vehicles[vehicleName].trips.push(\n                ...(items as TripItem[]),\n              );\n              break;\n            case 'events':\n              aggregated.vehicles[vehicleName].events.push(\n                ...(items as EventItem[]),\n              );\n              break;\n            case 'telemetry':\n              aggregated.vehicles[vehicleName].telemetry.push(\n                ...(items as TelemetryItem[]),\n              );\n              break;\n            case 'alerts':\n              aggregated.vehicles[vehicleName].alerts.push(\n                ...(items as AlertItem[]),\n              );\n              break;\n          }\n\n          // Update vehicle summary\n          const vehicleData = aggregated.vehicles[vehicleName];\n          vehicleData.data_summary.trip_count = vehicleData.trips.length;\n          vehicleData.data_summary.event_count = vehicleData.events.length;\n          vehicleData.data_summary.telemetry_count =\n            vehicleData.telemetry.length;\n          vehicleData.data_summary.alert_count = vehicleData.alerts.length;\n\n          // Update date ranges from trip data\n          if (dataType === 'trips') {\n            vehicleData.trips.forEach((trip) => {\n              const startDate = trip.startTime;\n              if (startDate) {\n                const summary = vehicleData.data_summary;\n                if (\n                  isNullOrUndefined(summary.date_range.earliest) ||\n                  startDate < summary.date_range.earliest\n                ) {\n                  summary.date_range.earliest = startDate;\n                }\n                if (\n                  isNullOrUndefined(summary.date_range.latest) ||\n                  startDate > summary.date_range.latest\n                ) {\n                  summary.date_range.latest = startDate;\n                }\n              }\n            });\n          }\n        }\n      }\n    });\n\n    return aggregated;\n  }\n\n  async collectFleetData(\n    request: DataCollectionRequest,\n  ): Promise<DataCollectionResult> {\n    try {\n      // Validate request\n      if (!request.vehicleIds.length) {\n        throw new Error('At least one vehicle ID is required');\n      }\n\n      if (!request.dataTypes.length) {\n        throw new Error('At least one data type is required');\n      }\n\n      // Check date range (max 7 days)\n      const startTime = new Date(request.startDate).getTime();\n      const endTime = new Date(request.endDate).getTime();\n      const daysDiff = (endTime - startTime) / (24 * 60 * 60 * 1000);\n\n      if (daysDiff > 7) {\n        throw new Error(\n          'Date range cannot exceed 7 days for performance reasons',\n        );\n      }\n\n      // Split into 24-hour chunks\n      const dateChunks = this.splitInto24HourChunks(\n        request.startDate,\n        request.endDate,\n      );\n\n      // Calculate total requests\n      const totalRequests =\n        dateChunks.length *\n        request.vehicleIds.length *\n        request.dataTypes.length;\n\n      // Initialize progress\n      this.updateProgress({\n        totalRequests,\n        completedRequests: 0,\n        successfulRequests: 0,\n        failedRequests: 0,\n        message: `Preparing to collect data from ${request.vehicleIds.length} vehicles...`,\n      });\n\n      // Create all collection tasks\n      const collectionTasks: (() => Promise<{\n        dataType: DataType;\n        vehicleId: string;\n        data: TelemetryApiResponse;\n        chunk: DateChunk;\n      }>)[] = [];\n\n      for (const chunk of dateChunks) {\n        for (const vehicleId of request.vehicleIds) {\n          for (const dataType of request.dataTypes) {\n            collectionTasks.push(() =>\n              this.collectVehicleData(\n                dataType,\n                vehicleId,\n                chunk,\n                request.baseUrl,\n                request.authToken,\n              ),\n            );\n          }\n        }\n      }\n\n      // Execute tasks with limited concurrency\n      const results: {\n        dataType: DataType;\n        vehicleId: string;\n        data: TelemetryApiResponse;\n        chunk: DateChunk;\n      }[] = [];\n      const errors: CollectionError[] = [];\n\n      // Process in batches of MAX_CONCURRENT_REQUESTS\n      for (\n        let i = 0;\n        i < collectionTasks.length;\n        i += this.MAX_CONCURRENT_REQUESTS\n      ) {\n        const batch = collectionTasks.slice(\n          i,\n          i + this.MAX_CONCURRENT_REQUESTS,\n        );\n\n        const batchResults = await Promise.allSettled(\n          batch.map((task) => task()),\n        );\n\n        batchResults.forEach((result, index) => {\n          const globalIndex = i + index;\n\n          // Calculate the correct indices based on the task structure:\n          // For each chunk -> for each vehicle -> for each data type\n          const vehiclesPerChunk = request.vehicleIds.length;\n          const dataTypesPerVehicle = request.dataTypes.length;\n          const tasksPerChunk = vehiclesPerChunk * dataTypesPerVehicle;\n\n          const chunkIndex = Math.floor(globalIndex / tasksPerChunk);\n          const taskInChunk = globalIndex % tasksPerChunk;\n          const vehicleIndex = Math.floor(taskInChunk / dataTypesPerVehicle);\n          const dataTypeIndex = taskInChunk % dataTypesPerVehicle;\n\n          const vehicleId = request.vehicleIds[vehicleIndex];\n          const dataType = request.dataTypes[dataTypeIndex];\n\n          if (result.status === 'fulfilled') {\n            results.push(result.value);\n            this.updateProgress({\n              completedRequests: results.length + errors.length,\n              successfulRequests: results.length,\n              currentVehicle: vehicleId,\n              currentDataType: dataType,\n              message: `Collected ${dataType} data for ${vehicleId}...`,\n            });\n          } else {\n            errors.push({\n              vehicleId,\n              dataType,\n              dateChunk: dateChunks[chunkIndex],\n              error: result.reason?.message ?? 'Unknown error',\n              statusCode: result.reason?.status,\n              retryCount: 0,\n            });\n\n            this.updateProgress({\n              completedRequests: results.length + errors.length,\n              failedRequests: errors.length,\n              currentVehicle: vehicleId,\n              currentDataType: dataType,\n              message: `Failed to collect ${dataType} data for ${vehicleId}`,\n            });\n          }\n        });\n\n        // Small delay between batches to avoid overwhelming the API\n        if (i + this.MAX_CONCURRENT_REQUESTS < collectionTasks.length) {\n          await new Promise((resolve) => setTimeout(resolve, 100));\n        }\n      }\n\n      // Final progress update\n      this.updateProgress({\n        message: 'Aggregating collected data...',\n      });\n\n      // Aggregate results\n      const aggregatedData = this.aggregateResults(results, errors, request);\n\n      // Final progress update\n      this.updateProgress({\n        message: `Collection complete! Gathered ${results.length} successful responses${errors.length > 0 ? ` with ${errors.length} errors` : ''}`,\n      });\n\n      return {\n        success: errors.length === 0 || results.length > 0,\n        data: aggregatedData,\n        errors: errors.length > 0 ? errors : undefined,\n        progress: this.progressSubject.value,\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error\n          ? error.message\n          : 'Unknown error occurred during data collection';\n\n      this.updateProgress({\n        message: `Collection failed: ${errorMessage}`,\n      });\n\n      return {\n        success: false,\n        errors: [\n          {\n            vehicleId: 'unknown',\n            dataType: 'trips' as DataType,\n            dateChunk: { start: request.startDate, end: request.endDate },\n            error: errorMessage,\n            retryCount: 0,\n          },\n        ],\n        progress: this.progressSubject.value,\n      };\n    }\n  }\n\n  resetProgress(): void {\n    this.progressSubject.next({\n      totalRequests: 0,\n      completedRequests: 0,\n      successfulRequests: 0,\n      failedRequests: 0,\n      percentage: 0,\n      message: 'Ready to collect data...',\n    });\n  }\n}\n", "import {\n  Component,\n  OnDestroy,\n  inject,\n  signal,\n  computed,\n  effect,\n  ViewChild,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  FormBuilder,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { SelectModule } from 'primeng/select';\nimport { AutoCompleteModule } from 'primeng/autocomplete';\nimport { MultiSelectModule } from 'primeng/multiselect';\nimport { DatePickerModule } from 'primeng/datepicker';\nimport { MessageModule } from 'primeng/message';\nimport { CardModule } from 'primeng/card';\nimport { ButtonModule } from 'primeng/button';\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { AccordionModule } from 'primeng/accordion';\n\n// Import Analytics Dashboard\nimport { AnalyticsDashboardComponent } from './dashboard/analytics-dashboard.component';\nimport { AnalyticsResponse } from './dashboard/models/analytics-dashboard.interface';\n\n// Import Chat Components\nimport { QueryChatComponent } from './chat/components/query-chat/query-chat.component';\nimport {\n  ChatSummaryHeaderComponent,\n  HeaderSummary,\n} from './chat/components/chat-summary-header/chat-summary-header.component';\nimport { ChatFooterPreviewComponent } from './chat/components/chat-footer-preview/chat-footer-preview.component';\nimport {\n  DataType as ChatDataType,\n  SummarizedData,\n  VehicleOption,\n  ClientInfo,\n} from './chat/models/chat.interface';\n\nimport {\n  AssetsService,\n  AssetListResponse,\n  AssetListItem,\n} from '../../../../api';\nimport { ClientDataService } from '../../../clients/services/client-data.service';\nimport { isDefined, isNullOrUndefined } from '../../../../shared/utils';\nimport { ApiUrlService } from '../../../../core/services/api-url.service';\nimport { AuthTokenManagerService } from '../../../../core/services/auth-token-manager.service';\nimport { TelemetryDataCollectionService } from '../../../../core/services/telemetry-data-collection.service';\nimport {\n  DataCollectionRequest,\n  CollectionProgress,\n  AggregatedData,\n  DataType,\n  CollectionError,\n  TripItem,\n  EventItem,\n  TelemetryItem,\n  AlertItem,\n} from '../../../../core/interfaces/telemetry-data-collector.interface';\n\ninterface DropdownOption {\n  label: string;\n  value: string;\n  assetData?: AssetListItem;\n}\n\ninterface DataTypeOption {\n  label: string;\n  value: string;\n  selected: boolean;\n}\n\ninterface SampleRequest {\n  name: string;\n  description: string;\n  query: string;\n  dataTypes: string[];\n}\n\ninterface ApiResponse {\n  success: boolean;\n  data?: unknown;\n  error?: string;\n  statusCode?: number;\n}\n\ninterface ErrorResponse {\n  error?: string;\n  message?: string;\n}\n\ntype ApiResponseOrError = AnalyticsResponse | ErrorResponse;\n\n@Component({\n  selector: 'app-analytical-report',\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SelectModule,\n    AutoCompleteModule,\n    MultiSelectModule,\n    DatePickerModule,\n    MessageModule,\n    CardModule,\n    ButtonModule,\n    ProgressSpinnerModule,\n    InputTextModule,\n    AccordionModule,\n    AnalyticsDashboardComponent,\n    QueryChatComponent,\n    ChatSummaryHeaderComponent,\n    ChatFooterPreviewComponent,\n  ],\n  templateUrl: './analytical-report.component.html',\n  styleUrl: './analytical-report.component.scss',\n})\nexport class AnalyticalReportComponent implements OnDestroy {\n  private readonly assetsService = inject(AssetsService);\n  private readonly clientDataService = inject(ClientDataService);\n  private readonly fb = inject(FormBuilder);\n  private readonly http = inject(HttpClient);\n  private readonly apiUrlService = inject(ApiUrlService);\n  private readonly authTokenManagerService = inject(AuthTokenManagerService);\n  private readonly telemetryDataCollectionService = inject(\n    TelemetryDataCollectionService,\n  );\n\n  title = 'Reporting - Analytical Review';\n\n  // Signals for reactive state management\n  assets = signal<DropdownOption[]>([]);\n  filteredAssets = signal<DropdownOption[]>([]);\n  private readonly _selectedAssetIds = signal<string[]>([]);\n  loadingAssets = signal(false);\n  errorMessage = signal<string | null>(null);\n  successMessage = signal<string | null>(null);\n\n  // Getter and setter for two-way binding with ngModel\n  get selectedAssetIds(): string[] {\n    return this._selectedAssetIds();\n  }\n\n  set selectedAssetIds(value: string[]) {\n    this._selectedAssetIds.set(value ?? []);\n  }\n\n  // API testing state\n  isTestingApi = signal(false);\n  apiResponse = signal<ApiResponse | null>(null);\n  selectedTab = signal(0);\n  loadingMessage = signal<string>('Preparing report generation...');\n  private loadingInterval: string | number | NodeJS.Timeout | null | undefined =\n    null;\n\n  // Data collection state\n  collectionProgress = signal<CollectionProgress | null>(null);\n  collectedData = signal<AggregatedData | null>(null);\n  isCollectingData = signal(false);\n  collectionErrors = signal<CollectionError[]>([]);\n  collectingDataTypes = signal<string[]>([]); // Track data types currently being collected\n\n  // Form state\n  apiForm: FormGroup;\n\n  // Configuration options\n  dataTypeOptions = signal<DataTypeOption[]>([\n    { label: 'Trips', value: 'trips', selected: true },\n    { label: 'Events', value: 'events', selected: true },\n    { label: 'Telemetry', value: 'telemetry', selected: false },\n    { label: 'Alerts', value: 'alerts', selected: true },\n  ]);\n\n  // Analysis breakdown options\n  analyzePerDay = signal(false);\n  analyzePerVehicle = signal(false);\n\n  // Chat mode toggle\n  useChatMode = signal(true); // Set to true to use chat-based query builder\n\n  // Chat-related state\n  @ViewChild('queryChatComponent') queryChatComponent!: QueryChatComponent;\n\n  // View state management\n  showChatView = signal(true); // Show chat vs dashboard\n  currentQuery = signal<string>(''); // Current generated query\n  currentConfidence = signal<number>(0); // Current query confidence\n  selectedDataTypesList = signal<string[]>([]); // Data types from chat\n\n  // Signals to track form date values for reactive computed properties\n  private readonly formStartDate = signal<Date | null>(null);\n  private readonly formEndDate = signal<Date | null>(null);\n\n  // Date preset tracking\n  activeDatePreset = signal<string | null>(null);\n\n  sampleRequests = signal<SampleRequest[]>([\n    {\n      name: 'Driver Safety Scorecard',\n      description:\n        'Comprehensive analysis of driver behavior including speeding, harsh braking, and acceleration events',\n      query:\n        'Generate a driver safety scorecard showing speeding incidents, harsh braking events, rapid acceleration, and overall safety rating with recommendations for improvement',\n      dataTypes: ['trips', 'events'],\n    },\n    {\n      name: 'Fuel Efficiency & Cost Analysis',\n      description:\n        'Detailed fuel consumption analysis with cost optimization recommendations',\n      query:\n        'Analyze fuel efficiency patterns, identify vehicles with poor MPG, calculate fuel costs per mile, and provide recommendations to reduce fuel consumption',\n      dataTypes: ['trips', 'telemetry'],\n    },\n    {\n      name: 'Vehicle Utilization Report',\n      description:\n        'Asset utilization analysis to identify underused or overworked vehicles',\n      query:\n        'Show vehicle utilization rates, idle time analysis, engine hours vs distance traveled, and identify vehicles that are underutilized or require better distribution',\n      dataTypes: ['trips', 'telemetry'],\n    },\n    {\n      name: 'Maintenance Insights',\n      description:\n        'Predictive maintenance analysis based on vehicle diagnostics and usage patterns',\n      query:\n        'Analyze diagnostic trouble codes, predict upcoming maintenance needs based on mileage and usage patterns, and identify vehicles requiring immediate attention',\n      dataTypes: ['events', 'telemetry'],\n    },\n    {\n      name: 'Route Optimization',\n      description:\n        'Route efficiency analysis with suggestions for optimization',\n      query:\n        'Analyze route efficiency, identify frequent detours or delays, calculate time spent in traffic, and suggest optimal routes to reduce travel time and fuel costs',\n      dataTypes: ['trips', 'events'],\n    },\n    {\n      name: 'Fleet Performance Dashboard',\n      description:\n        'Comprehensive fleet overview with key performance indicators',\n      query:\n        'Create a comprehensive fleet performance summary including total cost of ownership, vehicle availability, driver performance metrics, and operational efficiency KPIs',\n      dataTypes: ['trips', 'events', 'telemetry'],\n    },\n  ]);\n\n  // Documentation content\n  apiDocumentation = signal({\n    overview: `The Analytical Review endpoint provides AI-powered fleet analytics by integrating with Telemetry API to collect real-time vehicle data and generate intelligent insights for dashboard visualization.`,\n\n    endpoint: {\n      production:\n        'https://cypherview-reporting-develop-function.azurewebsites.net/api/analytical-review',\n      local: 'http://localhost:7071/api/analytical-review',\n      method: 'POST',\n    },\n\n    headers: {\n      'Content-Type': 'application/json',\n      'x-functions-key': '[your-function-key] # Required in production',\n    },\n\n    rateLimit: {\n      dateRangeMax: '7 days',\n      vehiclesMax: '10 vehicles per request',\n      timeout: '30-60 seconds',\n      concurrent: '10 concurrent requests',\n      requestsPerMinute: '100 requests per minute per client',\n    },\n  });\n\n  // Client signal\n  selectedClientSignal = this.clientDataService.getSelectedClientSignal();\n\n  // Helper method to safely convert values to strings\n  private safeStringify(value: unknown): string {\n    if (value === null || value === undefined) {\n      return '';\n    }\n    if (typeof value === 'string') {\n      return value;\n    }\n    if (typeof value === 'number' || typeof value === 'boolean') {\n      return String(value);\n    }\n    if (typeof value === 'object') {\n      try {\n        return JSON.stringify(value);\n      } catch {\n        return '[Object]';\n      }\n    }\n    // Handle symbols, functions, bigint, etc.\n    if (typeof value === 'function') {\n      return '[Function]';\n    }\n    if (typeof value === 'symbol') {\n      return value.toString();\n    }\n    if (typeof value === 'bigint') {\n      return value.toString();\n    }\n    return '[Unknown]';\n  }\n\n  readonly selectedAssetNames = computed(() => {\n    const assetIds = this._selectedAssetIds();\n    const allAssets = this.assets();\n\n    if (!Array.isArray(allAssets) || !Array.isArray(assetIds)) {\n      return 'Loading...';\n    }\n\n    const selectedAssets = allAssets.filter(\n      (asset) => isDefined(asset?.value) && assetIds.includes(asset.value),\n    );\n\n    if (selectedAssets.length === 0) {\n      return 'No vehicles selected';\n    }\n\n    return selectedAssets\n      .map((asset) =>\n        this.safeStringify(asset.label || asset.value || 'Unknown Vehicle'),\n      )\n      .join(', ');\n  });\n\n  readonly isMultipleVehiclesSelected = computed(() => {\n    return this._selectedAssetIds().length > 1;\n  });\n\n  readonly isDateRangeGreaterThan2Days = computed(() => {\n    const startDate = this.apiForm.get('startDate')?.value;\n    const endDate = this.apiForm.get('endDate')?.value;\n\n    if (isNullOrUndefined(startDate) || isNullOrUndefined(endDate)) {\n      return false;\n    }\n\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffInMs = end.getTime() - start.getTime();\n    const diffInDays = diffInMs / (1000 * 60 * 60 * 24);\n\n    return diffInDays > 2;\n  });\n\n  readonly shouldDisableTelemetry = computed(() => {\n    return (\n      this.isMultipleVehiclesSelected() && this.isDateRangeGreaterThan2Days()\n    );\n  });\n\n  readonly reportSummary = computed(() => {\n    const response = this.apiResponse();\n    const analyticsData = response?.data as AnalyticsResponse | undefined;\n    const summary = analyticsData?.response?.summary;\n    return this.safeStringify(summary) || 'Report generated successfully.';\n  });\n\n  readonly formatDateRange = computed(() => {\n    const startDate = this.apiForm.get('startDate')?.value;\n    const endDate = this.apiForm.get('endDate')?.value;\n\n    if (isNullOrUndefined(startDate) || isNullOrUndefined(endDate)) {\n      return 'Date range not selected';\n    }\n\n    try {\n      const formatDate = (date: string | number | Date) => {\n        if (isNullOrUndefined(date)) return 'Invalid Date';\n        const d = new Date(date);\n        return d.toLocaleDateString('en-US', {\n          month: 'short',\n          day: 'numeric',\n          year: 'numeric',\n          hour: 'numeric',\n          minute: '2-digit',\n          hour12: true,\n        });\n      };\n\n      return `${formatDate(startDate)} - ${formatDate(endDate)}`;\n    } catch {\n      return 'Invalid date range';\n    }\n  });\n\n  readonly isReadyForTesting = computed(() => {\n    return !!(\n      isDefined(this.selectedClientSignal()?.id) &&\n      this._selectedAssetIds().length > 0 &&\n      isDefined(this.apiForm.get('reportQuery')?.value) &&\n      isDefined(this.apiForm.get('startDate')?.value) &&\n      isDefined(this.apiForm.get('endDate')?.value)\n    );\n  });\n\n  // Track the last report query for display in dashboard\n  readonly lastReportQuery = signal<string>('');\n\n  // Parse API response into dashboard format\n  readonly dashboardResponse = computed((): AnalyticsResponse | undefined => {\n    const response = this.apiResponse();\n    if (\n      isNullOrUndefined(response?.success) ||\n      isNullOrUndefined(response?.data)\n    ) {\n      return undefined;\n    }\n\n    const analyticsData = response.data as AnalyticsResponse | undefined;\n    if (isNullOrUndefined(analyticsData?.response)) {\n      return undefined;\n    }\n\n    // Check if response already has blocks (AI-generated dashboard)\n    if (isDefined(analyticsData.response.blocks)) {\n      return analyticsData;\n    }\n\n    // Transform legacy response into dashboard format\n    return this.transformLegacyResponse(response.data);\n  });\n\n  private transformLegacyResponse(data: unknown): AnalyticsResponse {\n    const legacyData = data as {\n      response?: { summary?: string; request_id?: string };\n    };\n    const summary =\n      this.safeStringify(legacyData.response?.summary) ||\n      'Analysis completed successfully';\n    const timestamp = new Date().toISOString();\n    const requestId = legacyData.response?.request_id ?? `req_${Date.now()}`;\n\n    return {\n      response: {\n        request_id: requestId,\n        timestamp: timestamp,\n        summary: summary,\n        layout: {\n          type: 'dashboard',\n          grid: {\n            columns: 12,\n            rows: 'auto',\n            gap: 16,\n          },\n          sections: [\n            {\n              id: 'main-summary',\n              title: 'Report Summary',\n              position: {\n                row: 1,\n                col: 1,\n                colSpan: 12,\n              },\n              blocks: ['summary-block-1'],\n            },\n          ],\n        },\n        blocks: [\n          {\n            block_id: 'summary-block-1',\n            block_type: 'summary',\n            priority: 1,\n            content: {\n              title: 'Fleet Analysis Report',\n              narrative: summary,\n              highlights: [\n                {\n                  label: 'Vehicles Analyzed',\n                  value: this._selectedAssetIds().length,\n                  severity: 'neutral',\n                },\n                {\n                  label: 'Analysis Period',\n                  value: this.formatDateRange(),\n                  severity: 'neutral',\n                },\n                {\n                  label: 'Report Status',\n                  value: 'Complete',\n                  severity: 'good',\n                },\n              ],\n            },\n            visual: {\n              theme: 'primary',\n              elevation: 1,\n            },\n          },\n        ],\n        metadata: {\n          generation_time: 1000,\n          data_sources: ['telemetry_api'],\n          confidence_score: 95,\n        },\n      },\n    };\n  }\n\n  readonly currentVehicleName = computed(() => {\n    const currentVehicleId = this.collectionProgress()?.currentVehicle;\n    if (isNullOrUndefined(currentVehicleId)) return '';\n\n    const allAssets = this.assets();\n    const vehicleAsset = allAssets.find(\n      (asset) => asset.value === currentVehicleId,\n    );\n    return vehicleAsset?.label ?? currentVehicleId;\n  });\n\n  readonly selectedDataTypes = computed(() => {\n    return this.dataTypeOptions()\n      .filter((option) => option.selected)\n      .map((option) => option.value);\n  });\n\n  // Check if date range is more than 2 days (enables \"per day\" analysis option)\n  readonly canAnalyzePerDay = computed(() => {\n    const startDate = this.formStartDate();\n    const endDate = this.formEndDate();\n    if (startDate == null || endDate == null) return false;\n    const diffMs = new Date(endDate).getTime() - new Date(startDate).getTime();\n    const diffDays = diffMs / (1000 * 60 * 60 * 24);\n    return diffDays > 2;\n  });\n\n  // Check if more than 1 vehicle is selected (enables \"per vehicle\" analysis option)\n  readonly canAnalyzePerVehicle = computed(() => {\n    return this._selectedAssetIds().length > 1;\n  });\n\n  // Build analysis breakdown text for the query\n  readonly analysisBreakdownText = computed(() => {\n    const parts: string[] = [];\n    if (this.analyzePerDay() && this.canAnalyzePerDay()) {\n      parts.push('broken down by day');\n    }\n    if (this.analyzePerVehicle() && this.canAnalyzePerVehicle()) {\n      parts.push('broken down by vehicle');\n    }\n    if (parts.length === 0) return '';\n    return ` Please provide the analysis ${parts.join(' and ')}.`;\n  });\n\n  readonly analyticalReviewEndpoint = computed(() => {\n    return 'https://cypherview-reporting-develop-function.azurewebsites.net/api/analytical-review';\n  });\n\n  // Chat component inputs\n  readonly chatDateRange = computed(() => {\n    const start = this.formStartDate();\n    const end = this.formEndDate();\n    if (start && end) {\n      return { start, end };\n    }\n    return null;\n  });\n\n  readonly chatSelectedVehicles = computed((): VehicleOption[] => {\n    const assetIds = this._selectedAssetIds();\n    const allAssets = this.assets();\n    return assetIds\n      .map((id) => {\n        const asset = allAssets.find((a) => a.value === id);\n        return asset ? { id: asset.value, name: asset.label } : null;\n      })\n      .filter((v): v is VehicleOption => v !== null);\n  });\n\n  readonly chatClientInfo = computed((): ClientInfo | null => {\n    const client = this.selectedClientSignal();\n    const clientId = client?.id;\n    const clientName = client?.name;\n    if (\n      clientId !== undefined &&\n      clientId !== null &&\n      clientId !== '' &&\n      clientName !== undefined &&\n      clientName !== null &&\n      clientName !== ''\n    ) {\n      return { id: clientId, name: clientName };\n    }\n    return null;\n  });\n\n  // Available vehicles for chat selection\n  readonly availableVehiclesForChat = computed((): VehicleOption[] => {\n    const allAssets = this.assets();\n    return allAssets.map((asset) => ({\n      id: asset.value,\n      name: asset.label,\n    }));\n  });\n\n  // Header summary for ChatSummaryHeaderComponent\n  readonly headerSummary = computed((): HeaderSummary => {\n    const startDate = this.formStartDate();\n    const endDate = this.formEndDate();\n    const assetIds = this._selectedAssetIds();\n    const allAssets = this.assets();\n\n    const vehicleNames = assetIds\n      .map((id) => {\n        const asset = allAssets.find((a) => a.value === id);\n        return asset?.label ?? '';\n      })\n      .filter((name) => name.length > 0);\n\n    return {\n      dateRange:\n        startDate && endDate ? { start: startDate, end: endDate } : null,\n      vehicleCount: assetIds.length,\n      vehicleNames,\n      dataTypes: this.selectedDataTypesList(),\n      queryConfidence: this.currentConfidence(),\n      currentQuery: this.currentQuery(),\n    };\n  });\n\n  constructor() {\n    // Initialize reactive form\n    this.apiForm = this.fb.group({\n      startDate: [null, Validators.required],\n      endDate: [null, Validators.required],\n      reportQuery: ['', Validators.required],\n    });\n\n    // Set default dates (start of day to end of day)\n    const now = new Date();\n    const startOfDay = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate(),\n      0,\n      0,\n      0,\n      0,\n    );\n    const endOfDay = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate(),\n      23,\n      59,\n      59,\n      999,\n    );\n\n    this.apiForm.patchValue({\n      startDate: startOfDay,\n      endDate: endOfDay,\n      reportQuery: 'Show me fleet overview and any issues that need attention',\n    });\n\n    // Initialize date signals with default values\n    this.formStartDate.set(startOfDay);\n    this.formEndDate.set(endOfDay);\n\n    // Track form date changes to update signals for reactive computed properties\n    // Also clear the date preset when user manually changes dates\n    this.apiForm.get('startDate')?.valueChanges.subscribe((value) => {\n      this.formStartDate.set(value as Date | null);\n      this.activeDatePreset.set(null);\n    });\n    this.apiForm.get('endDate')?.valueChanges.subscribe((value) => {\n      this.formEndDate.set(value as Date | null);\n      this.activeDatePreset.set(null);\n    });\n\n    // React to client changes using effect (similar to sidebar pattern)\n    effect(() => {\n      const selectedClient = this.selectedClientSignal();\n\n      if (isDefined(selectedClient?.id)) {\n        this.loadInitialAssets(selectedClient.id);\n        this.errorMessage.set(null);\n      } else {\n        this.assets.set([]);\n        this.filteredAssets.set([]);\n      }\n    });\n\n    // React to date or vehicle selection changes to auto-disable telemetry\n    effect(() => {\n      // Track the conditions that should trigger telemetry disabling\n      const shouldDisable = this.shouldDisableTelemetry();\n\n      if (shouldDisable) {\n        this.dataTypeOptions.update((options) =>\n          options.map((opt) => ({\n            ...opt,\n            selected: opt.value === 'telemetry' ? false : opt.selected,\n          })),\n        );\n      } else {\n        // Optional: Re-enable telemetry if conditions no longer apply\n        // This allows user to manually enable it for valid scenarios\n      }\n    });\n  }\n\n  private loadInitialAssets(clientId: string): void {\n    this.loadingAssets.set(true);\n    this.errorMessage.set(null);\n\n    this.assetsService\n      .listAssets(clientId, 0, 1000, undefined, 'state=active')\n      .subscribe({\n        next: (response: AssetListResponse) => {\n          const assetOptions: DropdownOption[] =\n            response.items?.map((asset) => ({\n              label: asset.name || `Asset ${asset.id}`,\n              value: asset.id,\n              assetData: asset,\n            })) ?? [];\n\n          this.assets.set(assetOptions);\n          this.filteredAssets.set(assetOptions);\n          this.loadingAssets.set(false);\n        },\n        error: () => {\n          this.errorMessage.set('Failed to load assets. Please try again.');\n          this.loadingAssets.set(false);\n        },\n      });\n  }\n\n  onSearchAssets(event: { query: string }): void {\n    const query = event.query.trim().toLowerCase();\n    const allAssets = this.assets();\n\n    if (!query) {\n      this.filteredAssets.set(allAssets);\n      return;\n    }\n\n    const filtered = allAssets.filter((asset) =>\n      asset.label.toLowerCase().includes(query),\n    );\n\n    this.filteredAssets.set(filtered);\n  }\n\n  onAssetsChange(selectedIds: string[]): void {\n    this.selectedAssetIds = selectedIds ?? [];\n  }\n\n  onDataTypeChange(option: DataTypeOption): void {\n    // Prevent selecting telemetry when multiple vehicles are selected\n    if (\n      option.value === 'telemetry' &&\n      this.isMultipleVehiclesSelected() &&\n      !option.selected\n    ) {\n      this.errorMessage.set(\n        'Telemetry data is not available when multiple vehicles are selected.',\n      );\n      setTimeout(() => this.errorMessage.set(null), 3000);\n      return;\n    }\n\n    this.dataTypeOptions.update((options) =>\n      options.map((opt) =>\n        opt.value === option.value ? { ...opt, selected: !opt.selected } : opt,\n      ),\n    );\n  }\n\n  setDatePreset(preset: string): void {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    let startDate: Date;\n    let endDate: Date;\n\n    switch (preset) {\n      case 'today':\n        startDate = new Date(today);\n        endDate = new Date(today);\n        endDate.setHours(23, 59, 59, 999);\n        break;\n      case 'yesterday':\n        startDate = new Date(today);\n        startDate.setDate(startDate.getDate() - 1);\n        endDate = new Date(startDate);\n        endDate.setHours(23, 59, 59, 999);\n        break;\n      case 'last7days':\n        endDate = new Date(today);\n        endDate.setHours(23, 59, 59, 999);\n        startDate = new Date(today);\n        startDate.setDate(startDate.getDate() - 6);\n        break;\n      case 'thisMonth':\n        startDate = new Date(today.getFullYear(), today.getMonth(), 1);\n        endDate = new Date(today);\n        endDate.setHours(23, 59, 59, 999);\n        break;\n      case 'lastMonth':\n        startDate = new Date(today.getFullYear(), today.getMonth() - 1, 1);\n        endDate = new Date(today.getFullYear(), today.getMonth(), 0);\n        endDate.setHours(23, 59, 59, 999);\n        break;\n      default:\n        return;\n    }\n\n    // Use emitEvent: false to prevent triggering valueChanges (which would clear the preset)\n    this.apiForm.patchValue(\n      {\n        startDate: startDate,\n        endDate: endDate,\n      },\n      { emitEvent: false },\n    );\n\n    // Manually update the signals since we disabled emitEvent\n    this.formStartDate.set(startDate);\n    this.formEndDate.set(endDate);\n    this.activeDatePreset.set(preset);\n  }\n\n  onLoadSampleRequest(sample: SampleRequest): void {\n    this.apiForm.patchValue({\n      reportQuery: sample.query,\n    });\n\n    // Update data type selections, respecting telemetry disable condition\n    const shouldDisableTelemetry = this.shouldDisableTelemetry();\n\n    this.dataTypeOptions.update((options) =>\n      options.map((opt) => ({\n        ...opt,\n        selected:\n          opt.value === 'telemetry' && shouldDisableTelemetry\n            ? false\n            : sample.dataTypes.includes(opt.value),\n      })),\n    );\n\n    // Warn if telemetry was requested but disabled\n    if (shouldDisableTelemetry && sample.dataTypes.includes('telemetry')) {\n      this.successMessage.set(\n        `Loaded query: ${sample.name} (telemetry disabled due to selection)`,\n      );\n    } else {\n      this.successMessage.set(`Loaded query: ${sample.name}`);\n    }\n    setTimeout(() => this.successMessage.set(null), 3000);\n\n    // Remove selected sample from the list\n    this.sampleRequests.update((current) =>\n      current.filter((s) => s.name !== sample.name),\n    );\n  }\n\n  // ============================================================================\n  // Chat-based Query Builder Event Handlers\n  // ============================================================================\n\n  /**\n   * Handle data collection triggered by the chat component\n   */\n  async onChatDataCollectionTriggered(\n    dataTypes: ChatDataType[],\n  ): Promise<void> {\n    // Map chat data types to collection data types\n    const collectionDataTypes = dataTypes as DataType[];\n\n    // Update local state\n    this.isCollectingData.set(true);\n    this.collectingDataTypes.set(dataTypes); // Track what's being collected\n    this.collectionErrors.set([]);\n\n    // Notify chat component that collection has started\n    this.queryChatComponent?.startDataCollection(dataTypes);\n\n    try {\n      const selectedAssetIds = this.selectedAssetIds;\n      const formValues = this.apiForm.value;\n\n      // Create vehicle name map\n      const vehicleNames: Record<string, string> = {};\n      const allAssets = this.assets();\n      for (const id of selectedAssetIds) {\n        const asset = allAssets.find((a) => a.value === id);\n        if (asset) {\n          vehicleNames[id] = asset.label;\n        }\n      }\n\n      // Prepare data collection request\n      const collectionRequest: DataCollectionRequest = {\n        vehicleIds: selectedAssetIds,\n        vehicleNames,\n        startDate: (formValues.startDate as Date).toISOString(),\n        endDate: (formValues.endDate as Date).toISOString(),\n        dataTypes: collectionDataTypes,\n        baseUrl: this.apiUrlService.getCurrentApiUrl(),\n        authToken: this.authTokenManagerService.getAccessToken() ?? '',\n      };\n\n      // Subscribe to progress\n      const progressSub =\n        this.telemetryDataCollectionService.progress$.subscribe((progress) => {\n          this.collectionProgress.set(progress);\n          this.queryChatComponent?.updateCollectionProgress(\n            progress.percentage,\n          );\n        });\n\n      // Collect data\n      const result =\n        await this.telemetryDataCollectionService.collectFleetData(\n          collectionRequest,\n        );\n\n      progressSub.unsubscribe();\n\n      // Store collected data\n      if (result.data) {\n        this.collectedData.set(result.data);\n      }\n      this.collectionErrors.set(result.errors ?? []);\n\n      // Mark data collection as complete immediately (don't wait for context submission)\n      this.isCollectingData.set(false);\n      this.collectingDataTypes.set([]);\n\n      // Build summarized data for context submission\n      if (result.data) {\n        const summarizedData = this.buildSummarizedData(\n          result.data,\n        ) as unknown as SummarizedData;\n\n        // Submit context to chat component (this may wait for session creation)\n        // Don't await - let it complete in the background\n        this.queryChatComponent\n          ?.submitDataContext(summarizedData)\n          .catch((err) => {\n            console.error('Failed to submit data context:', err);\n            // Don't show error to user - the data is collected, context submission is optional\n          });\n      }\n    } catch (error) {\n      console.error('Data collection failed:', error);\n      this.errorMessage.set(\n        error instanceof Error ? error.message : 'Data collection failed',\n      );\n      this.isCollectingData.set(false);\n      this.collectingDataTypes.set([]);\n    }\n  }\n\n  /**\n   * Handle report generation from chat component\n   */\n  async onChatGenerateReport(query: string): Promise<void> {\n    // Update the form with the query from chat\n    this.apiForm.patchValue({ reportQuery: query });\n\n    // Check if we have collected data\n    const data = this.collectedData();\n    if (!data) {\n      this.errorMessage.set(\n        'Please collect data first before generating the report.',\n      );\n      return;\n    }\n\n    // Use existing report generation flow\n    await this.generateReportWithData(query, data);\n  }\n\n  /**\n   * Handle query updates from chat component\n   */\n  onQueryUpdated(query: string): void {\n    this.currentQuery.set(query);\n  }\n\n  /**\n   * Handle query changes from footer preview (user edited the query)\n   */\n  onQueryChanged(query: string): void {\n    this.currentQuery.set(query);\n    // Also update the form so it stays in sync\n    this.apiForm.patchValue({ reportQuery: query });\n  }\n\n  /**\n   * Handle confidence updates from chat component\n   */\n  onConfidenceUpdated(confidence: number): void {\n    this.currentConfidence.set(confidence);\n  }\n\n  /**\n   * Handle date range selection from chat component (guided mode)\n   */\n  onChatDateRangeSelected(dateRange: { start: Date; end: Date }): void {\n    this.formStartDate.set(dateRange.start);\n    this.formEndDate.set(dateRange.end);\n    this.apiForm.patchValue(\n      {\n        startDate: dateRange.start,\n        endDate: dateRange.end,\n      },\n      { emitEvent: false },\n    );\n  }\n\n  /**\n   * Handle vehicle selection from chat component (guided mode)\n   */\n  onChatVehiclesSelected(vehicles: { id: string; name: string }[]): void {\n    const vehicleIds = vehicles.map((v) => v.id);\n    this._selectedAssetIds.set(vehicleIds);\n  }\n\n  /**\n   * Handle data types selection from chat component (guided mode)\n   */\n  onChatDataTypesSelected(dataTypes: string[]): void {\n    this.selectedDataTypesList.set(dataTypes);\n    // Also update the data type options to match\n    this.dataTypeOptions.update((options) =>\n      options.map((opt) => ({\n        ...opt,\n        selected: dataTypes.includes(opt.value),\n      })),\n    );\n  }\n\n  // ============================================================================\n  // Header Summary Editing Handlers\n  // ============================================================================\n\n  /**\n   * Handle vehicle selection changes from header component\n   */\n  onHeaderVehiclesChanged(vehicleIds: string[]): void {\n    this._selectedAssetIds.set(vehicleIds);\n  }\n\n  /**\n   * Handle date range changes from header component\n   */\n  onHeaderDateRangeChanged(dateRange: { start: Date; end: Date }): void {\n    this.formStartDate.set(dateRange.start);\n    this.formEndDate.set(dateRange.end);\n    this.apiForm.patchValue(\n      {\n        startDate: dateRange.start,\n        endDate: dateRange.end,\n      },\n      { emitEvent: false },\n    );\n    // Clear any preset since user manually changed dates\n    this.activeDatePreset.set(null);\n  }\n\n  /**\n   * Handle data types changes from header component\n   * This triggers data collection for the newly selected data types\n   */\n  onHeaderDataTypesChanged(newDataTypes: string[]): void {\n    if (newDataTypes.length === 0) return;\n\n    // Convert to ChatDataType array and trigger data collection\n    const dataTypes = newDataTypes as ChatDataType[];\n    void this.onChatDataCollectionTriggered(dataTypes);\n  }\n\n  /**\n   * Selected vehicle IDs for header component binding\n   */\n  readonly headerSelectedVehicleIds = computed(() => this._selectedAssetIds());\n\n  /**\n   * Available vehicles for header component binding (with selection state)\n   */\n  readonly headerAvailableVehicles = computed(() => {\n    const allAssets = this.assets();\n    const selectedIds = this._selectedAssetIds();\n    return allAssets.map((asset) => ({\n      id: asset.value,\n      name: asset.label,\n      selected: selectedIds.includes(asset.value),\n    }));\n  });\n\n  /**\n   * Handle generate report from footer component\n   */\n  async onFooterGenerateReport(): Promise<void> {\n    const query = this.currentQuery();\n    if (!query) {\n      this.errorMessage.set('Please build a query first by chatting.');\n      return;\n    }\n\n    // Check if we have collected data\n    const data = this.collectedData();\n    if (!data) {\n      // Trigger data collection first\n      const dataTypes = this.selectedDataTypesList();\n      if (dataTypes.length === 0) {\n        this.errorMessage.set('Please specify data types in the chat first.');\n        return;\n      }\n      await this.onChatDataCollectionTriggered(dataTypes as ChatDataType[]);\n      return;\n    }\n\n    // Generate report\n    await this.generateReportWithData(query, data);\n  }\n\n  /**\n   * Switch back to chat view from dashboard\n   */\n  onBackToChat(): void {\n    this.showChatView.set(true);\n  }\n\n  /**\n   * Start a new report (clear everything)\n   */\n  onNewReport(): void {\n    this.apiResponse.set(null);\n    this.collectedData.set(null);\n    this.currentQuery.set('');\n    this.currentConfidence.set(0);\n    this.selectedDataTypesList.set([]);\n    this.showChatView.set(true);\n    this.errorMessage.set(null);\n    this.successMessage.set(null);\n\n    // Reset the chat component\n    this.queryChatComponent?.clearSession();\n  }\n\n  /**\n   * Generate report with pre-collected data\n   */\n  private async generateReportWithData(\n    query: string,\n    data: AggregatedData,\n  ): Promise<void> {\n    this.isTestingApi.set(true);\n    this.errorMessage.set(null);\n    this.successMessage.set(null);\n\n    try {\n      const summarizedData = this.buildSummarizedData(\n        data,\n      ) as unknown as SummarizedData;\n\n      // Build request body\n      const requestBody = this.buildRequestBody(query, data, summarizedData);\n\n      // Create multipart form data\n      const formData = new FormData();\n\n      // Part 1: Request metadata\n      const requestBlob = new Blob([JSON.stringify(requestBody)], {\n        type: 'application/json',\n      });\n      formData.append('request', requestBlob, 'request.json');\n\n      // Part 2: Telemetry data\n      const telemetryPayload = {\n        aggregated_data: data,\n        summarized_data: summarizedData,\n      };\n      const telemetryBlob = new Blob([JSON.stringify(telemetryPayload)], {\n        type: 'application/json',\n      });\n      formData.append('data_file', telemetryBlob, 'telemetry.json');\n\n      // Send request\n      const response = await fetch(this.analyticalReviewEndpoint(), {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      // Check if response is an error\n      if (result.error !== undefined && result.error !== null) {\n        this.apiResponse.set({\n          success: false,\n          error:\n            (result.message as string | undefined) ?? (result.error as string),\n          statusCode: response.status,\n        });\n      } else {\n        this.apiResponse.set({\n          success: true,\n          data: result,\n          statusCode: response.status,\n        });\n        this.lastReportQuery.set(query);\n        // Switch to dashboard view on success\n        this.showChatView.set(false);\n      }\n    } catch (error) {\n      console.error('Report generation failed:', error);\n      this.apiResponse.set({\n        success: false,\n        error:\n          error instanceof Error ? error.message : 'Report generation failed',\n      });\n    } finally {\n      this.isTestingApi.set(false);\n    }\n  }\n\n  /**\n   * Build request body for analytical review API\n   */\n  private buildRequestBody(\n    query: string,\n    _data: AggregatedData,\n    _summarizedData: SummarizedData,\n  ): Record<string, unknown> {\n    const client = this.selectedClientSignal();\n\n    return {\n      key_auth_token: this.authTokenManagerService.getAccessToken(),\n      key_base_url: this.apiUrlService.getCurrentApiUrl(),\n      report_query: query + this.analysisBreakdownText(),\n      client_profile: {\n        id: client?.id ?? '',\n        name: client?.name ?? '',\n        timeZoneId: client?.timeZoneId ?? 'UTC',\n        language: client?.language ?? 'en',\n        currency:\n          ((client as Record<string, unknown> | undefined)?.[\n            'currency'\n          ] as string) ?? 'USD',\n        measurementUnits: {\n          distanceUnit: client?.measurementUnits?.distanceUnit || 'km',\n          speedUnit: client?.measurementUnits?.speedUnit || 'km/h',\n          volumeUnit: client?.measurementUnits?.volumeUnit || 'l',\n          weightUnit: client?.measurementUnits?.weightUnit || 'kg',\n          temperatureUnit: client?.measurementUnits?.temperatureUnit || 'C',\n          altitudeUnit: client?.measurementUnits?.altitudeUnit || 'm',\n          areaUnit: client?.measurementUnits?.areaUnit || 'ha',\n        },\n      },\n      user_role: 'fleet_manager',\n      analysis_type: 'fleet_overview',\n    };\n  }\n\n  async onTestApi(): Promise<void> {\n    if (!this.isReadyForTesting()) {\n      this.errorMessage.set(\n        'Please fill in all required fields before testing.',\n      );\n      return;\n    }\n\n    const selectedAssetIds = this.selectedAssetIds;\n    const formValues = this.apiForm.value;\n    const selectedDataTypes = this.selectedDataTypes() as DataType[];\n\n    if (selectedAssetIds.length === 0) return;\n\n    // Reset states\n    this.isTestingApi.set(true);\n    this.isCollectingData.set(true);\n    this.errorMessage.set(null);\n    this.successMessage.set(null);\n    this.apiResponse.set(null);\n    this.collectedData.set(null);\n    this.collectionErrors.set([]);\n\n    // Subscribe to progress updates\n    const progressSubscription =\n      this.telemetryDataCollectionService.progress$.subscribe((progress) => {\n        this.collectionProgress.set(progress);\n        this.loadingMessage.set(progress.message);\n      });\n\n    try {\n      // Ensure dates are properly converted to UTC/GMT ISO format\n      const startDate = new Date(formValues.startDate);\n      const endDate = new Date(formValues.endDate);\n\n      // Build vehicle names map from assets\n      const allAssets = this.assets();\n      const vehicleNames: Record<string, string> = {};\n      for (const id of selectedAssetIds) {\n        const asset = allAssets.find((a) => a.value === id);\n        if (asset) {\n          vehicleNames[id] = asset.label;\n        }\n      }\n\n      // Create data collection request\n      const collectionRequest: DataCollectionRequest = {\n        vehicleIds: selectedAssetIds,\n        vehicleNames,\n        startDate: startDate.toISOString(),\n        endDate: endDate.toISOString(),\n        dataTypes:\n          selectedDataTypes.length > 0\n            ? selectedDataTypes\n            : ['trips', 'events', 'telemetry'],\n        baseUrl: this.apiUrlService.getCurrentApiUrl(),\n        authToken: this.authTokenManagerService.getAccessToken() ?? '',\n      };\n\n      // Collect data from telemetry API\n      const collectionResult =\n        await this.telemetryDataCollectionService.collectFleetData(\n          collectionRequest,\n        );\n\n      if (collectionResult.success && collectionResult.data) {\n        this.collectedData.set(collectionResult.data);\n        this.isCollectingData.set(false);\n\n        // Now send the aggregated data to the analytical review endpoint using multipart upload\n        const selectedClient = this.selectedClientSignal();\n\n        // Build the full query with analysis breakdown preferences\n        const breakdownText = this.analysisBreakdownText();\n        const fullQuery = formValues.reportQuery + breakdownText;\n\n        // Request metadata (authentication and query info)\n        const requestMetadata = {\n          key_auth_token: this.authTokenManagerService.getAccessToken(),\n          key_base_url: this.apiUrlService.getCurrentApiUrl(),\n          report_query: fullQuery,\n          client_profile: {\n            id: selectedClient?.id,\n            name: selectedClient?.name,\n            timeZoneId: selectedClient?.timeZoneId ?? 'UTC',\n            language: selectedClient?.language ?? 'en',\n            currency: 'ZAR', // TODO: Add currency field to client profile when available\n            measurementUnits: selectedClient?.measurementUnits ?? {\n              distanceUnit: 'kilometres',\n              speedUnit: 'kilometresPerHour',\n              volumeUnit: 'litres',\n              weightUnit: 'kilograms',\n              temperatureUnit: 'celsius',\n              altitudeUnit: 'metres',\n              areaUnit: 'squareKilometres',\n            },\n          },\n          user_role: 'fleet_manager',\n          analysis_type: 'fleet_overview',\n        };\n\n        // Telemetry data (large payload)\n        const telemetryData = {\n          aggregated_data: collectionResult.data,\n          summarized_data: this.buildSummarizedData(collectionResult.data),\n        };\n\n        // Check payload size before sending (multipart supports up to 20MB)\n        const telemetryDataBlob = new Blob([JSON.stringify(telemetryData)], {\n          type: 'application/json',\n        });\n        const payloadSizeBytes = telemetryDataBlob.size;\n        const payloadSizeMB = payloadSizeBytes / (1024 * 1024);\n        const maxPayloadSizeMB = 20; // Multipart supports up to 20MB\n\n        if (payloadSizeMB > maxPayloadSizeMB) {\n          this.isTestingApi.set(false);\n          this.isCollectingData.set(false);\n          progressSubscription.unsubscribe();\n\n          const suggestions: string[] = [];\n          if (selectedDataTypes.includes('telemetry')) {\n            suggestions.push(\n              'Remove \"Telemetry\" from data types (telemetry data is usually the largest)',\n            );\n          }\n          if (selectedDataTypes.includes('events')) {\n            suggestions.push('Remove \"Events\" from data types');\n          }\n          if (selectedAssetIds.length > 3) {\n            suggestions.push(\n              `Reduce the number of vehicles (currently ${selectedAssetIds.length} selected)`,\n            );\n          }\n          const startDate = new Date(formValues.startDate);\n          const endDate = new Date(formValues.endDate);\n          const daysDiff =\n            (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\n          if (daysDiff > 7) {\n            suggestions.push(\n              `Reduce the date range (currently ${daysDiff.toFixed(1)} days)`,\n            );\n          }\n\n          const suggestionText =\n            suggestions.length > 0\n              ? `\\n\\nSuggestions:\\n‚Ä¢ ${suggestions.join('\\n‚Ä¢ ')}`\n              : '';\n\n          this.errorMessage.set(\n            `Payload size (${payloadSizeMB.toFixed(2)} MB) exceeds the maximum allowed size of ${maxPayloadSizeMB} MB. ` +\n              `Please reduce the amount of data being sent.${suggestionText}`,\n          );\n          return;\n        }\n\n        // Store the full query (including breakdown preferences) for display in the dashboard\n        this.lastReportQuery.set(fullQuery);\n\n        // Build multipart FormData\n        const formData = new FormData();\n\n        // Add request metadata as JSON blob\n        formData.append(\n          'request',\n          new Blob([JSON.stringify(requestMetadata)], {\n            type: 'application/json',\n          }),\n          'request.json',\n        );\n\n        // Add telemetry data as JSON file\n        formData.append('data_file', telemetryDataBlob, 'telemetry.json');\n\n        this.loadingMessage.set('Generating AI-powered analysis...');\n\n        // Note: Do NOT set Content-Type header - browser sets it with boundary automatically\n        this.http\n          .post<ApiResponseOrError>(this.analyticalReviewEndpoint(), formData)\n          .subscribe({\n            next: (response: ApiResponseOrError) => {\n              // Check if the response contains an error (backend returns HTTP 200 with error JSON)\n              const errorResponse = response as ErrorResponse;\n              const isError = isDefined(errorResponse.error);\n              this.apiResponse.set({\n                success: !isError,\n                data: response,\n                error: isError\n                  ? (errorResponse.message ?? errorResponse.error)\n                  : undefined,\n                statusCode: 200,\n              });\n              this.isTestingApi.set(false);\n              if (isError) {\n                this.errorMessage.set(\n                  `Analysis failed: ${errorResponse.message ?? errorResponse.error}`,\n                );\n              } else {\n                this.successMessage.set('Report generated successfully!');\n              }\n              progressSubscription.unsubscribe();\n            },\n            error: (error) => {\n              this.apiResponse.set({\n                success: false,\n                error:\n                  error.error?.message ?? error.message ?? 'Analysis failed',\n                statusCode: error.status,\n              });\n              this.isTestingApi.set(false);\n              this.errorMessage.set(\n                `Analysis failed: ${error.error?.message ?? error.message ?? 'Unknown error'}`,\n              );\n              progressSubscription.unsubscribe();\n            },\n          });\n      } else {\n        // Data collection failed\n        this.isTestingApi.set(false);\n        this.isCollectingData.set(false);\n\n        if (collectionResult.errors) {\n          this.collectionErrors.set(collectionResult.errors);\n        }\n\n        const errorMsg =\n          collectionResult.errors?.[0]?.error ?? 'Data collection failed';\n        this.errorMessage.set(`Data collection failed: ${errorMsg}`);\n        progressSubscription.unsubscribe();\n      }\n    } catch (error) {\n      this.isTestingApi.set(false);\n      this.isCollectingData.set(false);\n      this.errorMessage.set(\n        `Data collection failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      );\n      progressSubscription.unsubscribe();\n    }\n  }\n\n  onClearResponse(): void {\n    this.apiResponse.set(null);\n    this.errorMessage.set(null);\n    this.successMessage.set(null);\n  }\n\n  onRecalculate(): void {\n    // Re-run the report with the same parameters\n    this.apiResponse.set(null);\n    this.errorMessage.set(null);\n    this.successMessage.set(null);\n    // Trigger the API call again\n    void this.onTestApi();\n  }\n\n  private startLoadingMessages(): void {\n    const selectedDataTypes = this.selectedDataTypes();\n    const selectedAssetIds = this.selectedAssetIds;\n    const vehicleText =\n      selectedAssetIds.length === 1\n        ? 'selected vehicle'\n        : `${selectedAssetIds.length} selected vehicles`;\n\n    const messages = [\n      'Connecting to AI analysis engine...',\n      `Gathering ${selectedDataTypes.join(', ')} data for ${vehicleText}...`,\n      'Processing telemetry information...',\n      'Analyzing fleet patterns and behaviors...',\n      'Identifying potential issues and insights...',\n      'Generating intelligent recommendations...',\n      'Finalizing comprehensive report...',\n      'Almost ready, applying finishing touches...',\n    ];\n\n    let messageIndex = 0;\n    this.loadingMessage.set(messages[messageIndex]);\n\n    this.loadingInterval = setInterval(() => {\n      messageIndex = (messageIndex + 1) % messages.length;\n      this.loadingMessage.set(messages[messageIndex]);\n    }, 3000); // Change message every 3 seconds\n  }\n\n  private stopLoadingMessages(): void {\n    if (isDefined(this.loadingInterval)) {\n      clearInterval(this.loadingInterval);\n      this.loadingInterval = null;\n    }\n  }\n\n  /**\n   * Columns that should include unique sample values for AI context.\n   * Format: { dataType: ['columnName1', 'columnName2'] }\n   * Supports wildcards: 'io.*.name' matches 'io.ignition.name', 'io.door.name', etc.\n   */\n  private readonly columnsWithSampleValues: Record<string, string[]> = {\n    trips: [],\n    events: ['eventType', 'eventClass'],\n    alerts: ['eventType', 'eventClass'],\n    telemetry: ['io.*.name'],\n  };\n\n  /**\n   * Extracts column names from an array of data items.\n   * For specified columns, includes unique sample values (e.g., \"eventType:Speeding,Harsh Braking\").\n   * Supports wildcard patterns (e.g., \"io.*.name\" matches \"io.ignition.name\").\n   * @param items - Array of data items\n   * @param dataType - Type of data (trips, events, alerts, telemetry)\n   */\n  private extractColumnNames(\n    items: (TripItem | EventItem | TelemetryItem | AlertItem)[],\n    dataType: string,\n  ): string[] {\n    if (isNullOrUndefined(items) || items.length === 0) return [];\n\n    const columnNames = this.flattenKeys(items[0]);\n    const columnsToEnhance = this.columnsWithSampleValues[dataType] ?? [];\n\n    // If no columns need enhancement, return plain column names\n    if (columnsToEnhance.length === 0) {\n      return columnNames;\n    }\n\n    // Enhance specified columns with unique values\n    return columnNames.map((colName) => {\n      if (this.shouldEnhanceColumn(colName, columnsToEnhance)) {\n        const uniqueValues = this.getUniqueValues(items, colName);\n        if (uniqueValues.length > 0) {\n          return `${colName}:${uniqueValues.join(',')}`;\n        }\n      }\n      return colName;\n    });\n  }\n\n  /**\n   * Checks if a column should be enhanced with sample values.\n   * Supports exact matches and wildcard patterns (e.g., \"io.*.name\").\n   */\n  private shouldEnhanceColumn(colName: string, patterns: string[]): boolean {\n    return patterns.some((pattern) => {\n      if (pattern.includes('*')) {\n        // Convert wildcard pattern to regex: \"io.*.name\" -> \"^io\\.[^.]+\\.name$\"\n        const regexPattern = pattern\n          .replaceAll('.', String.raw`\\.`)\n          .replaceAll('*', '[^.]+');\n        const regex = new RegExp(`^${regexPattern}$`);\n        return regex.test(colName);\n      }\n      return colName === pattern;\n    });\n  }\n\n  /**\n   * Extracts unique values for a specific column from an array of items.\n   * Supports dot-notation paths (e.g., \"io.ignition.name\").\n   * Limits to first 10 unique values to keep payload manageable.\n   */\n  private getUniqueValues(\n    items: (TripItem | EventItem | TelemetryItem | AlertItem)[],\n    columnName: string,\n  ): string[] {\n    const values = new Set<string>();\n    const maxValues = 10;\n\n    for (const item of items) {\n      if (values.size >= maxValues) break;\n\n      const value = this.getNestedValue(item, columnName);\n      if (value !== undefined && value !== null && value !== '') {\n        let stringValue: string;\n        if (typeof value === 'object') {\n          stringValue = JSON.stringify(value);\n        } else if (typeof value === 'string') {\n          stringValue = value;\n        } else if (typeof value === 'number' || typeof value === 'boolean') {\n          stringValue = String(value);\n        } else {\n          stringValue = '[Unknown]';\n        }\n        values.add(stringValue);\n      }\n    }\n\n    return Array.from(values);\n  }\n\n  /**\n   * Gets a nested value from an object using dot notation.\n   * e.g., getNestedValue({ io: { ignition: { name: 'Ignition' } } }, 'io.ignition.name') -> 'Ignition'\n   */\n  private getNestedValue(obj: Record<string, unknown>, path: string): unknown {\n    const parts = path.split('.');\n    let current: unknown = obj;\n\n    for (const part of parts) {\n      if (current === undefined || current === null) return undefined;\n      if (typeof current === 'object' && current !== null) {\n        current = (current as Record<string, unknown>)[part];\n      } else {\n        return undefined;\n      }\n    }\n\n    return current;\n  }\n\n  /**\n   * Recursively flattens object keys using dot notation.\n   * e.g., { stats: { distance: 100 } } -> ['stats.distance']\n   */\n  private flattenKeys(obj: Record<string, unknown>, prefix = ''): string[] {\n    const keys: string[] = [];\n\n    for (const key of Object.keys(obj)) {\n      const fullKey = prefix ? `${prefix}.${key}` : key;\n      const value = obj[key];\n\n      if (\n        isDefined(value) &&\n        typeof value === 'object' &&\n        value !== null &&\n        !Array.isArray(value)\n      ) {\n        // Recursively flatten nested objects\n        keys.push(\n          ...this.flattenKeys(value as Record<string, unknown>, fullKey),\n        );\n      } else {\n        keys.push(fullKey);\n      }\n    }\n\n    return keys;\n  }\n\n  /**\n   * Builds a summarized version of aggregated data where trips, events,\n   * telemetry, and alerts contain only column names instead of actual data.\n   * This helps the LLM understand the data structure without the full payload.\n   */\n  private buildSummarizedData(\n    aggregatedData: AggregatedData,\n  ): Record<string, unknown> {\n    const summarized: {\n      vehicles: Record<string, unknown>;\n      metadata: unknown;\n    } = {\n      vehicles: {},\n      metadata: aggregatedData.metadata,\n    };\n\n    // Keys are already vehicle names (set in telemetry-data-collection.service)\n    for (const [vehicleName, vehicleData] of Object.entries(\n      aggregatedData.vehicles,\n    )) {\n      summarized.vehicles[vehicleName] = {\n        trips: this.extractColumnNames(vehicleData.trips, 'trips'),\n        events: this.extractColumnNames(vehicleData.events, 'events'),\n        telemetry: this.extractColumnNames(vehicleData.telemetry, 'telemetry'),\n        alerts: this.extractColumnNames(vehicleData.alerts, 'alerts'),\n        data_summary: vehicleData.data_summary,\n      };\n    }\n\n    return summarized;\n  }\n\n  ngOnDestroy(): void {\n    this.stopLoadingMessages();\n  }\n\n  getSelectedVehicleNames(): string[] {\n    const assetIds = this._selectedAssetIds();\n    const allAssets = this.assets();\n\n    if (!Array.isArray(allAssets) || !Array.isArray(assetIds)) {\n      return [];\n    }\n\n    return allAssets\n      .filter(\n        (asset) => isDefined(asset?.value) && assetIds.includes(asset.value),\n      )\n      .map((asset) => asset.label || asset.value || 'Unknown Vehicle');\n  }\n\n  onCopyRequestBody(): void {\n    if (!this.isReadyForTesting()) return;\n\n    const selectedAssetIds = this.selectedAssetIds;\n    const formValues = this.apiForm.value;\n    const selectedDataTypes = this.selectedDataTypes();\n    const selectedClient = this.selectedClientSignal();\n\n    if (selectedAssetIds.length === 0) return;\n\n    // Ensure dates are properly converted to UTC/GMT ISO format\n    const startDate = new Date(formValues.startDate);\n    const endDate = new Date(formValues.endDate);\n\n    const requestBody = {\n      client_id: selectedClient?.id,\n      start_date: startDate.toISOString(),\n      end_date: endDate.toISOString(),\n      vehicle_ids: selectedAssetIds,\n      data_types:\n        selectedDataTypes.length > 0\n          ? selectedDataTypes\n          : ['trips', 'events', 'telemetry'],\n      report_query: formValues.reportQuery,\n      key_base_url: this.apiUrlService.getCurrentApiUrl(),\n      key_auth_token: this.authTokenManagerService.getAccessToken(),\n      client_profile: {\n        id: selectedClient?.id,\n        name: selectedClient?.name,\n        timeZoneId: selectedClient?.timeZoneId ?? 'UTC',\n        language: selectedClient?.language ?? 'en',\n        currency: 'ZAR',\n        measurementUnits: selectedClient?.measurementUnits ?? {\n          distanceUnit: 'kilometres',\n          speedUnit: 'kilometresPerHour',\n          volumeUnit: 'litres',\n          weightUnit: 'kilograms',\n          temperatureUnit: 'celsius',\n          altitudeUnit: 'metres',\n          areaUnit: 'squareKilometres',\n        },\n      },\n    };\n\n    navigator.clipboard\n      .writeText(JSON.stringify(requestBody, null, 2))\n      .then(() => {\n        this.successMessage.set('Request body copied to clipboard!');\n        setTimeout(() => this.successMessage.set(null), 3000);\n      })\n      .catch(() => {\n        this.errorMessage.set('Failed to copy to clipboard');\n      });\n  }\n}\n", "<div class=\"analytical-report-container\">\n  <!-- Error/Success Messages (floating) -->\n  @if (errorMessage()) {\n    <div class=\"floating-message error\">\n      <p-message severity=\"error\">{{ errorMessage() }}</p-message>\n    </div>\n  }\n\n  @if (successMessage()) {\n    <div class=\"floating-message success\">\n      <p-message severity=\"success\">{{ successMessage() }}</p-message>\n    </div>\n  }\n\n  <!-- Dashboard View (shown after successful report generation) -->\n  <!-- Using [hidden] instead of @if to preserve chat component state when switching views -->\n  <div class=\"dashboard-view\" [hidden]=\"!dashboardResponse() || showChatView()\">\n    <div class=\"dashboard-header\">\n      <p-button\n        icon=\"pi pi-arrow-left\"\n        label=\"Back to Chat\"\n        (onClick)=\"onBackToChat()\"\n        severity=\"secondary\"\n        [outlined]=\"true\"\n        size=\"small\"\n      />\n      <div class=\"dashboard-actions\">\n        <p-button\n          label=\"New Report\"\n          icon=\"pi pi-plus\"\n          (onClick)=\"onNewReport()\"\n          severity=\"primary\"\n          size=\"small\"\n        />\n      </div>\n    </div>\n\n    @if (dashboardResponse()) {\n      <app-analytics-dashboard\n        [response]=\"dashboardResponse()\"\n        [isLoading]=\"false\"\n        [error]=\"undefined\"\n        [userQuery]=\"lastReportQuery()\"\n        [dateRange]=\"formatDateRange()\"\n        [vehicleNames]=\"getSelectedVehicleNames()\"\n        [clientTimeZone]=\"selectedClientSignal()?.timeZoneId ?? undefined\"\n        [clientLanguage]=\"selectedClientSignal()?.language ?? undefined\"\n        (recalculate)=\"onRecalculate()\"\n      >\n      </app-analytics-dashboard>\n    }\n  </div>\n\n  <!-- Chat View (main interface) -->\n  <!-- Using [hidden] instead of @if to preserve component state when switching to dashboard -->\n  <div class=\"chat-view\" [hidden]=\"!showChatView()\">\n    <!-- Summary Header (fixed at top) -->\n    <app-chat-summary-header\n      [summary]=\"headerSummary()\"\n      [availableVehicles]=\"headerAvailableVehicles()\"\n      [selectedVehicleIds]=\"headerSelectedVehicleIds()\"\n      [collectingDataTypes]=\"collectingDataTypes()\"\n      (vehiclesChanged)=\"onHeaderVehiclesChanged($event)\"\n      (dateRangeChanged)=\"onHeaderDateRangeChanged($event)\"\n      (dataTypesChanged)=\"onHeaderDataTypesChanged($event)\"\n    />\n\n    <!-- Scrollable Chat Area -->\n    <div class=\"chat-area\">\n      <app-query-chat\n        #queryChatComponent\n        [dateRange]=\"chatDateRange()\"\n        [selectedVehicles]=\"chatSelectedVehicles()\"\n        [clientInfo]=\"chatClientInfo()\"\n        [fullWidthMode]=\"true\"\n        [guidedMode]=\"true\"\n        [availableVehiclesForSelection]=\"availableVehiclesForChat()\"\n        (dataCollectionTriggered)=\"onChatDataCollectionTriggered($event)\"\n        (generateReport)=\"onChatGenerateReport($event)\"\n        (queryUpdated)=\"onQueryUpdated($event)\"\n        (confidenceUpdated)=\"onConfidenceUpdated($event)\"\n        (dateRangeSelected)=\"onChatDateRangeSelected($event)\"\n        (vehiclesSelected)=\"onChatVehiclesSelected($event)\"\n        (dataTypesSelected)=\"onChatDataTypesSelected($event)\"\n      />\n    </div>\n\n    <!-- Footer Preview (fixed at bottom) -->\n    <app-chat-footer-preview\n      [query]=\"currentQuery()\"\n      [confidence]=\"currentConfidence()\"\n      [isLoading]=\"isTestingApi()\"\n      [isCollecting]=\"isCollectingData()\"\n      [collectionProgress]=\"collectionProgress()?.percentage ?? 0\"\n      (generateReport)=\"onFooterGenerateReport()\"\n      (queryChanged)=\"onQueryChanged($event)\"\n    />\n  </div>\n\n  <!-- Loading Overlay -->\n  @if (isTestingApi() && !isCollectingData()) {\n    <div class=\"loading-overlay\">\n      <div class=\"loading-content\">\n        <p-progressSpinner styleClass=\"w-12 h-12\" />\n        <p class=\"loading-message\">{{ loadingMessage() }}</p>\n        <p class=\"loading-hint\">Analysis may take up to 60 seconds</p>\n      </div>\n    </div>\n  }\n</div>\n"],
  "mappings": "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",
  "names": ["_c1", "_c0", "_c0", "_forTrack0", "_forTrack0", "_forTrack0", "_forTrack0", "response", "_forTrack1", "_forTrack0", "_c1", "DEFAULT_DATA_TYPES", "_forTrack0", "startDate", "endDate"]
}
